# Pareto实验优化配置 V2
# ==========================================
# 目标：增加成本对策略的影响，使μ对系统行为更敏感
#
# 调整策略：
# - 增加成本参数 (c_r, c_p)
# - 调整效率比，使成本影响更大
# - 预期：θ*随μ变化更明显，成本适应性更好
# ==========================================

gpu:
  n_gpus: 8
  max_memory_per_gpu: 10
  default_gpu_ids: [4, 5, 6, 7]
  default_mode: "auto"

models:
  small:
    models:
      - "Qwen/Qwen2.5-1.5B-Instruct"
      - "Qwen/Qwen2.5-3B-Instruct"
    recommended_mode: "single"
    n_gpus_needed: 1

mdp:
  # 状态空间
  U_max: 1.0
  
  # ========================================
  # 调整后的状态转移参数
  # ========================================
  # 设计原则：
  # - 减少delta_r，增加delta_p，使效率比更接近
  # - 降低p_s，增加不确定性
  #
  delta_r: 0.18       # 检索进度增量 (从0.20减少10%)
  delta_p: 0.06       # 推理进度增量 (从0.05增加20%)
  
  # 检索成功率 - 略微降低以增加不确定性
  p_s: 0.65           # 检索成功概率 (从0.70降低到0.65)
  
  # ========================================
  # 调整后的成本参数
  # ========================================
  # 设计原则：
  # - 增加成本参数，使成本对策略的影响更大
  # - c_r/c_p = 4.0 (保持比例不变)
  #
  c_r: 0.12           # 检索成本 (从0.08增加50%)
  c_p: 0.03           # 推理成本 (从0.02增加50%)
  
  # ========================================
  # 效率分析（新参数）
  # ========================================
  # 检索效率 = E[delta_r] / c_r = 0.65 × 0.18 / 0.12 = 0.975
  # 推理效率 = delta_p / c_p = 0.06 / 0.03 = 2.0
  # 
  # 变化：
  # - 检索效率从1.75降低到0.975（降低44%）
  # - 推理效率从2.50降低到2.0（降低20%）
  # - 效率比更接近，成本影响更大
  #
  # 预期行为：
  # - 低μ: 仍然偏好检索（但成本更高）
  # - 中μ: 更容易在检索和推理之间切换
  # - 高μ: 更早切换到推理（节省成本）
  
  # MDP求解参数
  mu: 0.5             # 默认值 (实验时会扫描)
  gamma: 0.98         # 折扣因子
  grid_size: 101      # U的离散化粒度
  
  # 质量函数
  quality_function: "linear"
  quality_k: 1.0
  
  # Reward Shaping
  reward_shaping:
    enabled: false
    k: 1.0

inference:
  batch_size: 4
  generation:
    max_new_tokens: 10
    temperature: 0.1
    do_sample: false
  dtype: "float16"

output:
  results_dir: "results/pareto_optimized_v2"
  save_full_results: true
  verbose: true
