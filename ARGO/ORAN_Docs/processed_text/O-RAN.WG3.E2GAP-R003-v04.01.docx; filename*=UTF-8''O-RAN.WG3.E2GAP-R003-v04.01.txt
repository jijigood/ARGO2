O-RAN.WG3.E2GAP-R003-v04.01

O-RAN.WG3.E2GAP-R003-v04.01

Technical Specification

O-RAN Work Group 3 (Near-RT RIC and E2 Interface)

E2 General Aspects and Principles (E2GAP)

Copyright © 2023 by the O-RAN ALLIANCE e.V.

The copying or incorporation into any other work of part or all of the material available in this specification in any form without the prior written permission of O-RAN ALLIANCE e.V.  is prohibited, save that you may print or download extracts of the material of this specification for your personal use, or copy the material of this specification for the purpose of sending to individual third parties for their information provided that you acknowledge O-RAN ALLIANCE as the source of the material and that you inform the third party that these conditions apply to them and that they must comply with them.

O-RAN ALLIANCE e.V., Buschkauler Weg 27, 53347 Alfter, Germany

Register of Associations, Bonn VR 11238, VAT ID DE321720189

"© 2020. 3GPP™ TSs and TRs are the property of ARIB, ATIS, CCSA, ETSI, TSDSI, TTA and TTC who jointly own the copyright in them. They are subject to further modifications and are therefore provided to you "as is" for information purposes only. Further use is strictly prohibited."

Contents

List of figures	5

List of tables	5

Foreword	6

Modal verbs terminology	6

1	Scope	7

2	References	7

2.1	Normative references	7

2.2	Informative references	8

3	Definition of terms, symbols and abbreviations	8

3.1	Terms	8

3.2	Symbols	8

3.3	Abbreviations	9

4	E2 Interface Architecture	9

4.1	General Architecture Principles	9

4.2	O-RAN Architecture Considerations	9

5	E2 Interface	11

5.1	E2 interface requirements and general principles	11

5.1.1	E2 Interface Requirements	11

5.1.2	E2 interface general principles	11

5.2	E2 interface specification objectives	12

5.3	Functions of the E2 Interface	12

5.3.1	General	12

5.3.2	RIC services and related procedures	13

5.3.3	Combining RIC services within a common Subscription	30

5.3.4	Combining RIC services as a sequence of RIC services	30

5.4	RAN Function E2 Service Model	31

5.5	E2 support services	31

5.5.1	General	31

5.5.2	E2 Setup procedure	32

5.5.3	E2 Reset procedure	33

5.5.4	RIC Service Update procedure	36

5.5.5	E2 Node Configuration Update procedure	37

5.5.6	E2 Removal procedure	38

6	E2 interface signalling	40

6.1	E2 Control Plane Protocol (E2AP)	40

6.2	Multiple TNLAs over E2	41

7	Security for the E2 interface	45

7.1	General	45

7.2	Requirements for the E2 interfaces	45

7.3	Security mechanism for the E2 interface	46

8	Other E2 interface specifications	46

8.1	O-RAN E2 interface: E2 Application Protocol (E2AP) (ORAN-WG3.E2AP)	46

8.2	O-RAN E2 interface: E2 Service Model (E2SM) specifications	46

Annex A (normative): Deployment considerations	47

A.1	Deployment use cases	47

Annex (informative): Change History	49

Annex (informative): History	50

List of figures

	Figure 4.2-1: O-RAN Architecture Overview showing Near-RT RIC interfaces	10

	Figure 5.1-1: Relationship between Near-RT RIC and E2 Node	12

	Figure 5.3.2.2.2-1: RIC Service REPORT	14

	Figure 5.3.2.2.3-1: RIC Service INSERT with subsequent RIC Service CONTROL responses	16

	Figure 5.3.2.2.4-1: RIC Service CONTROL as response to RIC Service INSERT	19

	Figure 5.3.2.2.4-2: RIC Service CONTROL initiated by NEAR-RT RIC	21

	Figure 5.3.2.2.5-1: RIC Service POLICY	22

	Figure 5.3.2.2.5A-1: RIC Service QUERY	24

	Figure 5.3.2.6-1: RIC Subscription, RIC Subscription Modification and RIC Subscription Delete procedures	28

	Figure 5.3.2.6-2: RIC Subscription Delete Required and RIC Subscription Delete procedures	29

	Figure 5.3.2.6-3: RIC Subscription Modification Required procedure	30

	Figure 5.5.2-1: E2 Setup procedure	33

	Figure 5.5.3-1: E2 Reset procedure (E2 Node initiated)	34

	Figure 5.5.3-2: E2 Reset procedure (Near-RT RIC initiated)	36

	Figure 5.5.4-1: RIC Service update procedure	37

	Figure 5.5.5-1: E2 Node configuration update procedure	38

	Figure 5.5.6-1: E2 Removal procedure (E2 Node initiated)	39

	Figure 5.5.6-2: E2 Removal procedure (Near-RT RIC initiated)	40

	Figure 6.1-1: E2AP protocol stack	41

	Figure 6.2-1: TNL management examples (E2 Setup and Near-RT RIC initiated TNL Addition)	43

	Figure 6.2-2: TNL management examples (Near-RT RIC initiated TNL Modification and TNL Removal)	44

	Figure 6.2-3: TNL management examples (E2 Node initiated TNL Addition and TNL Removal)	45

	Figure A.1-1: Example deployment use case with single E2 Node supporting both O-CU-CP and O-CU-UP roles	47

	Figure A.1-2: Example deployment use case with single E2 Node supporting O-CU-CP, O-CU-UP and O-DU roles	48

List of tables

	Table 5.3.2.6-1: Relationship between RIC Services and E2AP Procedures	26

Foreword

This Technical Specification (TS) has been produced by WG3 of the O-RAN Alliance.

The content of the present document is subject to continuing work within O-RAN and may change following formal O-RAN approval. Should the O-RAN Alliance modify the contents of the present document, it will be re-released by O-RAN with an identifying change of version date and an increase in version number as follows:

version xx.yy.zz

where:

xx:	the first digit-group is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc. (the initial approved document will have xx=01).  Always 2 digits with leading zero if needed.

yy:	the second digit-group is incremented when editorial only changes have been incorporated in the document. Always 2 digits with leading zero if needed.

zz:	the third digit-group included only in working versions of the document indicating incremental changes during the editing process. External versions never include the third digit-group.  Always 2 digits with leading zero if needed.

Modal verbs terminology

In the present document "shall", "shall not", "should", "should not", "may", "need not", "will", "will not", "can" and "cannot" are to be interpreted as described in clause 3.2 of the O-RAN Drafting Rules (Verbal forms for the expression of provisions).

"must" and "must not" are NOT allowed in O-RAN deliverables except when used in direct citation.

1	Scope

The present document describes the general aspects and principles of the E2 interface between Near-RT RIC and one or more E2 Nodes, including the interaction with applications hosted in the Near-RT RIC.

2	References

2.1	Normative references

References are either specific (identified by date of publication and/or edition number or version number) or nonspecific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies.

NOTE 1:	In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in 3GPP Release 17.

NOTE 2:	While any hyperlinks included in this clause were valid at the time of publication, O-RAN cannot guarantee their long-term validity.

The following referenced documents are necessary for the application of the present document.

[1]	3GPP TR 21.905: "Vocabulary for 3GPP Specifications".

[2]	O-RAN.WG3.E2AP, “O-RAN Working Group 3, Near-Real-time RAN Intelligent Controller, E2 Application Protocol (E2AP)”.

[3]	(void)

[4]	(void)

[5]	3GPP TS 36.401: "Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Architecture Description".

[6]	3GPP TS 38.401: "NG-RAN; Architecture description".

[7]	(void)

[8]	(void)

[9]	(void)

[10]	(void)

[11]	(void)

[12]	IETF RFC 4960: “Stream Control Transmission Protocol”.

[13]	(void)

[14]	(void)

[15]	O-RAN.WG2.UCR "O-RAN Working Group 2 Use Cases and Requirements".

[16] 	3GPP TS 38.300 NR; “NR and NG-RAN Overall Description; Stage 2”.

[17]	O-RAN.WG3.E2SM; “O-RAN Working Group 3, Near-Real-time RAN Intelligent Controller, E2 Service Model (E2SM)”.

[18]	O-RAN.WG1.O-RAN-Architecture-Description, “O-RAN Architecture Description”.

[19] 	(void)

[20]	IETF RFC 4303, IP Encapsulating Security Payload (ESP)

[21]	3GPP TS 33.210: Technical Specification Group Services and System Aspects; Network Domain Security (NDS); IP network layer security

[22]	3GPP TS 33.310: Technical Specification Group Service and System Aspects; Network Domain Security (NDS); Authentication Framework (AF)

[23]	IETF RFC 6335, Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry

[24]	(void)

2.2	Informative references

References are either specific (identified by date of publication and/or edition number or version number) or nonspecific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies.

NOTE:	While any hyperlinks included in this clause were valid at the time of publication, O-RAN cannot guarantee their long-term validity.

The following referenced documents are not necessary for the application of the present document, but they assist the user with regard to a particular subject area.

Not applicable.

3	Definition of terms, symbols and abbreviations

3.1	Terms

For the purposes of the present document, the terms given in TR 21.905 [1], O-RAN WG1.OAD [18] and the following apply:

RAN Function: A specific Function in a E2 Node; examples include X2AP, F1AP, E1AP, S1AP, NGAP interfaces and RAN internal functions handling UEs, Cells, etc.

RIC Service: A Service provided on an E2 Node to provide access to messages and measurements and / or enable control of the E2 Node from the Near-RT RIC.

SCTP association: as defined in IETF RFC 4960 [12]. In this version of the documentation, SCTP association is interchangeably used by TNL (Transport Network Layer) association.

SCTP endpoint (or end-point): as defined in IETF RFC 4960 [12].

3.2	Symbols

For the purposes of the present document, the symbols apply:

Void.

3.3	Abbreviations

For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1], O-RAN WG1.OAD [18] and the following apply:

RAT	Radio Access Technology

TNL	Transport Network Layer

TNLA	TNL associationAAS	Active Antenna System

4	E2 Interface Architecture

4.1	General Architecture Principles

The general principles guiding the definition of the E2 interface between Near-RT RIC and E2 Nodes are the following:

-	Near-RT RIC and E2 Node functions are fully separated from transport functions. Addressing scheme used in Near-RT RIC and the E2 Nodes shall not be tied to the addressing schemes of transport functions.

-	The E2 Nodes support all protocol layers and interfaces defined within 3GPP radio access networks that include eNB for E-UTRAN [5] and gNB/ ng-eNB for NG-RAN [16].

-	Near-RT RIC and hosted “xApp” applications shall use a set of services exposed by an E2 Node that is described by a series of RAN function and Radio Access Technology (RAT) dependent “E2 Service Models”.

-	E2 interfaces are defined along the following principles:

-	Interfaces are based on a logical model of the entity controlled through this interface.

-	One physical network element can implement multiple logical nodes.

4.2	O-RAN Architecture Considerations

The Near-RT RIC and E2 Nodes connected by the E2 interface, as presented in figure 4.2-1, are part of the overall O-RAN Architecture [18].

Figure 4.2-1: O-RAN Architecture Overview showing Near-RT RIC interfaces

With respect to the E2 interface:

-	E2 is a logical interface connecting the Near-RT RIC with an E2 Node;

- 	The Near-RT RIC is connected to the O-CU-CP;

-	The Near-RT RIC is connected to the O-CU-UP;

-	The Near-RT RIC is connected to the O-DU;

- 	The Near-RT RIC is connected to the O-eNB;

-	An E2 Node is connected to only one Near-RT RIC;

-	A Near-RT RIC can be connected to multiple E2 Nodes, i.e. multiple O-CU-CPs, O-CU-UPs, O-DUs and O-eNBs.

- 	F1 (F1-C, F1-U) and E1 are logical 3GPP interfaces, whose protocols, termination points and cardinalities are specified in [6].

The Near-RT RIC use E2 interface to collect near real-time information (e.g. UE basis, Cell basis) and provide value added services.

The protocols over E2 interface are based exclusively on Control plane protocols and are defined in [2].

On E2 or Near-RT RIC failure, the E2 Node is able to provide services but there may be an outage for certain value-added services that may only be provided using the Near-RT RIC.

5	E2 Interface

5.1	E2 interface requirements and general principles

5.1.1	E2 Interface Requirements

The E2 interface shall support the following requirements:

-	E2 interface shall uniquely identify each E2 Node configured to directly provide RIC Services to the Near-RT RIC.

-	A given Near-RT RIC may support E2 connections from multiple E2 Nodes, each supporting a specific RAT type.

-	E2 interface shall expose from the E2 Node a list of functions supporting RIC Services and the corresponding E2 Service Model.

-	E2 interface shall allow the Near-RT RIC to address specific RAN Functions in a specific E2 Node.

-	E2 node shall function independently of the Near-RT RIC when and if the E2 interface and/or Near-RT RIC fails.

- 	E2 interface shall support latency requirements for near-real-time optimization, i.e. from 10 milliseconds up to 1 second [18].

-	RRM functional allocation between the Near-RT RIC and the E2 Node shall be subject to the capability of the E2 node exposed over the E2 interface by means of the E2 Service Model, in order to support the use cases such as in [15].

- 	E2 service model shall describe the functions in the E2 Node that may be controlled by the Near RT RIC, thus defining a function-specific RRM split between the E2 node and the Near RT RIC.

-	For a function exposed in the E2 service model, the Near-RT RIC may e.g. monitor, suspend/stop, override or control via policies the behavior of E2 node.

5.1.2	E2 interface general principles

The general principles for the specification of the E2 interface are as follows:

-	E2 interface is open;

-	E2 interface supports the exchange of control signaling information between the endpoints;

-	E2 is a point-to-point interface between the endpoints on Near-RT RIC and E2 Node;

-	E2 interface definition supports interface management procedures based on principles from 3GPP RAN interfaces;

-	E2 interface provides the capability to send predefined information towards the Near-RT RIC based on a pre-configured trigger event;

-	E2 interface supports the ability to provide UE ID information towards the Near-RT RIC based on a pre-configured trigger event;

-	E2 interface enables the Near-RT-RIC to direct the E2 Node to suspend an RRM procedure by interrupting the E2 Node local process and forwarding the relevant information to the Near-RT RIC for processing;

-	E2 interface supports the ability to send control messages (e.g. UE basis, Cell basis) to the E2 Node;

-	E2 interface supports the ability to provide the E2 Node with a set of policies to use when defined events occur;

-	E2 interface supports the ability for E2 Node to notify the Near-RT RIC of what functionality it supports;

-	E2 interface supports the ability to query the E2 Node for relevant RAN- and/or UE-related information.

With respect to the E2 interface, the E2 Node consists of:

-	Logical E2 Agent used to terminate the E2 interface, support global services and to forward/receive RIC service messages towards RAN Functions.

-	One or more RAN Functions that support RIC services exposed by the E2 Node to the Near-RT RIC.

-	Other RAN functions that do not support RIC Services.

Figure 5.1-1: Relationship between Near-RT RIC and E2 Node

5.2	E2 interface specification objectives

The E2 interface specifications shall facilitate the following:

-	Connectivity between Near-RT RIC and E2 Node supplied by different vendors;

-	Exposure of selected E2 Node data (e.g. configuration information (cell configuration, supported slices, PLMNs, etc.), network measurements, context information, etc.) towards the Near-RT RIC

-	Enables the Near-RT RIC to control selected RAN functions on the E2 Node

5.3	Functions of the E2 Interface

5.3.1	General

The E2 functions are grouped into the following categories:

RIC services:

-	RIC Services (REPORT, INSERT, CONTROL, POLICY and QUERY), as described in clause 5.3.2) supported by RIC functional procedures (RIC Subscription, RIC Subscription Modification, RIC Subscription Modification Required, RIC Subscription Delete, RIC Subscription Delete Required, RIC Indication, RIC Control, RIC Query).

E2 support services:

-	Interface Management services supported by Global Procedures (E2 Setup, E2 Reset, E2 Node Configuration Update, E2 Removal, Reporting of General Error Situations)

-	RAN Function services supported by Global Procedures (RIC Service Update, RIC Service Query).

5.3.2	RIC services and related procedures

5.3.2.1	RIC services

Near-RT RIC may use the following RIC services provided by an E2 node:

-	REPORT: Near-RT RIC uses a RIC Subscription and/or RIC Subscription Modification procedures to request that E2 Node sends a REPORT message to Near-RT RIC and the associated procedure continues in the E2 Node after each occurrence of a defined RIC Subscription procedure Event Trigger.

-	INSERT: Near-RT RIC uses a RIC Subscription and/or RIC Subscription Modification procedures to request that E2 Node sends an INSERT message to Near-RT RIC and suspends the associated procedure in the E2 Node after each occurrence of a defined RIC Subscription procedure Event Trigger.

-	CONTROL: Near-RT RIC sends a CONTROL message to E2 Node to initiate a new associated procedure or resume a previously suspended associated procedure in the E2 Node.

-	POLICY: Near-RT RIC uses a RIC Subscription and/or RIC Subscription Modification procedures to request that E2 Node executes a specific POLICY during functioning of the E2 Node after each occurrence of a defined RIC Subscription procedure Event Trigger.

-	QUERY: Near-RT RIC sends a QUERY message to the E2 node to retrieve RAN-related and/or UE-related information from the E2 Node.

5.3.2.2	REPORT service

The REPORT service involves following steps:

1.	Near-RT RIC configures, and subsequently may modify, a RIC Subscription in the E2 Node with information for Indication (Report) that is to be sent by the E2 Node with each occurrence of RIC trigger event condition

2.	During normal functioning of an associated procedure in the E2 Node, a RIC Event Trigger is detected.

3. 	After completing any previous RIC actions, E2 Node sends RIC INDICATION message to Near-RT RIC containing the requested REPORT information along with the originating Request ID.

4.	Associated procedure instance continues in the E2 Node, including any subsequent RIC actions.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

ran<->near: 1) RIC Subscription procedure (RIC Event Trigger, Action=REPORT)

...

ran<-->near: 1a) RIC Subscription Modification procedure

...

note over ran #white: 2) E2 Node detects \nRIC Event Trigger

ran->near: 3) RIC INDICATION(REPORT)

note over ran #lime: 4) Associated procedure \ninstance **continues**

@enduml

Figure 5.3.2.2.2-1: RIC Service REPORT

5.3.2.3	INSERT service

The INSERT service involves following steps:

1.	Near-RT RIC configures, and subsequently may modify, a RIC Subscription in the E2 Node with information for an INSERT action, along with an associated Subsequent Action Information (Subsequent Action type, Time to Wait timer), that is to be performed by E2 Node with each occurrence of Event

2.	During normal functioning of an associated procedure instance in the E2 Node, a trigger event is detected.

3.	After completing any previous RIC actions, E2 Node suspends associated procedure instance for up to a defined Time to Wait period.

4. 	E2 Node sends RIC INDICATION message to Near-RT RIC containing the requested INSERT information along with the originating Request ID and information to identify the suspended associated procedure instance.

5. According to the Time to Wait timer state, arrival of RIC CONTROL procedure, and Subsequent Action parameter in the RIC Subscription, the E2 Node may then:

a)	RIC CONTROL REQUEST message arrives in time:
This case is described in clause 5.3.2.4.

b)	The associated Time to Wait timer expires and Subsequent Action Type set to Continue:
Continue the original associated procedure instance, including any subsequent RIC actions, if and when the associated Time to Wait timer expires. If the Near-RT RIC subsequently sends a RIC CONTROL REQUEST message with the Call Process ID for the same associated procedure, then the E2 Node shall respond with the RIC CONTROL FAILURE message with a cause to indicate that the timer has expired. See also clause 5.3.2.4.

c)	The associated Time to Wait timer expires and Subsequent Action Type set to Halt:
Halt the original associated procedure instance, including any subsequent RIC actions, if and when the associated Time to Wait timer expires. If the Near-RT RIC subsequently sends a RIC CONTROL REQUEST message with the Call Process ID for the same associated procedure, then the E2 Node shall respond with the RIC CONTROL FAILURE message with a cause to indicate that the timer has expired. See also clause 5.3.2.4.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

ran<->near: 1) RIC Subscription procedure (RIC Event Trigger, Action=INSERT)

...

ran<-->near: 1a) RIC Subscription Modification procedure

...

note over ran #white: 2) E2 Node detects RIC Event Trigger

note over ran #pink: 3) Associated procedure instance **suspended**

note over ran #aqua: Start associated Time to Wait Timer

ran->near: 4) RIC INDICATION(INSERT)

alt 5a) Near-RT RIC __responds in time__

	note over near #white: Near-RT RIC performs action

	near->ran: RIC CONTROL REQUEST

	note over near, ran #white: Handle request (see CONTROL service)

else 5b) Time to Wait timer Expires and Subsequent Action = __Continue__

	note over ran #aqua: Associated Time to Wait Timer expires

	note over ran #lime: Associated procedure instance **resumes**

	near-->ran: RIC CONTROL REQUEST

	ran-->near: RIC CONTROL FAILURE (Cause=Control timer expired)

else 5c) Time to wait timer Expires and Subsequent Action = __Halt__

	note over ran #aqua: Associated Time to Wait Timer expires

	note over ran #red: Associated procedure instance **halted**

	near-->ran: RIC CONTROL REQUEST

	ran-->near: RIC CONTROL FAILURE (Cause=Control timer expired)

end

@enduml

Figure 5.3.2.2.3-1: RIC Service INSERT with subsequent RIC Service CONTROL responses

5.3.2.4	CONTROL service

The CONTROL service involves following steps:

Near-RT RIC detects an event trigger. This step may be triggered by either:

a) a previous RIC INDICATION message sent by E2 Node

b) internal to Near-RT RIC

1.	Near-RT RIC performs an action.

2.	Near-RT RIC sends a RIC CONTROL REQUEST message to E2 Node. This message may contain information to identify the previously suspended procedure instance, and may request acknowledgement from the E2 Node. The Near-RT RIC shall set the timer TRICcontrol if either acknowledgement has been requested or the optional acknowledgement request was not present in the RIC CONTROL REQUEST message.

3.	The request is validated. The E2 Node cancels the associated Time to Wait timer if previously set, and initiates or resumes the associated procedure.

4.	E2 Node then:

i)	If the requested control service is successfully executed, and if acknowledgement was requested or if the optional RIC Control Ack Request was not present, the E2 Node sends the RIC CONTROL ACKNOWLEDGE message with the optional RIC Control Outcome providing information about the result of the request Control service.

ii)	If the requested control service fails to execute or the request is not validated, the E2 Node sends the RIC CONTROL FAILURE message with a cause indicating the reason for failure or rejection and the optional RIC Control outcome providing information about the reason for failure to execute.

5.	If previously set, the Near-RT RIC shall cancel the TRICcontrol timer

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

ran<->near: RIC Subscription procedure (RIC Event Trigger, Action=INSERT)

...

ran<-->near: RIC Subscription Modification procedure

...

note over ran #white: E2 Node detects \nRIC Event Trigger

note over ran #pink: Associated procedure \ninstance **suspended**

ran->near: RIC INDICATION(INSERT)

note over near #white: 1) Near-RT RIC \nperforms action

near->ran: 2) RIC CONTROL REQUEST

note over near: Set Timer RIC control

note over ran #white: 3) Check request Call Process ID \nand associated Time to Wait timer

alt A) Request with valid Call Process ID received __before__ associated Time to Wait timer expiry

	note over ran #white: check request validity

	alt a) Request is __accepted__

			note over ran #aqua: Cancel Wait Timer

			note over ran #lime: Associated procedure \ninstance **resumes**

		alt i) E2 Node __successfully executes__ requested control procedure and "ack" response requested

			ran-->near: 4 i) RIC CONTROL ACKNOWLEDGE

		else ii) E2 Node __fails to execute__ requested control procedure and "nack" response requested

			ran-->near: 4 ii) RIC CONTROL FAILURE (Cause = Failure to execute)

		end

	else b) Request is __rejected__

		ran-->near: 4 ii) RIC CONTROL FAILURE (Cause provides reason for rejection)

	end

else B) Request with valid Call Process ID received __after__ associated Time to Wait timer expiry

	note over ran #pink: Associated procedure instance \npreviously Halted or Continued

	ran->near: 4 ii) RIC CONTROL FAILURE (Cause = Control timer expired )

else C) Request received with __invalid__ Call Process ID

	ran->near: 4 ii) RIC CONTROL FAILURE (Cause = Call process ID invalid)

end

note over near: Clear Timer RIC control

@enduml

Figure 5.3.2.2.4-1: RIC Service CONTROL as response to RIC Service INSERT

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near #white: RIC internal event

note over near #white: Near-RT RIC detects \nevent trigger

note over near #white: 1) Near-RT RIC \nperforms action

near->ran: 2) RIC CONTROL REQUEST

note over near: Set Timer RIC control

note over ran #white: 3) Check request validity

alt a) Request is __accepted__

	note over ran #lime: Associated procedure \ninstance initiated

	alt i) E2 Node __successfully executes__ requested control procedure

		ran->near: 4 i) RIC CONTROL ACKNOWLEDGE

	else ii) E2 Node __fails to execute__ requested control procedure

		ran->near: 4 ii) RIC CONTROL FAILURE (Cause = Failure to execute)

	end

else b) Request is __rejected__

	ran-->near: 4 ii) RIC CONTROL FAILURE (Cause provides reason for rejection)

end

note over near: Clear Timer RIC control

@enduml

Figure 5.3.2.2.4-2: RIC Service CONTROL initiated by NEAR-RT RIC

5.3.2.5	POLICY service

The POLICY service involves following steps:

1.	Near-RT RIC configures, and subsequently may modify, a RIC Subscription in the E2 Node with information used to configure a POLICY that is to be performed by E2 Node with each occurrence of trigger event

2.	During normal functioning of the E2 Node, a trigger event is detected.

3. 	After completing any previous RIC actions, E2 Node modifies ongoing call process according to information contained in the POLICY description statement

4.	Associated procedure instance continues in the E2 Node, including any subsequent RIC actions.

Note that if previously configured with a dedicated RIC Subscription, the E2 Node may send a REPORT used to provide information on the associated procedure outcome.  See clause 5.3.2.2 for details.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

participant “Near-RT RIC” as near

participant “E2 Node” as ran

ran<-->near: RIC Subscription procedure (RIC Event Trigger, Action=REPORT)

ran<->near: 1) RIC Subscription procedure (RIC Event Trigger, Action=POLICY)

...

ran<-->near: 1a) RIC Subscription Modification procedure

...

note over ran #white: 2) E2 Node detects \nRIC Event Trigger

note over ran #white: 3) E2 Node modifies \nongoing process \naccording to policy

note over ran #lime: 4) Associated procedure \ninstance **continues**

ran-->near: RIC INDICATION (Report)

@enduml

Figure 5.3.2.2.5-1: RIC Service POLICY

5.3.2.5A	QUERY service

The QUERY service involves following steps:

1.	Near-RT RIC determines need for RAN and/or UE-related information from the E2 node.

2.	Near-RT RIC sends a RIC QUERY REQUEST message to E2 Node. This message contains the requested information that needs to be fetched from the E2 Node. The Near-RT RIC shall set the timer TRICquery awaiting response from the E2 node.

3.	E2 node performs validation and attempts to retrieve the requested information for the Near-RT RIC.

4.	E2 Node then:

a.	If the E2 node successfully validates and retrieves the requested information for the Near-RT RIC, then the E2 node sends the RIC QUERY RESPONSE message containing the desired information.

b.	If the E2 node fails to validate the request or fails to retrieve the requested information for the Near-RT RIC, then the E2 node sends the RIC QUERY FAILURE message along with the cause for failure.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 20

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near #white: 1) Near-RT RIC determines need for \nRAN- and/or UE-related information

near->ran: 2) RIC QUERY REQUEST

note over near : Start associated Timer

note over ran #white: 3) E2 node performs validation and attempts to retrieve the\n desired information

alt a) E2 Node __accepts request __

	note over ran #white: Validation of Request succeeds and\n Requested information is retrieved

	ran->near: 4 i) RIC QUERY RESPONSE

else b) E2 Node __rejects request __

	note over ran #white: Validation of Request fails or \nRequested information is unavailable

	ran->near: 4 ii) RIC QUERY FAILURE (with cause)

note over near : Clear associated Timer

end

@enduml

Figure 5.3.2.2.5A-1: RIC Service QUERY

5.3.2.6	RIC service realization and relationship with E2AP procedures

The RIC Services may be realized using the following RIC Functional procedures:

RIC Subscription procedure (Near-RT RIC initiated)

-	Used to install Event Trigger and associated sequence of Actions corresponding to one or more RIC services REPORT, INSERT and/or POLICY

RIC Subscription Modification procedure (Near-RT RIC initiated)

-	Used to modify Event Trigger and/or add, modify and/or remove associated sequence of Actions corresponding to one or more RIC services REPORT, INSERT and/or POLICY

RIC Subscription Modification Required procedure (E2 Node initiated)

-	Used to request modification and/or removal of associated sequence of Actions corresponding to one or more RIC services REPORT, INSERT and/or POLICY

RIC Subscription Delete procedure (Near-RT RIC initiated)

-	Used to delete previously installed RIC Subscription

RIC Subscription Delete Required procedure (E2 Node initiated)

-	Used to indicate that one or more previously installed RIC Subscriptions are required to be deleted

RIC Indication procedure (E2 Node initiated)

-	Used to carry outcome of RIC services REPORT and INSERT

RIC Control procedure (Near-RT RIC initiated)

-	Used to initiate RIC service CONTROL

RIC Query procedure (Near-RT RIC initiated)

Used to request RAN and/or UE related information from E2 Node

Table 5.3.2.6-1: Relationship between RIC Services and E2AP Procedures

E2AP Procedure

RIC Service

REPORT

INSERT

CONTROL

POLICY

QUERY

RIC Subscription

Installs one or more REPORT Services associated with a RIC Subscription

Installs one or more INSERT Services associated with a RIC Subscription

Installs one or more POLICY Services associated with a RIC Subscription

RIC Subscription Modification

Adds, Modifies and/or Removes one or more REPORT Services associated with a RIC Subscription

Adds, Modifies and/or Removes one or more INSERT Services associated with a RIC Subscription

Adds, Modifies and/or Removes one or more POLICY Services associated with a RIC Subscription

RIC Subscription Modification Required

Requests Modification and/or Removal of one or more REPORT Services associated with a RIC Subscription

Requests Modification and/or Removal of one or more INSERT Services associated with a RIC Subscription

Requests Modification and/or Removal of one or more POLICY Services associated with a RIC Subscription

RIC Subscription Delete

Deletes all REPORT Services associated with one or more RIC Subscriptions

Deletes all INSERT Services associated with one or more RIC Subscriptions

Deletes all POLICY Service associated with one or more RIC Subscriptions

RIC Subscription Delete Required

Requests Near-RT RIC to delete all REPORT Services associated with one or more RIC Subscriptions

Requests Near-RT RIC to delete all INSERT Services associated with one or more RIC Subscriptions

Requests Near-RT RIC to delete all POLICY Services associated with one or more RIC Subscriptions

RIC Indication

Carries outcome of REPORT Service

Carries outcome of INSERT Service

RIC Control

Initiates CONTROL Service

RIC Query

Initiates QUERY service

The RIC Subscription, RIC Subscription Modification, RIC Subscription Modification Required, RIC Subscription Delete, and RIC Subscription Delete Required procedures are used to establish, modify or delete RIC subscriptions on the E2 Node.

The RIC Subscription, RIC Subscription Modification and RIC Subscription Delete procedures are initiated by the Near-RT RIC (Figure 5.3.2.6-1). In addition, the E2 Node may initiate a RIC Subscription Delete Required procedure to request removal of one or more existing RIC Subscriptions (Figure 5.3.2.6-2) and a RIC Subscription Modification Required procedure to request the modification or removal of one or more existing RIC services within an existing RIC Subscription (Figure 5.3.2.6-3).

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near : Near-RT RIC determines \nto create a new RIC Subscription

near<->ran: RIC Subscription procedure \n (RIC Request ID, RAN Function ID, RIC Event Trigger, Action list)

...

note over near : Near-RT RIC may determine need \nto modify existing RIC Subscription

near<-->ran: RIC Subscription Modification procedure \n (RIC Request ID, RAN Function ID, RIC Event Trigger, Actions to be removed list, \n Actions to be modified list, Actions to be added list)

...

note over ran #white: E2 Node detects \nRIC Event Trigger

Loop For each Action in Action List

  note over ran #white: E2 Node executes action

  ran-->near: RIC Indication procedure (RIC Request ID, RAN Function ID, contents)

  near<-->ran: RIC Control procedure

end

...

note over near: Near-RT RIC determines \nto delete an existing RIC Subscription

near<->ran: RIC Subscription Delete procedure (RIC Request ID, RAN Function ID)

@enduml

Figure 5.3.2.6-1: RIC Subscription, RIC Subscription Modification and RIC Subscription Delete procedures

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

participant “Near-RT RIC” as near

participant “E2 Node” as ran

near<->ran: RIC Subscription procedure \n(RIC Request ID, RAN Function ID#1, RIC Event Trigger, Action list)

...

...

near<-->ran: RIC Subscription procedure \n (RIC Request ID#n, RAN Function ID, RIC Event Trigger, Action list,...)

note over ran : E2 Node needs to remove\n one or more RIC Subscriptions

ran->near: RIC Subscription Delete Required (List of RIC Request ID, RAN Function ID)

Loop For each RIC Subscription in the List

  note over near: Near-RT RIC determines, if required, \nRIC Subscription removal is acceptable

  near<->ran: RIC Subscription Delete procedure (RIC Request ID, RAN Function ID)

end

@enduml

Figure 5.3.2.6-2: RIC Subscription Delete Required and RIC Subscription Delete procedures

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

participant “Near-RT RIC” as near

participant “E2 Node” as ran

near<->ran: RIC Subscription procedure \n (RIC Request ID, RAN Function ID, RIC Event Trigger, Action list)

...

note over ran : E2 Node determines needs to modify and/or remove\n one or more RIC actions in an existing RIC Subscription

ran<->near: RIC Subscription Modification Required procedure\n (RIC Request ID, RAN Function ID, Actions required to be modified list, \n Actions required to be removed list)

@enduml

Figure 5.3.2.6-3: RIC Subscription Modification Required procedure

5.3.3	Combining RIC services within a common Subscription

RIC services defined in 5.3.2 may be combined within a common Subscription with each RIC Service implemented as part of a sequence of Actions.

Where appropriate in these cases, successive REPORT or INSERT messages sent to Near-RT RIC under the same subscription event trigger would contain the same assigned Subscription Request identifier, the same optional sequence number and each message with the unique assigned Action identifier.

Examples include:

-	POLICY then REPORT.  In this case, at each occurrence of the defined Event Trigger, the E2 Node would be instructed to first execute a defined POLICY and then send a defined REPORT message

-	REPORT then REPORT.  In this case, at each occurrence of the defined Event Trigger, the E2 Node would be instructed to first send a defined REPORT message to be followed by a second defined REPORT message containing normally different information.

When more than one RIC service action has been accepted by the E2 Node then actions shall be executed as specified in E2AP [2].

5.3.4	Combining RIC services as a sequence of RIC services

RIC services defined in 5.3.2 may be combined using a sequence of different RIC services implemented using a procedure executed within the Near-RT RIC.

Examples include:

-	REPORT followed by POLICY.  In this case, at each occurrence of the defined Event Trigger, the E2 Node would be instructed to send a defined REPORT message.  The Near-RT RIC would use the information from one or more successive REPORT messages as input to a procedure that may result in a change or establishment of a RIC POLICY service.

-	INSERT followed by CONTROL. In this case, at each occurrence of the defined Event Trigger, the E2 Node would be instructed to send a defined INSERT message containing information used to identify the suspended associated procedure instance and then the Near-RT RIC would send a corresponding CONTROL message containing information used to identify a previous suspended associated procedure instance.

-	REPORT followed by CONTROL. In this case, at each occurrence of the defined Event Trigger, the E2 Node would be instructed to send a defined REPORT message.  The Near-RT RIC would use the information from one or more successive REPORT messages as input to a procedure that may result in a RIC CONTROL service message being sent to initiate an associated procedure instance in the E2 Node.

5.4	RAN Function E2 Service Model

As described in clause 5.1 the E2 interface is used to carry messages between a given E2 Node and Near-RT RIC. These messages may contain RAN Function specific content which is described in the corresponding RAN Function specific E2 Service Model.

Each RAN Function is described in the following terms:

-	RAN Function Definition. Defines the RAN Function Name and describes the RIC Services that the specific RAN Function is currently configured to present over the E2 interface.

-	RIC Event Trigger Definition approach. Describes the approach to be used in RIC Subscription and RIC Subscription Modification procedures to set or modify the RIC Event Trigger Definition in the RAN Function for RIC Services REPORT, INSERT and/or POLICY.

												-	RIC Action Definition approach.  Describes the approach to be used in RIC Subscription and RIC Subscription Modification procedures to set or modify the required sequence of RIC Action in the RAN Function for RIC Services REPORT, INSERT and/or POLICY.

												-	RIC Indication Header and RIC Indication message approach.  Describes the approach to be used in RIC Indication procedure for RIC Services REPORT and INSERT.

												-	RIC Control Header and RIC Control message approach.  Describes the approach to be used in RIC Control procedure for RIC Service CONTROL.

												-	RIC Call Process ID approach. Describes the approach to be used by the E2 node in RIC Indication procedure for RIC Service INSERT. The same IE is used in the subsequent RIC Control procedure for RIC Service CONTROL.

												-	RIC Control Outcome approach. Describes the approach to be used by the E2 node in RIC Control procedure for RIC service CONTROL.

												-	RAN Function Policies. Describes the set of policies that the RAN Function is configured to support and the corresponding Parameters that may be used to configure the policy using RIC Service POLICY.

												-	RIC Query Header and RIC Query Definition approach. Describes the approach to be used by the Near-RT RIC in RIC Query procedure for RIC Service QUERY.

												-	RIC Query Outcome approach. Describes the approach to be used by the E2 node in RIC Query procedure for RIC Service QUERY.

5.5	E2 support services

5.5.1	General

The E2 support services are supported by the following global procedures:

-	E2 Setup

-	E2 Reset

-	RIC Service Update

-	E2 Node Configuration Update

-	E2 Removal

-	Reporting of General Error Situations

The E2 Setup, E2 Reset, RIC Service Update, E2 Node Configuration Update and E2 Removal procedures are described in further details in the following clauses.

5.5.2	E2 Setup procedure

The E2 Setup procedure is used to establish the E2 interface between the Near-RT RIC and an E2 Node.  During this procedure the E2 Node provides:

-	List of supported RIC services and mapping of services to functions within the E2 Node. This information is specific to each RAN Function in the E2 node and is defined by a specific E2 Service Model as described in clause 5.4

-	List of E2 Node configuration information.  This information is specific to the E2 Node type (see clause 4.2) and defined by the E2 Node system specifications

If the E2 Setup procedure fails, the Near-RT RIC may provide an alternative Transport Layer Information for the E2 Node to use when reinitiating the E2 Setup procedure.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over ran #white

E2 Node preconfigured with

Near-RT RIC address

and RIC service information

and E2 node configuration

end note

ran<-->near: SCTP connection establishment

ran->near: E2 SETUP REQUEST \n(RIC service and E2 Node configuration information)

note over near #white

Near-RT RIC extracts list of

supported RIC Services

and mapping of services to

functions and stores information

end note

note over near #white

Near-RT RIC extracts list of

E2 Node configuration

information and stores information

end note

ran<-near: E2 SETUP RESPONSE \n(RIC Service and E2 Node configuration Ack)

@enduml

Figure 5.5.2-1: E2 Setup procedure

5.5.3	E2 Reset procedure

The E2 Reset procedure is used by either the E2 Node or Near-RT RIC to reset the E2 interface.

Information previous exchanged during E2 Setup, E2 Node Configuration Update and RIC Service Update procedures shall be maintained however the outcome of all previous RIC Subscription shall be deleted from the E2 Node and E2 Node gracefully terminates any ongoing RIC Services.

The Near-RT RIC may then proceed to re-establish any RIC Subscriptions as required.

@startuml

skin rose

skinparam ParticipantPadding 100

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over ran #white

E2 Node detects abnormal failure

end note

ran->near: RESET REQUEST (Cause)

note over near #white

Near-RT RIC informs xApps of

RESET from E2 Node

end note

note over ran #white

E2 Node deletes any

pre-established RIC

Subscriptions

end note

note over ran #white

E2 Node gracefully

terminates any ongoing

RIC Services

end note

ran<-near: RESET RESPONSE

note over near #white

Near-RT RIC may re-establish

RIC Subscriptions

end note

@enduml

Figure 5.5.3-1: E2 Reset procedure (E2 Node initiated)

@startuml

skin rose

skinparam ParticipantPadding 100

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near #white

Near-RT RIC detects abnormal failure

end note

ran<-near: RESET REQUEST (Cause)

note over ran #white

E2 Node deletes any

pre-established RIC

Subscriptions

end note

note over ran #white

E2 Node gracefully

terminates any ongoing

RIC Services

end note

ran->near: RESET RESPONSE

note over near #white

Near-RT RIC informs xApps of

RESET from E2 Node

end note

note over near #white

Near-RT RIC may re-establish

RIC Subscriptions

end note

@enduml

Figure 5.5.3-2: E2 Reset procedure (Near-RT RIC initiated)

5.5.4	RIC Service Update procedure

The RIC Service Update procedure is used by the E2 Node to inform the Near-RT RIC of any change to the list of supported RIC services and mapping of services to functions within the E2 Node. This information is specific to each RAN Function in the E2 node and is defined by a specific E2 Service Model as described in clause 5.4

This procedure may also be initiated by the Near-RT RIC sending a RIC SERVICE QUERY message.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near #white: Near-RT RIC decides to query E2 Node

near-->ran: RIC SERVICE QUERY

note over ran #white: Change to RIC service configuration on E2 Node

ran->near: RIC SERVICE UPDATE (RIC service information)

note over near #white: Near-RT RIC extracts list of changes \nto supported RIC Services including \nmapping of services to functions and \nupdates stored information

ran<-near: RIC SERVICE UPDATE ACKNOWLEDGE (RIC Service Ack)

@enduml

Figure 5.5.4-1: RIC Service update procedure

5.5.5	E2 Node Configuration Update procedure

The E2 Node Configuration Update procedure is used by the E2 Node to inform the Near-RT RIC of any change to the configuration of the E2 Node and/or E2 Node initiated changes to TNL Associations associated with the E2 interface.  This information is specific to the E2 Node type and defined by the E2 Node system specifications as described in clause 4.2.

See clause 6.2 for further details on E2 Node Configuration Update procedure usage for E2 Node initiated changes to TNL Associations associated with the E2 interface.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over ran #white: Change to E2 node system configuration

ran->near: E2 NODE CONFIGURATION UPDATE \n(E2 node configuration information)

note over near #white: Near-RT RIC extracts list of changes \nto E2 Node configuration information \nand updates stored information

ran<-near: E2 NODE CONFIGURATION UPDATE ACKNOWLEDGE \n(E2 node configuration ack)

@enduml

Figure 5.5.5-1: E2 Node configuration update procedure

5.5.6	E2 Removal procedure

The E2 Removal procedure is used by either the E2 Node or Near-RT RIC to release the E2 signaling connection.

If the procedure is E2 node initiated, after the E2 REMOVAL RESPONSE is received, the E2 node initiates termination of all TNL associations associated with this E2 interface. The Near-RT RIC and E2 nodes releases all resources associated with this E2 interface. If the E2 Removal procedure fails, the E2 node may retry the E2 Removal procedure.

If the procedure is Near-RT RIC initiated, after the E2 REMOVAL RESPONSE is received, the Near-RT RIC initiates termination of all TNL associations associated with this E2 interface. The Near-RT RIC and E2 nodes releases all resources associated with this E2 interface. If the E2 Removal procedure fails, the Near-RT RIC may retry the E2 Removal procedure.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over ran #white: E2 Node decides to release \nE2 interface

near<-ran: E2 REMOVAL REQUEST

near->ran: E2 REMOVAL RESPONSE

ran<-->near: SCTP connection termination

note over near #white: Remove all resources associated \nwith the E2 interface

note over ran #white: Remove all resources associated \nwith the E2 interface

@enduml

Figure 5.5.6-1: E2 Removal procedure (E2 Node initiated)

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near #white: Near-RT RIC decides to \nrelease E2 interface

ran<-near: E2 REMOVAL REQUEST

ran->near: E2 REMOVAL RESPONSE

ran<-->near: SCTP connection termination

note over near #white: Remove all resources associated \nwith the E2 interface

note over ran #white: Remove all resources associated \nwith the E2 interface

@enduml

Figure 5.5.6-2: E2 Removal procedure (Near-RT RIC initiated)

6	E2 interface signalling

6.1	E2 Control Plane Protocol (E2AP)

The control plane protocol stack of the E2AP interface is shown on Figure 6.1-1.

The transport network layer is built on IP transport. For the reliable transport of signaling messages, IETF RFC 4960 [12] is added on top of IP.

When configurations with multiple SCTP associations are supported, the Near-RT RIC may request to dynamically add/remove SCTP associations between the E2 Node/Near-RT RIC pair. Within the set of SCTP associations established between one Near-RT RIC and E2 node pair, the Near-RT RIC may request the E2 Node to restrict the usage of SCTP association for certain types of E2 signaling. If no restriction information is provided for an SCTP association, any type of E2 signaling is allowed via the SCTP association.

The application layer signaling protocol is referred to as E2AP (E2 Application Protocol). The Payload Protocol Identifier assigned by IANA to be used by SCTP for the application layer protocol E2AP is 70. This value is to be used for all deployment configurations described in this specification. Payload Protocol Identifiers 71 and 72, also assigned by IANA for E2, are reserved for future use.

No SCTP Destination Port number value was assigned by IANA for the E2AP protocol and so networks shall rely on E2 node and Near-RT RIC configuration to select a suitable port number.

NOTE 1: E2AP messages are transported over the E2 interfaces.

Figure 6.1-1: E2AP protocol stack

6.2	Multiple TNLAs over E2

The Near-RT RIC and E2 Node supports multiple TNL associations over E2 interface.

An initial TNL association is established during E2 Setup procedure with E2 Node initiating SCTP connection.  At this point the single TNL association is configured to be used for both RIC Services (clause 5.3) and E2 Support functions (clause 5.5).

TNL associations may then be added, modified or removed during subsequent E2 Connection Update and E2 Node Configuration Update procedures with E2 Node initiating SCTP connections where required.

When the Near-RT RIC requests to dynamically add additional SCTP associations between the Near-RT RIC/E2 Node pair, the Near-RT RIC sends additional SCTP endpoints using the E2 Connection Update procedure. The E2 Node shall establish the SCTP associations. The SCTP Destination Port number value may be the same port number used for the initial E2 Setup procedure, or any dynamic port value (IETF RFC 6335 [23]).

Within the set of SCTP associations established between one Near-RT RIC and E2 node pair, a single SCTP association shall be employed for E2AP elementary procedures utilized for E2 Support Function signaling (i.e. defined in E2AP [2] clause 8.3) with the possibility of fail-over to a new association to enable robustness.

When the configuration with multiple SCTP endpoints per E2 node is supported and E2 node wants to add an additional SCTP association, the E2 Node Configuration Update procedure shall be the first E2AP procedure triggered on an additional TNLA of an already setup E2 interface after the TNL association has become operational. The E2 Node uses a SCTP endpoint of the Near-RT RIC already in use for existing TNL associations between the Near-RT RIC/E2 Node pair when establishing the additional SCTP association, and the Near-RT RIC shall associate the TNLA to the E2 interface using the included Global E2 Node ID. The E2 Node uses the E2 Node Configuration Update procedure when it wants to remove additional SCTP association.

The RIC Subscription TNLA binding is a binding between a specific TNL association and RIC Service signaling (i.e. defined in E2AP [2] clause 8.2) of a specific RIC Subscription. After the RIC Subscription TNLA binding is created, the Near-RT RIC can update the RIC Subscription TNLA binding by sending the E2AP message for the RIC Subscription to the E2 Node via a different TNLA. The E2 Node shall update the RIC Subscription TNLA binding with the new TNLA. The E2 Configuration Update procedure also allows the E2 Node to inform the Near-RT RIC that the indicated TNLA(s) will be removed by the E2 Node.

Between one Near-RT RIC and E2 Node pair:

-	A single pair of stream identifiers shall be reserved over an SCTP association for the sole use of E2AP elementary procedures utilized for E2 Support Function signaling (i.e. defined in E2AP [2] clause 8.3).

-	At least one pair of stream identifiers over one or several SCTP associations shall be reserved for the sole use of E2AP elementary procedures utilized for RIC Service signaling (i.e. defined in E2AP [2] clause 8.2). However, a few pairs (i.e. more than one) should be reserved.

-	For any RIC service signaling (i.e. defined in E2AP [2] clause 8.2) of a single RIC Subscription, the E2 Node shall use one SCTP association and one SCTP stream, and the SCTP association/stream should not be changed until after the current SCTP association is failed, or the RIC Subscription TNLA binding update is performed.

Transport network redundancy may be achieved by SCTP multi-homing between two end-points, of which one or both is assigned with multiple IP addresses. SCTP end-points shall support a multi-homed remote SCTP end-point. For SCTP endpoint redundancy an INIT may be sent from a Near-RT RIC or E2 Node, at any time for an already established SCTP association, which shall be handled as defined in IETF RFC 4960 [12] in sub clause 5.2.

The SCTP congestion control may, using an implementation specific mechanism, initiate higher layer protocols to reduce the signaling traffic at the source and prioritize certain messages.

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over ran #white

E2 Node obtains Near-RT RIC

IP address and Port number

end note

ran-->near : SCTP INIT

ran<-->near : SCTP connection (TNLA1)

ran->near: E2 SETUP REQUEST

near->ran: E2 SETUP RESPONSE

note over near, ran #yellow: E2 interface using TNLA1

...

near->ran: E2 CONNECTION UPDATE (TNLA2 addition)

ran-->near : SCTP INIT

ran<-->near : SCTP connection (TNLA2)

ran->near: E2 CONNECTION UPDATE ACKNOWLEDGE (Status TNLA1, TNLA2)

note over near, ran #yellow: E2 interface using TNLA1 and TNLA2

@enduml

Figure 6.2-1: TNL management examples (E2 Setup and Near-RT RIC initiated TNL Addition)

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near, ran #yellow: E2 interface using TNLA1 and TNLA2

...

near->ran: E2 CONNECTION UPDATE (TNLA1 and TNLA2 modification)

note over ran #white: Modify usage assignments \nfor TNLA1 and TNLA2

ran->near: E2 CONNECTION UPDATE ACKNOWLEDGE (Status TNLA1, TNLA2)

note over near, ran #yellow: E2 interface using TNLA1 and TNLA2 with modified usage

...

near->ran: E2 CONNECTION UPDATE (TNLA1 removal)

ran<-->near : SCTP connection removal (TNLA1)

ran->near: E2 CONNECTION UPDATE ACKNOWLEDGE (Status TNLA2)

note over near, ran #yellow: E2 interface using TNLA2

@enduml

Figure 6.2-2: TNL management examples (Near-RT RIC initiated TNL Modification and TNL Removal)

@startuml

skin rose

skinparam ParticipantPadding 5

skinparam BoxPadding 10

skinparam lifelineStrategy solid

participant “Near-RT RIC” as near

participant “E2 Node” as ran

note over near, ran #yellow: E2 interface using TNLA1

note over ran #white

E2 Node decides to add TNLA2

end note

ran-->near : SCTP INIT

ran<-->near : SCTP connection (TNLA2)

ran->near: E2 NODE CONFIGURATION UPDATE (Global E2 Node ID)

note over near #white: Near-RT RIC binds SCTP connection to E2 Node

near->ran: E2 NODE CONFIGURATION UPDATE ACKNOWLEDGE

note over near, ran #yellow: E2 interface using TNLA1 and TNLA2

...

ran->near: E2 NODE CONFIGURATION UPDATE (Remove TNLA1)

near->ran: E2 NODE CONFIGURATION UPDATE ACKNOWLEDGE

ran<-->near : SCTP connection removal (TNLA1)

note over near, ran #yellow: E2 interface using TNLA2

@enduml

Figure 6.2-3: TNL management examples (E2 Node initiated TNL Addition and TNL Removal)

7	Security for the E2 interface

7.1	General

The security requirements given in this clause only apply to the E2 interface.

7.2	Requirements for the E2 interfaces

The requirements given below apply to E2 interface defined in this document:

-	E2 interface shall support confidentiality, integrity, replay protection and data origin authentication.

7.3	Security mechanism for the E2 interface

In order to protect the traffic on the E2 interface, IPsec ESP implementation shall be supported according to RFC 4303 [20] as profiled by TS 33.210 [21]. For IPsec implementation, tunnel mode is mandatory to support while transport mode is optional. The multiple IKE Security Associations (SAs), multiple IPsec SAs and multiple IPsec SAs per IPsec tunnel (e.g. for rekeying) shall be supported.

IKEv2 certificate-based authentication implementation shall be supported according to TS 33.310 [22]. The certificates shall be supported according to the profile described by TS 33.310 [22]. IKEv2 shall be supported conforming to the IKEv2 profile described in TS 33.310 [22].

8	Other E2 interface specifications

8.1	O-RAN E2 interface: E2 Application Protocol (E2AP) (ORAN-WG3.E2AP)

The technical specification ORAN.WG3.E2AP [2] specifies the signaling protocol between the Near-RT RIC and the E2 Node over the E2 interface.

8.2	O-RAN E2 interface: E2 Service Model (E2SM) specifications

The technical specification ORAN.WG3.E2SM [17] provides the list of the supported RAN Function-specific E2 Service Models supported over the E2 interface and presents a recommended layout for additional E2SM specifications.

Annex A (normative): Deployment considerations

A.1	Deployment use cases

The Near-RT RIC may be connected to range of different E2 Node configurations as described in the list implementation options in Annex A.4 of [18] .  Examples include:

-	Standalone O-CU-CP connected to one or more standalone O-CU-UP and one or more standalone O-DU.  Each logical node is considered as an E2 Node that presents an E2 interface to the Near-RT RIC.

-	Combined O-CU-CP and O-CU-UP connected to one or more standalone O-DU. The combined O-CU-CP/O-CU-UP may present either a common E2 interface or individual E2 interfaces corresponding to the individual O-RAN components

-	Combined O-CU-CP, O-CU-UP and O-DU.  The combined node may present either a common E2 interface or individual E2 interfaces corresponding to the individual O-RAN components

In all cases the different RAN components may initiate either independent E2 connections to the Near-RT RIC for each logical O-RAN component or may present a shared E2 interface and hence present the combined RAN components as a common E2 Node supporting services appropriate to more than one logical O-RAN component.

In all cases each E2 Node shall present a single E2 interface to the Near-RT RIC and shall announce which E2 Services supports for each logical O-RAN component.

Example deployment use case are presented in figure A.1-1 and figure A.1-2.

Figure A.1-1: Example deployment use case with single E2 Node supporting both O-CU-CP and O-CU-UP roles

Figure A.1-2: Example deployment use case with single E2 Node supporting O-CU-CP, O-CU-UP and O-DU roles

Annex (informative): Change History

Date

Revision

Description

2023.05.15

V03.01.01

CR <NOK-2023.04.28-WG3-CR-0011-E2GAP-Correction to clause 2.1-v01> approved WG3#183

CR <NOK.AO-2023.05.17-WG3-CR-0012-E2GAP-fig4.2-1-v02> approved WG3#185

2023.06.27

V03.01.02

CR < NOK.AO-2023.06.19-WG3-CR-0014-E2GAP-figA.1-v02> approved F2F Osaka

2023.07.19

V03.01.03

CR <NOK-2023.07.17-WG3-CR-0015-E2GAP-Ref24 removal-v03> approved WG3#191

2023.07.26

V03.01.04

Editorial changes based on comments received during WG3 poll.

2023.07.27

V03.01.05

Editorial changes to align to O-RAN TS template v01.01

2023.09.27

V04.01

CR <NOK-2023.09.25-WG3-CR-0014-E2GAP-Clause5.4heading-v01> approved WG3#200 as a pre-publication correction to v04.00

Annex (informative): History

Date

Revision

Description

2021.08.10

V02.00

TSC approved

2022.02.07

V02.01

Version ready for Nov 21 train

2022.06.29

V02.02

Version ready for March 22 train

2022.11.21

V03.00

Version ready for Nov 22 train

2023.03.24

V03.01

Version ready for March 23 train

2023.07.28

V04.00

Version ready for July 23 train

2023.09.27

V04.01

Corrected version ready for July23 train publication

	© 2023 by the O-RAN ALLIANCE e.V. Your use is subject to the copyright statement on the cover page of this specification.	52