Contents
List of Figures
Figure 4.1-1: Decoupling and Illustration of the O-Cloud Concept	8
Figure 4.1-2: The overview of O-Cloud test	8
Figure 5.2-1: Configuration of O-Cloud Notification API test	10
List of tables
Table A.2-1: O-Cloud IOT and corresponding Interfaces/APIs, DUTs and DUTs	31
Table A.3-1: O-Cloud IOT and corresponding Interfaces/APIs, DUTs and DUTs	32
Foreword
This Technical Specification (TS) has been produced by O-RAN Alliance.
Modal verbs terminology
In the present document "shall", "shall not", "should", "should not", "may", "need not", "will", "will not", "can" and "cannot" are to be interpreted as described in clause 3.2 of the O-RAN Drafting Rules (Verbal forms for the expression of provisions).
"must" and "must not" are NOT allowed in O-RAN deliverables except when used in direct citation.
Introduction
This document specifies the O-Cloud test specification to guide O-Cloud products conforming to the O-RAN standard, including the Notification API, AAL, O2 and Synchronization.
Scope
The contents of the present document are subject to continuing work within O-RAN and may change following formal O-RAN approval. Should the O-RAN Alliance modify the contents of the present document, it will be re-released by O-RAN with an identifying change of version date and an increase in version number as follows:
version xx.yy.zz
where:
xx:	the first digit-group is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc. (the initial approved document will have xx=01).  Always 2 digits with leading zero if needed.
yy:	the second digit-group is incremented when editorial only changes have been incorporated in the document. Always 2 digits with leading zero if needed.
zz:	the third digit-group included only in working versions of the document indicating incremental changes during the editing process. External versions never include the third digit-group.  Always 2 digits with leading zero if needed.
The present document specifies a test specification for test and validation of the O-Cloud.  This document will specify the testing methodology and test cases, for O-Cloud entities including Notification API, AAL, O2 and Synchronization.
References
Normative references
References are either specific (identified by date of publication and/or edition number or version number) or non-specific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies.
NOTE:	While any hyperlinks included in this clause were valid at the time of publication, O-RAN cannot guarantee their long-term validity.
The following referenced documents are necessary for the application of the present document.
O-RAN.WG6.ORCH-USE-CASES: “Cloudification and Orchestration Use Cases and Requirements for O-RAN Virtualized RAN”.
O-RAN.WG6.O-Cloud Notification API-v02.01: “O-Cloud Notification API Specification for Event Consumers”.
O-RAN. WG4.CUS.0-v08.00: “O-RAN Working Group 4 (Open Fronthaul Interfaces WG) Control, User and Synchronization Plane Specification”.
O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE-v04.00: "O-RAN Working Group 6; O2dms Interface Specification: Profile based on ETSI NFV Protocol and Data Models"
ETSI GS NFV-SOL 003 V4.3.1: "Network Functions Virtualisation (NFV) Release 4; Protocols and Data Models; RESTful protocols specification for the Or-Vnfm Reference Point".
ETSI GS NFV-TST 010 V4.3.1: “Network Functions Virtualisation (NFV) Release 4; Testing; API Conformance Testing Specification”
O-RAN.WG6.O2IMS-INTERFACE: “O-RAN Working Group 6 O2ims Interface Specification”
NFV API Conformance Test Specification: https://forge.etsi.org/rep/nfv/api-tests/-/wikis/NFV-API-Conformance-Test-Specification
Informative references
References are either specific (identified by date of publication and/or edition number or version number) or non-specific. For specific references, only the cited version applies. For non-specific references, the latest version of the referenced document (including any amendments) applies.
NOTE:	While any hyperlinks included in this clause were valid at the time of publication, O-RAN cannot guarantee their long-term validity.
The following referenced documents are not necessary for the application of the present document, but they assist the user with regard to a particular subject area.
3GPP TR 21.905, Vocabulary for 3GPP Specifications.
O-RAN.WG6 CAD: “Cloud Architecture and Deployment Scenarios for O-RAN Virtualized RAN”.
Definition of terms, symbols and abbreviations
Terms
For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [i.1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [i.1].
O-Cloud                   This refers to a collection of O-Cloud Resource Pools at one or more location and the software to manage Nodes and Deployments hosted on them.  An O-Cloud will include functionality to support both Deployment-plane and Management services. The O-Cloud provides a single logical reference point for all O-Cloud Resource Pools within the O-Cloud boundary.
O-CU                         O-RAN Centralized Unit – a logical node hosting PDCP, RRC, SDAP and other control
functions.
O-DU                    	O-RAN Distributed Unit–a logical node hosting RLC/MAC/High-PHY layers based on a lower layer functional split.
O-RU                        O-RAN Radio Unit–a logical node hosting Low-PHY layer and RF processing based on a lower layer functional split.  This is similar to 3GPP’s “TRP” or “RRH”, but more specific in including the Low-PHY layer (FFT/iFFT, PRACH extraction).
Abbreviations
For the purposes of this document, the abbreviations given in 3GPP TR 21.905 [i.1] and the following apply.
An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [i.1].
3GPP	Third Generation Partnership Project
AAL	Acceleration Abstraction Layer
API	Application Programming Interface
CNF	Cloud-Native Network Function
CNI	Container Networking Interface
CPU	Central Processing Unit
CU	Centralized Unit as defined by 3GPP
DPDK	Data Plan Development Kit
DU	Distributed Unit as defined by 3GPP
EC	Event Producer
EP	Event Consumer
FFT	Fast Fourier Transform
HW	Hardware
IMS	Infrastructure Management Services
IRQ	Interrupt ReQuest
NF	Network Function
NFVI	Network Function Virtualization Infrastructure
NUMA	Non-Uniform Memory Access
O-Cloud	O-RAN Cloud Platform
O-CU	O-RAN Centralized Unit
O-DU	O-RAN Distributed Unit
O-RU	O-RAN Radio Unit
OS	Operating System
PTP	Precision Time Protocol
RAN	Radio Access Network
RIC	RAN Intelligent Controller
SMO	Service Management and Orchestration
SR-IOV	Single Root Input/ Output Virtualization
SUT	System Under Test
TS	Technical Specification
vCPU	Virtual CPU
VM	Virtual Machine
VNF	Virtualized Network Function
WG	Working Group
Testing methodology
System under test
Figure 4.1-1: Decoupling and Illustration of the O-Cloud Concept
SUT refers to the O-Cloud platform, which includes O-Cloud defined in [i.2] except hardware part. The main architecture components for the O-Cloud platform software can be found in Figure 4.1-2.
Figure 4.1-2: The overview of O-Cloud test
For the Cloud platform, different technologies may be used by cloud vendors, as [i.2] says, such as:
VMs only,
Containers only,
Containers in VMs,
both VMs and Containers, OR
other new technologies
so, the O-Cloud should be tested exactly based on the technology used.
Cases applied to each technology are listed in the Annex A.
SUT is identified by an implementation of the function under test producing or consuming the API Under Test (AUT) e.g. in the case of the O2DMS interface the function under test is O-Cloud implementation.
The function is tested in isolation with respect to SMO, O-RAN Network Functions and O-Cloud, to guarantee that the outcomes of the conformance tests are not result of interoperability issues with other components.
Test method
Testing procedure
The SUT and the test tool are set up and connected to the device in strict accordance with the preset conditions of each test case in the specification, and the test steps in the test case are performed step by step. Tester should record in detail the important test information during and after the test and compare and analyze with the expected results. Each test case is independent of each other.
Statistics and analysis of key indicators
The test is performed based on the preset conditions and procedure in the test case. The expected test result is used as the standard to determine whether the test succeeds. If the test result is consistent with the expected result, the test is regarded as passing. Tester may record test result, such as throughput, latency, and device volume.
O-Cloud Notification API Test
General
O-Cloud provides a Notification Framework; it acts as the event producer and exposes APIs to event consumers. The APIs enable the consumers to subscribe event notifications, delete subscriptions, get a list of subscriptions and detail of a subscription, notification to event consumers by pull or push mode.
Event consumers can be applications (e.g. O-DU).
Refer to O-RAN.WG6.O-Cloud Notification API [2], this section describes the test cases for O-Cloud Notification APIs.
Test Configuration
System Under Test requirements
The SUT for the O-Cloud Notification API is the O-Cloud, which provides an O-Cloud notification event producer(EP). This allows Event consumers (EC, such as O-DU or CNF) to subscribe event notifications, delete subscriptions, get a list of subscriptions or detail of a subscription, and receive events/status from cloud infrastructures. Notification to event consumers by pull or push mode.
The test functions are the tools which simulate the workloads (applications running in the cloud) or other entities out of the cloud interested in the events.
Figure 5.2-1: Configuration of O-Cloud Notification API test
Test Tools and Simulators capabilities
A summary of the recommended testing tools and simulators for functional testing is shown as following.
Postman: Postman is an interface testing tool. Postman is equivalent to a client, which can simulate various HTTP requests initiated by users, send the request data to the server, and obtain the corresponding response results, so as to verify whether the result data in the response matches the expected value. It is mainly used to simulate various HTTP requests (e.g. Get/POST/delete/put). The difference between Postman and browsers is that some browsers can't output Json format, while Postman is more intuitive about the results returned by the interface. In the following test, Postman act as the event consumer, and it can also be configured to received notification from the event producer.
Curl: Curl is a command-line tool for transferring data specified with URL syntax.  It can be used as the event consumer.
HTTPie: HTTPie is a command-line HTTP client with an intuitive interface, support for JSON, syntax highlighting, download functionality (like wGET), plugin support, and more. HTTPie consists of a simple HTTP command that is easy to debug and interact with HTTP servers, RESTful apis, and Web Services. It can be used as the event consumer.
Test cases
Create a subscription resource
Test Purpose
The purpose of this test case is to verify the capability to create a subscription for event notifications.
This test case is conditional, if the SUT (O-Cloud) claims to support O-Cloud Notification API, it shall support at least pull mode notification or push mode; for push mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification Create subscription request.
The Test Simulator has the functionality to initiate Create subscription request.
Initial conditions
The simulator (acting as a workload) has started.
The SUT (O-Cloud) has the Notification service ready and available to receive subscription request from the Test Simulator.
Procedure
Step 1. Send an HTTP2 POST request from Test Simulator to SUT with the correct URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 4.1.2 containing the JSON format Subscriptioninfo as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 7.1.1.1 as the message body. The message shall include an event notification request, endpointUri and ResourceAddress.
Step 2. At the Test Simulator the received HTTP2 response is recorded.
Expected Results
The test is considered passed if
The return code is “201 OK”, with Response message body content that contains a Subscriptioninfo, when the subscription request is correct and processed by the EP.
The return code is “400 Bad request”, without message body, when the subscription request is not correct.
The return code is “404 Not found”, without message body, when the subscription resource is not available.
The return code is “409 Conflict”, without message body, when the subscription resource already exists.
Get a list of subscription resources
Test Purpose
The purpose of this test case is to verify the capability to query the list of subscriptions for event notifications from event consumers.
This test case is conditional: if the SUT (O-Cloud) claims to support O-Cloud Notification API, it shall support at least pull mode notification or push mode; for push mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification subscription resources create and query requests.
The Test Simulator has the functionality to initiate Query subscription resources request.
Initial conditions
The simulator (acting as a workload has started.
The SUT (O-Cloud) has the Notification service ready and available to receive subscription resources query request from the Test Simulator.
Procedure
Step 1. Send an HTTP2 GET request from Test Simulator to SUT with the correct URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 4.1.2.
Step 2. At the Test Simulator the received HTTP2 response is recorded.
Expected Results
The test is considered passed if
The return code is “200 OK”, with Response message body content containing an array of Subscriptioninfo.
The return code is “400 Bad request”, without message body, when the query request is not correct.
Get Detail of individual subscription resource
Test Purpose
The purpose of this test case is to verify the capability to query the detail of a subscription from event consumers.
This test case is mandatory if the SUT (O-Cloud) claims to support O-Cloud Notification API, it shall support at least pull mode notification or push mode; for push mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification subscription resources create (Chapter 7.3) and query request, and supports query to an individual subscription resource.
The Test Simulator has the functionality to initiate subscription query request.
Initial conditions
The simulator (acting as a workload) has started.
The SUT (O-Cloud) has the Notification service ready and available to receive query request from the Test Simulator.
Procedure
Step 1. Send an HTTP2 POST request from Test Simulator to SUT with the correct URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 4.1.3.
Step 2. At the Test Simulator the received HTTP2 response is recorded.
Expected Results
The test is considered passed if
The return code is “200 OK”, with Response message body content containing a Subscriptioninfo.
The return code is “404 Not found”, without message body, when the subscription resource is not available (not created).
Delete individual subscription resources
Test Purpose
The purpose of this test case is to verify the capability to delete a subscription of event notifications.
This test case is mandatory if the SUT (O-Cloud) claims to support O-Cloud Notification API, it shall support at least pull mode notification or push mode; for push mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification resources create (Chapter 7.3) and query request, and supports delete an individual subscription resource request.
The Test Simulator has the functionality to initiate delete a subscription resource.
Initial conditions
The simulator (acting as a workload) has started.
The SUT (O-Cloud) has the Notification service ready and available to receive delete request from the Test Simulator.
Procedure
Step 1. Send an HTTP2 DELETE request from Test Simulator to SUT with the correct URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 4.1.3.
Step 2. At the Test Simulator the received HTTP2 response is recorded.
Expected Results
The test is considered passed if
The return code is “204 DELETE”.
Event notification and Notification sanity check
Test Purpose
The purpose of this test case is to verify the capability of event notification to an event consumer.
This test case is conditional. If the SUT (O-Cloud) claims to support O-Cloud Notification API, it shall support at least pull mode notification or push mode; for push mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification subscription and query (Chapter 7.3 and 7.4).
The Test Simulator has the functionality to receive the event notification.
Initial conditions
The simulator (acting as a workload) has started.
The SUT (O-Cloud) has the Notification service ready and has accepted subscription request from the Test Simulator.
The resources state change or event can be tracked by SUT(O-Cloud).
Procedure
Step 1. Send an HTTP2 POST request from SUT to the Test Simulator with the EC’s URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 5.1.1 containing the JSON format Event as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 7.2 as the message body.
Step 2. At the SUT the received HTTP2 response is recorded.
Expected results
The test is considered passed if
The return code is “204 Success”.
The return code is “400 Bad Request”, without message body, when the request is not correct.
The return code is “404 Not Found”, without message body, when the URI is not available.
The return code is “408 Request Timeout”, without message body, when the subscription resource is already existing. (Not applicable for sanity check)
Event pull status notification
Test Purpose
The purpose of this test case is to verify the capability of pulling of the event from an event consumer.
This test case is conditional if the SUT (O-Cloud) claims to support O-Cloud Notification API. it shall support at least pull mode notification or push mode; for pull mode, this case applies.
Test Entrance Criteria
The SUT supports the O-Cloud Event Notification subscription and pull request (Chapter 7.3).
The Test Simulator has the functionality to initiate pull request to the resource status.
Initial conditions
The simulator (acting as a workload) has started.
The SUT (O-Cloud) has the Notification service ready and has accept the subscription request from the Test Simulator.
Procedure
Step 1. Send an HTTP2 GET request from Test Simulator to SUT with the correct URI format as specified in O-RAN.WG6.O-Cloud Notification API [2] clause 6.1.1.
Step 2. At the Test Simulator the received HTTP2 response is recorded.
Expected results
The test is considered passed if
The return code is “200 OK”.
The return code is “404 Not Found”, when event notification resource is not available on this node.
AAL Test
This is FFS.
O2 Test
General
The O2 Test validates that the O-Cloud exposes O2 interfaces which should be fully compliant to latest published O2 Interface Specifications.
Test Configuration
System Under Test requirements
The SUT for O2 Test is an O-Cloud with O2 Services to expose O-RAN O2 interfaces toward SMO.
Test Tools capabilities
A summary of the tools for functional testing is shown below:
Test Tool: The entity used to simulate SMO to issue O2 API request towards the O-Cloud, e.g., A set of test scripts implemented by Robot Framework which execute Test Cases specified in the O2 Test section.
Robot: Robot Framework is a generic test automation framework for acceptance testing and acceptance test-driven development. It is a keyword-driven testing framework that uses tabular test data syntax.
O2 IMS Test Tools capabilities
Tool simulates SMO to expose API endpoints for O-Clouds to deliver Notifications from O-Cloud to SMO, e.g., An instance of mock server with provisions to accept API calls from O-Cloud upon notification delivery. As below example endpoints include:
O-Cloud registration API Endpoint:
${SMO_ENDPOINT}/mock_smo/v1/O-cloud_observer
O-Cloud Inventory Changes Notification API Endpoint: ${SMO_ENDPOINT}/mock_smo/v1/o2ims_inventory_observer
O-Cloud Alarm Changes Notification API Endpoint:
${SMO_ENDPOINT}/mock_smo/v1/o2ims_alarm_observer
O2 DMS Test Tools capabilities
For the test for O2 DMS ETSI NFV Profile [4], it is recommended to use Robot Framework as described in [8].
O2 IMS Test
O-Cloud succeeds to deliver O-Cloud Available Notification to SMO.
Test Purpose
The purpose of this test case is to verify O-Cloud can deliver O-Cloud Available Notification to SMO successfully.
Initial conditions
The Test Tool is running and exposing valid endpoint for O-Cloud to deliver O-Cloud Available notification.
Procedure
Step 1. Bring up O-Cloud with O2 IMS service by provisioning valid API endpoint of Test Tool, for   example: ${SMO_ENDPOINT}/mock_smo/v1/O-cloud_observer and globalO-cloudId assigned for this O-Cloud;
Step 2. Check if Test Tool received valid O-Cloud Available Notification from O-Cloud via the SMO endpoint.
Expected Results
The test is considered passed if
Step1. O-Cloud with O2 Service finished deployment.
Step2. The Test Tool O-Cloud registration Endpoint receives notification, for example:
${SMO_ENDPOINT}/mock_smo/v1/O-cloud_observer received O-Cloud Available Notification from O2 IMS services with content compliant to [7] section ‘3.6.5.1.1 O-Cloud Available Notification Description’.
SMO succeeds to query inventory with correct token
Test Purpose
The purpose of this test case is to verify SMO succeeds to query O-Cloud O2ims inventory resources after O-Cloud succeeds in delivering O-Cloud Available notification to SMO.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool queries O-Cloud detail via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1.
Step 2. With valid ${O2ims-api-token}, Test Tool queries resource type list without filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes.
Step 3. With valid ${O2ims-api-token}, Test Tool queries resource type list with filter (e.g., filter by resource type with name: pserver) via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(eq,name,pserver)
Step 4. With valid ${O2ims-api-token}, Test Tool to query resource type list with selector (e.g., all_fields) via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?all_fields
Step 5. With valid ${O2ims-api-token}, Test Tool queries resource type detail with a valid ${resource_type_id} via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes/${resource_type_id}
Step 6. With valid ${O2ims-api-token}, Test Tool queries Resource Pool list without filter via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools
Step 7. With valid ${O2ims-api-token}, Test Tool queries Resource Pool list with filter (e.g., filter by a valid ${resourcePoolId}) via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools?filter=(eq,resourcePoolId,${resourcePoolId})
Step 8. With valid ${O2ims-api-token}, Test Tool queries Resource Pool list with selector via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools?all_fields
Step 9. With valid ${O2ims-api-token}, Test Tool queries Resource Pool detail via API:
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}
Step 10. With valid ${O2ims-api-token}, Test Tool queries Resource list of a Resource Pool without filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources
Step 11. With valid ${O2ims-api-token}, Test Tool queries Resource list of a Resource Pool with filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?filter=(eq,resourceTypeId,${resourceTypeId})
Step 12. With valid ${O2ims-api-token}, Test Tool to query Resource list of a Resource Pool with selector via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?all_fields
Step 13. With valid ${O2ims-api-token}, Test Tool queries Resource detail via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources/${resourceId}
Expected Results
The test is considered passed if
Step 1 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.6 Type: CloudInfo’.
Step 2 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.2 Type: ResourceTypeInfo’.
Step 3 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.2 Type: ResourceTypeInfo’.
Step 4 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.2 Type: ResourceTypeInfo’.
Step 5 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.2 Type: ResourceTypeInfo’.
Step 6 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.3 Type: ResourcePoolInfo’.
Step 7 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.3 Type: ResourcePoolInfo’.
Step 8 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.3 Type: ResourcePoolInfo’.
Step 9 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.3 Type: ResourcePoolInfo’.
Step 10 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.4 ResourceInfo’.
Step 11 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.4 ResourceInfo’.
Step 12 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.4 ResourceInfo’.
Step 13 API response status code should be 200, and response data is compliant to [7] section ‘3.2.6.2.4 ResourceInfo’.
SMO succeeds to subscribe for O2ims inventory changes notification and succeeds to receive notifications.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available Notification to SMO, SMO succeeds to subscribe to O-Cloud O2ims inventory changes notification, and SMO succeeds to receive notification when o2ims inventory changes.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool create a subscription via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions, the call back field as example:
${SMO_ENDPOINT}/mock_smo/v1/o2ims_inventory_observer
Step 2. With valid ${O2ims-api-token}, Test Tool queries subscription list without filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions
Step 3. With valid ${O2ims-api-token}, Test Tool queries subscription list with filter (e.g., filter by a valid ${subscriptionId}) via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions?filter=(eq,subscriptionId,${subscriptionId})
Step 4. With valid ${O2ims-api-token}, Test Tool queries a subscription detail via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions/${subscriptionId}
Step 5. Trigger O2IMS inventory changes from O-Cloud side and observe the Test Tool receiving notification of this O2IMS inventory change.
Step 6. With valid ${O2ims-api-token}, Test Tool delete a subscription via API: DELETE ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions/${subscriptionId}
Expected Results
The test is considered passed if
Step 1 API response status code should be 201, and response data is compliant to [7] section ‘3.2.4.11.3.1-2 InventorySubscriptionInfo’.
Step 2 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.11.3.2 GET’
Step 3 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.11.3.2 GET’
Step 4 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.12.2 Resource definition’
Step 5 Test Tool O-Cloud Inventory changes Notification API Endpoint, for example:
${SMO_ENDPOINT}/mock_smo/v1/o2ims_inventory_observer
received the notification upon o2ims inventory change, and response data is compliant to [7] section ‘3.2.5.1.1 Inventory Change Notification Description’
Step6. The API response status should be 200, and the response data is compliant with [7] section ‘3.2.4.12.3.5 DELETE’.
SMO succeeds to create alarmSubscription, receive alarm notification, and query alarm list.
Test Purpose
After O-Cloud succeeds deliver O-Cloud Available notification to SMO, SMO succeeds to subscribe for notification of alarm changes notification, and SMO succeeds to query alarm list and detail.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool creates an alarmSubscription for receiving alarm changes notification via API: POST ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions, the call back field as example:
${SMO_ENDPOINT}/mock_smo/v1/o2ims_alarm_observer
Step 2. With valid ${O2ims-api-token}, Test Tool queries alarmSubscription list via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions
Step 3. With valid ${O2ims-api-token}, Test Tool queries alarmSubscription details with alarmSubscriptionId via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions/${alarmSubscriptionId}
Step 4. Trigger alarm change on O-Cloud side.
Step 5. With valid ${O2ims-api-token}, Test Tool queries alarm list via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarms
Step 6. With valid ${O2ims-api-token}, Test Tool queries alarm list with filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarms?filter=(eq,resourceTypeId,${resourceTypeId})
Step 7. With valid ${O2ims-api-token}, Test Tool queries alarm list with selector via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarms?all_fields
Step 8. With valid ${O2ims-api-token}, Test Tool queries alarm detail with alarmEventRecordId via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarms/${alarmEventRecordId}
Step 9. With valid ${O2ims-api-token}, Test Tool deletes alarmSubscription with alarmSubscriptionId via API: DELETE
${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions/${alarmSubscriptionId}
Step 10. Trigger alarm change on O-Cloud side.
Expected Results
The test is considered passed if
Step 1 API response status code should be 201, and response data is compliant to [7] section ‘3.3.4.4.3.1 POST’.
Step 2 API response status code should be 200, and response data is compliant to [7] section ‘3.3.4.4.3.2 GET’.
Step 3 API response status code should be 200, and response data is compliant to [7] section ‘3.3.4.4.3.2 GET’.
Step 4 Test Tool O-Cloud Alarm Changes Notification API Endpoint, for example:
${SMO_ENDPOINT}/mock_smo/v1/o2ims_alarm_observer
succeeds receiving alarm change notification, and alarm change notification data is compliant to [7] section ‘3.3.5.1.1 Alarm Change Notification Description’.
Step 5 API response status code should be 200, and response data is compliant to [7] section ‘3.3.4.2.3.2 GET’.
Step 6 API response status code should be 200, and response data is compliant to [7] section ‘3.3.6.2.2 Type: AlarmEventRecord’.
Step 7 API response status code should be 200, and response data is compliant to [7] section ‘3.3.6.2.2 Type: AlarmEventRecord’.
Step 8 API response status code should be 200, and response data is compliant to [7] section ‘3.3.6.2.2 Type: AlarmEventRecord’.
Step 9 API response status code should be 200, and response data is compliant to [7] section ‘3.3.4.5.3.5 Delete’.
Step 10 Observe the Test Tool does not receive alarm change notification anymore.
Verify general aspects of O2ims API.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO succeeds to issue API requests complying to '3.1.2 URI structure and supported content formats.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool queries ApiVersionInformation of o2ims infrastructureInventory services via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/api_versions
Step 2. With valid ${O2ims-api-token}, Test Tool queries ApiVersionInformation of o2ims infrastructureMonitoring service via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/api_versions
Step 3. With valid ${O2ims-api-token}, Test Tool queries Resources with nextpage_opaque_marker via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?nextpage_opaque_marker=2
Step 4. With valid ${O2ims-api-token}, Test Tool queries resource with filter with below APIs
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?filter=(eq,resourceId,${resourceId})
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?filter=(neq,resourceId,${resourceId})
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(cont,description,Ethernet)
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(ncont,description,Ethernet)
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(in,name,pserver,pserver_if,pserver_mem)
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(nin,name,pserver,pserver_if,pserver_mem)
Step 5. With valid ${O2ims-api-token}, Test Tool queries resources with attribute selector via API: GET
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?all_fields
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?fields=extensions
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?exclude_fields=extensions
${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?exclude_default
Expected Results
The test is considered passed if
Step 1. API response status code should be 200, and response data is compliant to [7] section ‘3.1.6.1.6 Type: ApiVersionInformation’.
Step 2. API response status code should be 200, and response data is compliant to [7] section ‘3.1.6.1.6 Type: ApiVersionInformation’.
Step 3. API response status code should be 200, and response data is compliant to [7] section ‘3.1.6.2.2 Simple Data Types’.
Step 4. API response status code should be 200, and response data is compliant to [7] section ‘3.1.4.3 Handling of large query results’.
Step 5. API response status code should be 200, and response data is compliant to [7] section ‘3.1.4.3 Handling of large query results’.
SMO gets 405 while sending O2ims APIs with unsupported method.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets 405 responses while issuing API requests with unsupported method.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate resourceTypes via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes
Step 2. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate resourcePool via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools
Step 3.  With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate resource via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources
Step 4. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate DeploymentManager via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers
Step 5.  With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate O-cloud via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/
Step 6.  With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate Inventory Subscription via API: PATCH ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions
Step 7.  With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate Alarm via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/alarms
Step 8. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported method to operate Alarm Subscription via API: PATCH ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions
Expected Results
The test is considered passed if
Step 1 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.2.3.1, 3.2.4.2.3.3, 3.2.4.2.3.4, 3.2.4.2.3.5.’.
Step 2 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.3.3.1, 3.2.4.3.3.3, 3.2.4.3.3.4, 3.2.4.3.3.5’.
Step 3 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.4.3.1, 3.2.4.4.3.3, 3.2.4.4.3.4, 3.2.4.4.3.5’.
Step 4 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.5.3.1, 3.2.4.5.3.3, 3.2.4.5.3.4, 3.2.4.5.3.5’.
Step 5 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.6.3.1, 3.2.4.6.3.3, 3.2.4.6.3.4, 3.2.4.6.3.5’.
Step 6 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.7.3.1, 3.2.4.7.3.3, 3.2.4.7.3.4, 3.2.4.7.3.5’.
Step 7 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.8.3.1, 3.2.4.8.3.3, 3.2.4.8.3.4, 3.2.4.8.3.5’.
Step 8 API response status code should be 405, and response data is compliant to [7] section ‘3.2.4.9.3.1, 3.2.4.9.3.3, 3.2.4.9.3.4, 3.2.4.9.3.5’.
SMO gets 400 while issuing O2ims APIs with incorrect data.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets 400 response with Problem Details while issuing o2ims API requests with incorrect data.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate resourceTypes via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourceTypes?filter=(eq,WrongAttrName,anyvalue)
Step 2. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate resourcePool via API: GETo2ims-infrastructureInventory/v1/resourcePools?filter=(eq,WrongAttrName,anyvalue)
Step 3. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate resource via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/resourcePools/${resourcePoolId}/resources?filter=(eq,WrongAttrName,anyvalue)
Step 4. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate DeploymentManager via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers?filter=(eq,WrongAttrName,anyvalue)
Step 5. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate O-cloud via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/?fields=(O-cloudId,WrongAttrName)
Step 6. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate Inventory Subscription via API: GET/o2ims/infrastructureInventory/v1/subscriptions?fields=(SubscriptionId,WrongAttrName)
Step 7. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate Alarm via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarms?fields=(AlarmId,WrongAttrName)
Step 8. With valid ${O2ims-api-token}, Test Tool issues API request with incorrect data to operate Alarm Subscription via API: GET ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions?fields=(AlarmId,WrongAttrName)
Expected Results
The test is considered passed if
Step 1 API response status code should be 400, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
Step 2 API response status code should be 400, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
Step 3 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.3 Application errors’.
Step 4 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors, 3.6.7.3 Application errors’.
Step 5 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors ,3.6.7.3 Application errors’.
Step 6 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors ,3.6.7.3 Application errors’.
Step 7 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors, 3.6.7.3 Application errors’.
Step 8 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors ,3.6.7.3 Application errors’.
SMO gets security error response while issuing APIs with incorrect token.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets error response while issuing API requests with incorrect token data.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with invalid ${O2ims-api-token}.
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool issues API request without Authorization Bearer Token Header via API: GET  ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/
Step 2. With invalid ${O2ims-api-token}, Test Tool issues API request with Authorization Bearer Token Header and invalid token via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/
Step 3. With invalid ${O2ims-api-token}, Test Tool issues API request with Authorization Bearer Token Header and valid token via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/
Expected Results
The test is considered passed if
Step 1 API response status code should be 401, and response data is compliant to [7] section ‘3.1.7.1 Introduction’.
Step 2 API response status code should be 401, and response data is compliant to [7] section ‘3.1.7.1 Introduction’.
Step 3 API response status code should be 200, and response data is compliant to [7] section ‘3.1.7.1 Introduction’.
SMO gets client error response while issuing requests with incorrect APIs
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets correct error response while issuing request with incorrect APIs.
Initial conditions
The Test Tool has started.
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool queries API with wrong port via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers
Step 2. With valid ${O2ims-api-token}, Test Tool queries API with wrong URL via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagersWrongURL
Step 3. With valid ${O2ims-api-token}, Test Tool queries API with wrong api version via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v2/deploymentManagers
Step 4. With valid ${O2ims-api-token}, Test Tool queries API with wrong deploymentManagerID via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/wrongDeploymentManagerID
Expected Results
The test is considered passed if
Step 1 With valid ${O2ims-api-token}, Test Tool does not receive API response.
Step 2 API response status code should be 404, and response data is compliant to [7] section ‘3.6.7.1 General, 3.6.7.3 Application errors’’.
Step 3 API response status code should be 404, and response data is compliant to [7] section ‘3.6.7.1 General, 3.6.7.3 Application errors’’.
Step 4 API response status code should be 404, and response data is compliant to [7] section ‘3.6.7.1 General, 3.6.7.3 Application errors’’.
SMO succeeds to get O2dms (in Kubernetes native API Profile) access information.
Test Purpose
The purpose of this test case is to verify SMO succeeds to query deploymentManager to extract O2dms access information after O-Cloud succeeds to deliver O-Cloud Available notification to SMO.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool queries deploymentManager list without filter via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers
Step 2. With valid ${O2ims-api-token}, Test Tool queries deploymentManager list with filter (e.g., filter by a valid ${deploymentManagerId}) via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers?filter=(eq, deploymentManagerId, ${deploymentManagerId})
Step 3. With valid ${O2ims-api-token}, Test Tool queries a deploymentManager detail via API: GET ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/deploymentManagers/${deploymentManagerId}
Step 4. Extract ${k8s_cluster_api_endpoint} from response data of step3, Test Tool queries Kubernetes resources with access credentials from a deploymentManager with Kubernetes API: GET ${k8s_cluster_api_endpoint}/api/v1/namespaces
Expected Results
The test is considered passed if:
Step 1 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.9.2 Resource Definition, 3.2.4.8.3.2 Get, 3.2.4.8.2 DeploymentManagerInfo’.
Step 2 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.8.3.2 Get and 3.2.4.8.2 DeploymentManagerInfo’.
Step 3 API response status code should be 200, and response data is compliant to [7] section ‘3.2.4.8.3.2 Get and 3.2.6.2.5 DeploymentManagerInfo’.
Step 4 API response status code should be 200, and response data contains correct Kubernetes resources information.
SMO gets  400 when issuing APIs with junk/unsupported data.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets 400 response with Problem Details when issuing o2ims API requests with junk/unsupported data.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-Cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool issues API request with junk data to create inventory subscription via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions
Step 2. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported data, such as xml, to create inventory subscription via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions
Step 3. With valid ${O2ims-api-token}, Test Tool issues API request with junk data to create alarm subscription via API: POST ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions
Step 4. With valid ${O2ims-api-token}, Test Tool issues API request with unsupported data, such as xml to create alarm subscription via API: POST ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/alarmSubscriptions
Expected Results
The test is considered passed if:
Step 1 API response status code should be 400, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
Step 2 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors, 3.6.7.3 Application errors’.
Step 3 API response status code should be 400, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
Step 4 API response status code should be 400, and response data is compliant to [7] section ‘3.6.7.2 Protocol errors, 3.6.7.3 Application errors’.
SMO gets 404 when issuing APIs with wrong data.
Test Purpose
The purpose of this test case is to verify that after O-Cloud succeeds to deliver O-Cloud Available notification to SMO, SMO gets 404 response with Problem Details when issuing o2ims API requests with wrong data.
Initial conditions
The Test Tool received O-Cloud Available Notification from O-Cloud.
Test Tool is provided with ${O2ims-endpoint} by extracting it from O-cloud Available Notification.
Test Tool is provided with valid ${O2ims-api-token} (by extracting it from O-Cloud Available Notification or some other way).
Procedure
Step 1. With valid ${O2ims-api-token}, Test Tool issues API request with wrong subscriptionId to delete inventory subscription via API: DELETE ${O2ims-endpoint}/o2ims-infrastructureInventory/v1/subscriptions/${subscriptionId}
Step 2. With valid ${O2ims-api-token}, Test Tool issues API request with wrong alarmSubscriptionId, to delete alarm subscription via API: DELETE ${O2ims-endpoint}/o2ims-infrastructureMonitoring/v1/alarmSubscriptions/${alarmSubscriptionId}
Expected Results
The test is considered passed if:
Step 1 API response status code should be 404, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
Step 2 API response status code should be 404, and response data is compliant to [7] section ‘3.1.5 Error reporting and 3.6.7.2 Protocol errors’.
O2 DMS Test
General
Regarding the O-RAN O2dms interface, the present document version specifies the testing of the following profile specification(s):
ETSI NFV Protocol specified by O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4].
O2 DMS ETSI NFV Profile Test
Overview
For the API conformance testing of APIs specified in O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], the following items shall apply for each test case define in each sub-clause
The generic test description shall follow the provisions defined in clause 4.5 of ETSI GS NFV-TST 010 [6].
The test suite for the O2DMS ETSI NFV profile API produced by the O-Cloud DMS as specified in the O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4] shall follow the provisions in Annex E and Annex F of ETSI GS NFV-TST 010 [6].
NOTE: O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4] is a profiling spec of ETSI GS NFV-SOL 003 [5]. ETSI GS NFV-TST 010 [6] is a test spec for ETSI NFV specifications which includes ETSI GS NFV-SOL 003 [5] as test target.
Test configuration
For the O2 DMS ETSI NFV Profile test, the test configuration of O-Cloud DMS as producer of VNFM-defined APIs, shall follow the provisions specified in clause 4.3.1 and c4.3.3 of ETSI GS NFV-TST 010 [6], and AUT is O-Cloud DMS.
Test case for Service operations
Instantiate NF Deployment test case
In order to test Instantiate NF Deployment specified in clause 2.4.2.1 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following test specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.22.1 “Create VNF Instance workflow”
Test ID 7.3.1.26.1 “VNF Instantiation workflow”
Test ID 7.3.1.12.2 “Get Individual VNF LCM Operation occurrences”
Terminate NF Deployment test case
In order to test Terminate NF Deployment specified in clause 2.4.2.2 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following tests specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.33.1 “Terminate a VNF Instance”
Test ID 7.3.1.23.1 “Delete VNF Instance workflow”
Test ID 7.3.1.12.2 “Get Individual VNF LCM Operation occurrences”
Query NF Deployment test case
In order to test Query NF Deployment specified in clause 2.4.2.3 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following tests specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.1.2 “GET information about multiple VNF instances”
Test ID 7.3.1.2.2 “Get Information about an individual VNF Instance”
Heal NF Deployment test case
In order to test Heal NF Deployment specified in clause 2.4.2.4 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following tests specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.8.1 “POST Heal a VNF Instance”
Test ID 7.3.1.12.2 “Get Individual VNF CM Operation occurrences”
Scale NF Deployment test case
In order to test Scale NF Deployment specified in clause 2.4.2.5 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following tests specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.4.1 “POST Scale a VNF Instance”
Test ID 7.3.1.5.1 “POST Scale a VNF Instance to level”
Test ID 7.3.1.12.2 “Get Individual VNF LCM Operation occurrences”
Change external connectivity of an NF Deployment test case
In order to test Change external connectivity of an NF Deployment specified in clause 2.4.2.6 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], following tests specified in Annex F.7 of ETSI GS NFV-TST 010 [6] shall be followed:
Test ID 7.3.1.10.1 “POST Change external VNF connectivity”
Test ID 7.3.1.12.2 “Get Individual VNF LCM Operation occurrences”
Test case for O2dms_DeploymentLifecycle Service API
VNF instances REST resource test case
In order to test VNF instances REST resource specified in clause 3.2.4.2 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “VNFInstances" specified in Annex F.7 7.3.1.1 of ETSI GS NFV-TST 010 [6] shall be followed.
Individual VNF instance REST resource test case
In order to test Individual VNF instance REST resource specified in clause 3.2.4.3 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “IndividualVNFInstance" specified in Annex F.7 7.3.1.2 of ETSI GS NFV-TST 010 [6] shall be followed.
Instantiate VNF task REST resource test case
In order to test Instantiate VNF task REST resource specified in clause 3.2.4.4 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “InstantiateVNFTask" specified in Annex F.7 7.3.1.3 of ETSI GS NFV-TST 010 [6] shall be followed.
Terminate VNF task REST resource test case
In order to test Terminate VNF task REST resource specified in clause 3.2.4.5 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “TerminateVNFTask" specified in Annex F.7 7.3.1.7 of ETSI GS NFV-TST 010 [6] shall be followed.
Notification test case
In order to test Notifications issued on the O2dms_DeploymentLifecycle Service API specified in clause 3.2.5 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “Notifications" specified in Annex F.7 7.3.1.34 of ETSI GS NFV-TST 010 [6] shall be followed.
Heal VNF task REST resource test case
In order to test Heal VNF task REST resource specified in clause 3.2.4.6 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “HealVNFTask" specified in Annex F.7 7.3.1.8 of ETSI GS NFV-TST 010 [6] shall be followed.
Scale VNF task REST resource test case
In order to test Scale VNF task REST resource specified in clause 3.2.4.11 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “ScaleVNFTask" specified in Annex F.7 7.3.1.4 of ETSI GS NFV-TST 010 [6] shall be followed.
Scale VNF to Level task REST resource test case
In order to test Scale VNF to Level task REST resource specified in clause 3.2.4.12 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “ScaleVNFToLevelTask" specified in Annex F.7 7.3.1.5 of ETSI GS NFV-TST 010 [6] shall be followed.
Change external VNF connectivity task REST resource test case
In order to test Change external VNF connectivity task REST resource specified in clause 3.2.4.13 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “ChangeExternalVNFConnectivity Task" specified in Annex F.7 7.3.1.10 of ETSI GS NFV-TST 010 [6] shall be followed.
Retry operation task REST resource test case
In order to test Retry operation task REST resource specified in clause 3.2.4.7 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “RetryOperationTask" specified in Annex F.7 7.3.1.13 of ETSI GS NFV-TST 010 [6] shall be followed.
Rollback operation task REST resource test case
In order to test Rollback operation task REST resource specified in clause 3.2.4.8 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “RollbackOperationTask" specified in Annex F.7 7.3.1.14 of ETSI GS NFV-TST 010 [6] shall be followed.
Fail operation task REST resource test case
In order to test Fail operation task REST resource specified in clause 3.2.4.9 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “FailOperationTask" specified in Annex F.7 7.3.1.15 of ETSI GS NFV-TST 010 [6] shall be followed.
Cancel operation task REST resource test case
In order to test Cancel operation task REST resource specified in clause 3.2.4.10 of O-RAN.WG6.O2DMS-INTERFACE-ETSI-NFV-PROFILE [4], test suite for “CancelOperationTask" specified in Annex F.7 7.3.1.16 of ETSI GS NFV-TST 010 [6] shall be followed.
Synchronization Test
General
Time and frequency synchronization can be distributed to the O-DU and O-RU from the same source using different methods. The O-DU is a workload of O-Cloud, so O-Cloud should have the synchronization capability.
The Synchronization Test validates that O-Cloud should be fully complaint to latest published version of [3].
Test Configuration
System Under Test requirements
The SUT of Synchronization test is the O-Cloud Node, which host controller functions, as described in section 5.5 of [i.2].
Test Tools and Simulators capabilities
There is no special configuration for Synchronization Test.
Test Cases
Synchronization Test LLS-C1
Figure 8.3-1 Time Sync Architecture for LLS-C1
Test Purpose
The purpose of this test case is to verify that the O-Cloud can support LLS-C1.
The synchronization of the O-Cloud to Primary Reference Time Clock (e.g. GM) is not in the scope of this document.
Initial conditions
The O-Cloud is configured to support LLS-C1.
Procedure
Step 1. Configure the O-Cloud Node as a PTP Master towards the fronthaul interface, the following configuration PTP is allowed:
Network Transport – L2, UDPv4, UDPv6
Delay Measurement Mechanism – E2E
Time Stamping - hardware
Expected Results
Check that PTP configuration shows the following:
delay_mechanism E2E
time_stamping hardware
network_transport L2 or UDPv4/UDPv6
Use ‘pmc’ commands to observe that the portState shows ‘MASTER’
For example:
sudo pmc -u -b 0 -f /etc/ptpinstance/ptp4l.conf 'GET PORT_DATA_SET'
sending: GET PORT_DATA_SET
507c6f.fffe.0b8738-1 seq 0 RESPONSE MANAGEMENT PORT_DATA_SET
portIdentity            507c6f.fffe.0b8738-1
portState               MASTER
logMinDelayReqInterval  -4
peerMeanPathDelay       0
logAnnounceInterval     -3
announceReceiptTimeout  3
logSyncInterval         -4
delayMechanism          1
logMinPdelayReqInterval 0
versionNumber           2
Check that phc2sys is running on the O-Cloud Node and is synchronizing the System Clock.
For example:
ps -elf |grep phc2sys
4 S root       67226       1  0 -11   - -   962 -      Feb20 ?        00:00:03 /usr/sbin/phc2sys -f /etc/linuxptp/ptpinstance/phc2sys-phc2sys-inst1.conf -a -r -R 2 -u 600
Make sure ‘-a’ and ‘-r’ options are specified
Synchronization Test LLS-C3
Figure 8.3-2 Time Sync Architecture for LLS-C3
Test Purpose
The purpose of this test case is to verify that the O-Cloud can support LLS-C3.
Initial conditions
The O-Cloud is configured to support LLS-C3.
Procedure
Step 1. Configure the O-Cloud Node as a PTP Slave towards the fronthaul interface, the following configuration PTP is allowed:
Network Transport – L2, UDPv4, UDPv6
Delay Measurement Mechanism – E2E
Time Stamping - hardware
Expected Results
The test is considered passed if
Check that PTP configuration shows the following:
delay_mechanism E2E
time_stamping hardware
network_transport L2 or UDPv4/UDPv6
Use ‘pmc’ commands to observe that the portState shows ‘SAVE’
For example:
sudo pmc -u -b 0 -f /etc/ptpinstance/ptp4l.conf 'GET PORT_DATA_SET'
sending: GET PORT_DATA_SET
507c6f.fffe.0b8738-1 seq 0 RESPONSE MANAGEMENT PORT_DATA_SET
portIdentity            507c6f.fffe.0b8738-1
portState               SALVE
logMinDelayReqInterval  -4
peerMeanPathDelay       0
logAnnounceInterval     -3
announceReceiptTimeout  3
logSyncInterval         -4
delayMechanism          1
logMinPdelayReqInterval 0
versionNumber           2
Check that the slave reports the time offset calculated from the master. For example, ptp4l output:
2022-09-06T08:03:01.000 controller-0 ptp4l: info [580909.748] ptp-inst1 rms 5 max 15 freq +0 +/-  19 delay   472 +/-   1
Check that phc2sys is running on the O-Cloud Node and is synchronizing the System Clock.
For example:
ps -elf |grep phc2sys
4 S root       67226       1  0 -11   - -   962 -      Feb20 ?        00:00:03 /usr/sbin/phc2sys -f /etc/linuxptp/ptpinstance/phc2sys-phc2sys-inst1.conf -a -r -R 2 -u 600
Make sure ‘-a’ and ‘-r’ options are specified
Annex A (normative):
Checklist for Cases applies to O-Cloud technologies
This section provides a list of test cases applicable to each O-Cloud technology.
A.1	O-Cloud technologies
This specification covers following O-Cloud technologies:
VMs only
Containers only
Containers in VMs
A.2	Cloud Technology Applicability of test cases
Cases marked with Y apply to the corresponding cloud technologies should be executed.
Table A.2-1: O-Cloud IOT and corresponding Interfaces/APIs, DUTs and DUTs
A.3	Case Traceability
Table A.3-1: O-Cloud IOT and corresponding Interfaces/APIs, DUTs and DUTs
Annex (informative): 
Change History