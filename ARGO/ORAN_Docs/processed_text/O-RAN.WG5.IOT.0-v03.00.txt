O-RAN.WG5.IOT.0-v03.00
Technical Specification
O-RAN.WG5.IOT.0-v03.00
Technical Specification
O-RAN Open F1/W1/E1/X2/Xn Interface Working Group
Interoperability Test Specification (IOT)
Copyright © 2021 by O-RAN ALLIANCE e.V.
By using, accessing or downloading any part of this O-RAN specification document, including by copying, saving, distributing, displaying or preparing derivatives of, you agree to be and are bound to the terms of the O-RAN Adopter License Agreement contained in the Annex ZZZ of this specification. All other rights reserved.
O-RAN ALLIANCE e.V.
Buschkauler Weg 27, 53347 Alfter, Germany
Register of Associations, Bonn VR 11238
VAT ID DE321720189.
Copyright © 2022 by the O-RAN ALLIANCE e.V.
Your use is subject to the terms of the O-RAN Adopter License Agreement in the Annex ZZZ.							  1
Revision History
Contents
Revision History	2
Chapter 1 Introductory Material	5
1.1	Foreword	5
1.2	Scope	5
1.2.1 	General	5
1.3	References	5
1.4	Definitions and Abbreviations	6
1.4.1	Definitions	6
1.4.2	Abbreviations	6
Chapter 2 Interoperability Measurements	7
2.1	Interoperability Test Definitions	7
2.1.1 	Test Configurations	7
2.1.1.1 	Device Under Test (DUT) and System Under Test (SUT)	7
2.1.1.2 	Testing Tools	8
2.1.1.3 	Assumptions	19
2.1.1.4 	Specifications to be used for testing	19
2.1.1.5 	Standard Test Configuration	20
2.2 	X2 Interoperability Test Cases	20
2.2.1 	X2 C-Plane IOT Test Cases	22
2.2.1.1 	EN-DC X2 Setup (eNB initiated)	22
2.2.1.2 	EN-DC X2 Setup (en-gNB initiated)	22
2.2.1.3 	Reset (eNB initiated)	23
2.2.1.4 	Reset (en-gNB initiated)	24
2.2.1.5 	Partial Reset (MeNB initiated)	25
2.2.1.6 	Partial Reset (en-gNB initiated)	26
2.2.1.7 	Secondary Node Addition (Option 3x)	27
2.2.1.8 	Secondary Node Release (MN initiated, Option 3x)	30
2.2.1.9 	Secondary Node Release (SN initiated, Option 3x)	32
2.2.1.10 	Secondary Node Change (MN initiated, Option 3x)	34
2.2.1.11 	Secondary Node Change (SN initiated, Option 3x)	36
2.2.1.12 	Inter-Master Node Handover (without SN Change, Option 3x)	39
2.2.1.13 	Master Node to eNB Change	41
2.2.1.14 	PCell change (Intra MN) (MN initiated)	43
2.2.1.15 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option	45
2.2.1.16 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option	46
2.2.1.17 	Served NR cell information Update (en-gNB initiated)	48
2.2.1.18 	Security Key Change (MN initiated)	50
2.2.1.19 	Measurement Gap Coordination Procedure (MN initiated)	52
2.2.1.20 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)	53
2.2.1.21 	Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)	54
2.2.1.22 	UL Configuration Update Procedure (SN initiated)	55
2.2.1.23 	Addition of SN terminated split bearer (MN initiated)	57
2.2.1.24 	Removal of SN terminated split bearer (MN initiated)	59
2.2.1.25 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated)	61
2.2.1.26 	Bearer type change from SN terminated MCG bearer to SN terminated split bearer (MN initiated)	63
2.2.1.27 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated)	65
2.2.1.28 	E-UTRA - NR Cell Resource Coordination (MN initiated, Option 3x/3a)	67
2.2.1.29 	E-UTRA - NR Cell Resource Coordination (SN initiated, Option 3x/3a)	69
2.2.2 	X2 U-Plane IOT Test Cases	70
2.2.2.1 	Node behaviour of the corresponding node	70
2.2.2.2 	General for Elements for the NR user plane protocols	72
2.2.2.3 	Report Polling	74
2.2.2.4 	Buffer discard indication	76
2.2.2.5 	User data existence flag	78
2.2.2.6 	Assistance Information Report polling	80
2.2.2.7 	Radio quality assistance information	81
2.3 	F1 Interoperability Test Cases	83
2.3.1	F1 C-Plane IOT Test Cases	84
2.3.1.1 	Partial Reset (MeNB initiated)	84
2.3.1.2 	Secondary Node Addition (Option 3x)	85
2.3.1.3 	Secondary Node Release (MN initiated, Option 3x)	86
2.3.1.4 	Secondary Node Release (SN initiated, Option 3x)	88
2.3.1.5 	Secondary Node Change (MN initiated, Option 3x)	90
2.3.1.6 	Secondary Node Change (SN initiated, Option 3x)	92
2.3.1.7 	Inter-Master Node Handover (without SN Change, Option 3x)	93
2.3.1.8 	Master Node to eNB Change	95
2.3.1.9 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario)	96
2.3.1.10 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option (Inter gNB-DU scenario)	98
2.3.1.11 	Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration	99
2.3.1.12 	F1 Setup for EN-DC	101
2.3.1.13 	gNB-DU Configuration Update for EN-DC	102
2.3.1.14 	gNB-CU Configuration Update for EN-DC	104
2.3.1.15 	F1 Setup for NR Stand-Alone	105
2.3.1.16 	gNB-DU Configuration Update for NR Stand-Alone	106
2.3.1.17 	 gNB-CU Configuration Update for EN-DC　NR Stand-Alone	107
2.3.1.18 	Paging (CN-initiated)	109
2.3.1.19 	UE context creation (service request)	109
2.3.1.20 	UE context creation (registration request)	110
2.3.1.21 	UE Context Release	111
2.3.1.22 	UE Context Modification (SCell to be setup/removed)	112
2.3.1.23 	UE Context Modification (DRB to be setup)	114
2.3.1.24 	UE Context Modification (DRB to be released)	115
2.4 	Xn Interoperability Test Cases	116
2.4.1 	Xn C-Plane IOT Test Cases	117
2.4.1.1 	Xn Setup	117
2.4.1.2 	Inter gNB Handover	118
2.4.1.3 	S-NG-RAN Node Addition	120
2.4.1.4 	M-NG-RAN node initiated SN modification	122
2.4.1.5 	S-NG-RAN node initiated SN modification with MN involvement	127
2.4.1.6 	S-NG-RAN node initiated SN modification without MN involvement	131
2.4.1.7 	M-NG-RAN node initiated S-NG-RAN node Release without keeping UE	133
2.4.1.8 	M-NG-RAN node initiated S-NG-RAN node Release with keeping UE	135
2.4.1.9 	S-NG-RAN node initiated S-NG-RAN node Release	137
Annex ZZZ: O-RAN Adopter License Agreement	140
Section 1: DEFINITIONS	140
Section 2: COPYRIGHT LICENSE	140
Section 3: FRAND LICENSE	140
Section 4: TERM AND TERMINATION	141
Section 5: CONFIDENTIALITY	141
Section 6: INDEMNIFICATION	141
Section 7: LIMITATIONS ON LIABILITY; NO WARRANTY	141
Section 8: ASSIGNMENT	142
Section 9: THIRD-PARTY BENEFICIARY RIGHTS	142
Section 10: BINDING ON AFFILIATES	142
Section 11: GENERAL	142
Introductory Material
1.1	Foreword
This Technical Specification has been produced by the O-RAN Alliance.
The contents of the present document are subject to continuing work within O-RAN and may change following formal O-RAN approval. Should the O-RAN Alliance modify the contents of the present document, it will be re-released by O-RAN with an identifying change of release date and an increase in version number.
1.2	Scope
1.2.1 	General
The present document specifies the interoperability testing (IOT) for the radio access network nodes from different vendors connected using the X2, F1 and Xn interfaces implemented in accordance with the NR C-Plane [2] and U-Plane [3] profiles.
In this version of the specification:
X2 interoperability testing is focused on the eNB and en-gNB as the Devices under Tests (DUTs)
F1 interoperability testing is focused on the en-gNB consisting of the gNB-CU and gNB-DU as the DUTs and also the gNB consisting of the same elements
Xn interoperability testing is focused on the gNBs as the DUTs
1.3	References
The following documents contain provisions which, through reference in this text, constitute provisions of the present document.
-	References are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.
-	For a specific reference, subsequent revisions do not apply.
-	For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document.
[1]	3GPP TR 21.905: “Vocabulary for 3GPP Specifications”
[2]	O-RAN WG5 NR C-Plane profile, v05.00, July 2021
[3]	O-RAN WG5 NR U-Plane profile, v04.00, March 2021
[4]	O-RAN Architecture Description, v02.00, July 2020
[5]	O-RAN WG4 Control, User and Synchronization Specification, v04.00, July 2020
[6]	O-RAN WG5 Transport Specification, v01.00, April 2020
[7]	3GPP TS 36.413: "Evolved Universal Terrestrial Radio Access Network (E-UTRAN); S1 Application Protocol (S1AP)"
[8]	3GPP TS 23.401: "General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access"
[9]	3GPP TS 36.211: "Evolved Universal Terrestrial Radio Access (E-UTRA); Physical channels and modulation"
[10]	3GPP TS 38.211: "NR; Physical channels and modulation"
[11]	3GPP TS 38.214: "NR; Physical layer procedures for data"
[12]	3GPP TS 36.423: "Evolved Universal Terrestrial Radio Access Network (E-UTRAN); X2 Application Protocol (X2AP)"
[13]	3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification"
[14]	3GPP TS 36.321: "Evolved Universal Terrestrial Radio Access (E-UTRA); Medium Access Control (MAC) protocol specification"
[15]	3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)"
1.4	Definitions and Abbreviations
1.4.1	Definitions
For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].
1.4.2	Abbreviations
Abbreviations used in this specification refer to the ones defined in the referenced 3GPP specifications.
Interoperability Measurements
2.1	Interoperability Test Definitions
2.1.1 	Test Configurations
Interoperability testing is performed to prove that the end-to-end functionality between the radio access network nodes is as per specified in the O-RAN NR C-Plane [2] and U-Plane [3] profiles specifications on which these components are based. This requires system level testing of the radio access network nodes requiring interoperability testing as an integrated system.
Figure 2-1 shows the EN-DC Overall Architecture. The en-gNB may consist of a gNB-CU and one or more gNB-DU(s). A gNB-CU and a gNB-DU is connected via the F1 interface.
Figure 2-1: EN-DC Overall Architecture
Figure 2-2 shows the NG-RAN Overall Architecture [2].
Figure 2-2: NG-RAN Overall Architecture [2]
2.1.1.1 	Device Under Test (DUT) and System Under Test (SUT)
The case where the DUTs for X2, F1 and Xn interoperability tests are provided by different vendors is the focus of this document, but the case where both are from the same vendor is also valid.
Table 2-1 summarizes the DUTs and SUTs for X2, F1 and Xn interoperability testing scenarios.
Table 2-1: DUTs and SUTs for X2, F1 and Xn Interoperability Testing
The test configurations will involve defining the cardinality between the X DUT NE1(s) and Y DUT NE2(s) as part of the test scenario which will determine the configuration required. The simplest test configuration involves a single DUT NE1 and a single DUT NE2 ie, X=Y=1.
Figure 2-3, 2-4 and 2-5 show the SUT configurations for X2, F1 and Xn interoperability testing, respectively.
External physical connections between the X DUT NE1(s) and Y DUT NE2(s) are out of scope of this specification.
Figure 2-3: SUT configuration for X2 IOT
Figure 2-4: SUT configuration for F1 IOT (for en-gNB or gNB)
Figure 2-5: SUT configurations for Xn IOT
2.1.1.2 	Testing Tools
One of the key objectives of interoperability testing is to validate the functionality of production grade DUTs. Hence it is important to ensure that the DUTs are not negatively impacted with the utilization of internal functions solely to support interoperability testing, ie, DUTs are not expected to be testing tools when deployed in production networks and therefore DUTs should not be used as testing tools during interoperability tests.
Interoperability tests are performed with a set of testing tools which are used to both apply active stimulus and as well as passive monitoring and measurements of the DUTs.
2.1.1.2.1 	Testing Tools Summary
Table 2-2 shows a summary listing of the testing tools and the requirements of each of these testing tools for X2, F1 and Xn interfaces interoperability testing.
Table 2-2: Testing Tools Summary and Applicability to X2, F1 and Xn Interoperability Testing
2.1.1.2.2 	Testing Tools Details
Active stimulus testing tools
Test UEs and/or UEs emulator: used to generate stateful UE connections and traffic to validate the DUTs implementation of the X2, F1 and Xn interface protocols as these are stimulated by the 3GPP upper layer protocols:
Required so that the DUTs do not need to be put into a “test mode” which does not happen in live deployments
Test UEs and UEs emulator will be required to support EN-DC operations for X2 and F1 interoperability testing. Test UEs and UEs emulator will be required to support Standalone (SA) mode for Xn interoperability testing
Test UEs will require SIM cards which are pre-provisioned with subscriber profiles. UEs used for testing can be simpler to setup but given that these Test UEs are designed as commercial UEs with possibly certain diagnostic functions enabled for logging purposes, they are limited in terms of configurability
UEs emulator will require SIM profile configuration with the subscriber’s profiles. UEs emulator can be used in test scenarios which require multiple UEs’ sessions, more flexibility and configurability to help drive test scenarios
RF connection between the Test UEs or UEs emulator with the DUTs namely the eNB, en-gNB and gNB will be either through cabled connection or Over-The-Air (OTA)
Core or Core emulator: used to terminate stateful NAS sessions with Test UEs and/or UEs emulator and stateful S1 or NG sessions with the DUTs:
Required so that the DUTs do not need to be put into a “test mode” which does not happen in live deployments
Core or Core emulator will be required to support EPC with EN-DC capabilities for X2 and F1 interoperability testing. Core or Core emulator will be required to support 5GC with SA capabilities for Xn and F1 interoperability testing
External physical connection between Core or Core emulator and eNB, en-gNB and gNB is out of scope of this specification
Application Test Server: An endpoint application test traffic emulator which can be used to originate and/or terminate various traffic streams to or from the Test UEs or UEs emulator, respectively. It may provide one or more of these options:
Stateful traffic, eg, TCP, TWAMP
Stateless traffic, eg, UDP
Required to place traffic load on the DUT
External physical connection between Application Test Server and Core or Core emulator is out of scope of the specification
Figure 2-6 shows the test setup for X2 interoperability testing with the DUTs eNB, en-gNB and their connections to the above listed active stimulus testing tools.
Figure 2-6: X2 IOT setup
eNB or eNB emulator: used to support Master Node (eNB) (DUT) to eNB change test case:
Required so that the Master Node (eNB) which is the DUT does not need to be put into a “test mode” which does not happen in live deployments
External physical connection between eNB or eNB emulator and Master Node (eNB) is out of scope of this specification
Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the eNB and en-gNB over the X2 interface
Figure 2-7 shows the test setup for F1 interoperability testing with the en-gNB consisting of DUTs gNB-CU, gNB-DU and their connections to the above listed active stimulus testing tools.
Figure 2-7: F1 IOT setup
eNB or eNB emulator: used to support F1 interoperability testing of the gNB-CU and gNB-DU with both DUTs belonging to the en-gNB:
Required so that the DUTs (gNB-CU, gNB-DU) do not need to be put into a “test mode” which does not happen in live deployments
External physical connection between the eNB or the eNB emulator and the gNB-CU is out of scope of this specification
Figure 2-7a shows the test setup for F1 interoperability testing with the gNB consisting of DUTs gNB-CU, gNB-DU and their connections to the above listed active stimulus testing tools.
Figure 2-7a: F1 IOT setup
Figure 2-8 shows the test setup for Xn interoperability testing with the gNBs (DUTs) and their connections to the above listed active stimulus testing tools.
Figure 2-8: Xn IOT setup
Connecting the Test UEs and/or UEs emulator to the eNB, en-gNB and gNB through the radio interface can be rather complex to setup and configure (particularly with Massive MIMO antennas in FR1 and FR2).
Given that the objective of this test specification is to validate the interoperability between the radio access network nodes over the X2, F1 and Xn interface and protocols, the test setup can be simplified if there can be alternative means of connecting the Test UEs and/or UEs emulator to the DUTs namely the eNB, en-gNB and gNB in the various interoperability test setups.
For X2 interoperability testing, in the case where the en-gNB (DUT) implements the 3GPP F1 split architecture, the en-gNB entity which is connected to the eNB over the X2 interface operates the O-CU-CP and O-CU-UP functions. The test setup can be simplified by connecting the UE emulator to the en-gNB (functionality corresponding to the O-CU-CP and O-CU-UP) through the O-DU & O-RU emulator over cabled (ethernet) connection. The O-DU & O-RU emulator belong to the en-gNB functionality in this test setup. Refer to [4] for the definition of the O-CU-CP, O-CU-UP, O-DU and O-RU.
O-DU & O-RU emulator: used to terminate stateful F1 sessions with the en-gNB (DUT) in the X2 interoperability test setup:
Simplify test setup by connecting the Test UEs and/or UEs emulator to the en-gNB (functionality corresponding to the O-CU-CP and O-CU-UP)
External physical connection between the O-DU & O-RU emulator and the en-gNB is out of scope of this specification
Figure 2-9 shows the test setup for eNB, en-gNB and their connections to the above listed active stimulus testing tools now including the O-DU and O-RU emulator connected to the en-gNB (DUT).
Figure 2-9: IOT setup with en-gNB configured with 3GPP F1 split
For Xn interoperability testing, in the case where one or both of the gNBs (DUT) implement(s) the 3GPP F1 split architecture, the gNB(s) operate(s) the O-CU-CP and O-CU-UP functions. The test setup can be simplified by connecting the UEs emulator to the gNB(s) (functionality corresponding to the O-CU-CP and O-CU-UP) through the O-DU & O-RU emulator over cabled (ethernet) connection. The O-DU & O-RU emulator belong to the gNB functionality in this test setup. Refer to [4] for the definition of the O-CU-CP, O-CU-UP, O-DU and O-RU.
O-DU & O-RU emulator: used to terminate stateful F1 sessions with the gNB(s) (DUT) in the Xn interoperability test setup:
Simplify test setup by connecting the Test UEs and/or UEs emulator to the gNB(s) (functionality corresponding to the O-CU-CP and O-CU-UP)
External physical connection between the O-DU & O-RU emulator and the gNB(s) is out of scope of this specification
Figure 2-10 shows the test setup for gNBs and their connections to the above listed active stimulus testing tools now including the O-DU & O-RU emulator connected to one of the gNBs (DUT) which has implemented the 3GPP F1 split architecture. In the case that both gNBs (DUTs) implement the 3GPP F1 split architecture, then the O-DU & O-RU emulator can be connected to both the gNBs (DUTs).
Figure 2-10: Xn IOT setup with one of the gNBs configured with 3GPP F1 split
For X2 and F1 interoperability testing, in the case where the en-gNB (DUT) implements the O-RAN Open Fronthaul (OFH) split architecture [5], the en-gNB operates the functionality corresponding to the O-CU-CP, O-CU-UP, O-DU and O-RU network functions. The test setup can be simplified by connecting the UEs emulator to the en-gNB (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU) through the O-RU emulator over cabled (ethernet) connection. The O-RU emulator belongs to the en-gNB functionality in this test setup. Refer to [4] for the definition of the O-CU-CP, O-CU-UP, O-DU and O-RU.
For X2 interoperability testing, in the case where the eNB (DUT) implements the O-RAN Open Fronthaul (OFH) split architecture [5], the eNB operates the functionality corresponding to the O-CU-CP, O-CU-UP, O-DU and O-RU network functions. The test setup can be simplified by connecting the UEs emulator to the eNB (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU) through the O-RU emulator over cabled (ethernet) connection. The O-RU emulator belongs to the eNB functionality in this test setup.
For Xn interoperability testing, in the case where one or more of the gNBs (DUT) implements the O-RAN Open Fronthaul (OFH) split architecture [5], the gNB(s) operates the functionality corresponding to the O-CU-CP, O-CU-UP, O-DU and O-RU network functions. The test setup can be simplified by connecting the UEs emulator to the gNB(s) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU) through the O-RU emulator over cabled (ethernet) connection. The O-RU emulator belongs to the gNB(s) functionality in this test setup.
O-RU emulator: used to terminate stateful O-RAN WG4 OFH sessions with the en-gNB, eNB and/or gNB(s) (DUTs) in the X2, F1 and Xn interoperability test setups:
Simplify test setup by connecting the Test UEs and/or UEs emulator to the en-gNB, eNB and/or the gNB(s) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU)
External physical connection between the O-RU emulator and the en-gNB, eNB and/or gNB(s) is out of scope of this specification
Figure 2-11 shows the test setup for X2 interoperability testing with the eNB, en-gNB and their connections to the above listed active stimulus testing tools now including the O-RU emulator connected to the en-gNB (DUT) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU). The O-RU emulator belongs to the en-gNB functionality in this test setup.
Figure 2-11: X2 IOT setup with en-gNB configured with O-RAN OFH split
Figure 2-12 shows the test setup for F1 interoperability testing with the en-gNB consisting of DUTs gNB-CU, gNB-DU and their connections to the above listed active stimulus testing tools now including the O-RU emulator connected to the en-gNB (DUT) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU). The O-RU emulator belongs to the en-gNB functionality in this test setup.
Figure 2-12: F1 IOT setup with en-gNB configured with O-RAN split
Figure 2-12a shows the test setup for F1 interoperability testing with the gNB consisting of DUTs gNB-CU, gNB-DU and their connections to the above listed active stimulus testing tools now including the O-RU emulator connected to the gNB (DUT) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU). The O-RU emulator belongs to the gNB functionality in this test setup.
Figure 2-12a: F1 IOT setup with gNB configured with O-RAN split
Figure 2-13 shows the test setup for Xn interoperability testing with the gNBs and their connections to the above listed active stimulus testing tools now including the O-RU emulator connected to the gNB(s) (DUT) (functionality corresponding to the O-CU-CP, O-CU-UP and O-DU). In the case that both the gNBs (DUTs) have implemented the O-RAN OFH, then the O-RU emulator can be connected to both the gNBs (DUTs). The O-RU emulator belongs to the gNB functionality in this test setup.
Figure 2-13: Xn IOT setup with one of the gNBs configured with O-RAN OFH split
Passive monitoring and measurements testing tools
Protocol Analyzer: used for protocol analysis and measurements of X2 and Xn interfaces C-Plane and U-Plane protocols; S1-U and NG-U interface protocols, and F1 interface C-Plane and U-Plane protocols:
Test case validation and troubleshooting purposes which can help with test setup validation and root cause analysis for test cases which fail
Monitoring traffic from the X2, F1, Xn, S1-U and NG-U interfaces typically through a tap or span port. Taps are typically preferred as span ports are less reliable but can be used if taps are not readily available in the test lab. Connectivity specifics (eg, number of 10/25/40/100 GE) is out of scope of this specification
Note that if IPsec encryption (non-Null) is applied to the X2, F1, Xn, S1-U and NG-U interfaces, the Protocol Analyzer cannot be used to reliably analyze the procedures and protocols exchanged over these interfaces. Decryption of IPsec protected traffic for lab testing purpose can be possible but processing intensive particularly when dealing with dynamic security parameters
Test UEs logging tool and/or UEs emulator: used to produce measurements and logs:
Measurements and KPIs logs for test case validation and reporting
Diagnostics logs for troubleshooting purposes which can help with test setup validation and root cause analysis for failed test cases
Diagnostics mode must be enabled on the Test UEs for diagnostic logging purposes. Device logging tools must be connected to the Test UEs for logging purposes
UEs used for testing can be simpler to setup but given that these Test UEs are designed as commercial UEs, they are limited in terms of diagnostic logging capabilities due to limited processing and buffer space
UEs emulator can be used in test scenarios which require extensive diagnostics capabilities
Test results and KPIs reporting which can be provided through one or more of these options:
UE logging tools which are connected to the Test UEs
UEs emulator reporting dashboards typically built in as part of the UEs emulator solution
External dashboard and reporting applications
Figure 2-14 shows the test setup for X2 interoperability testing with Passive measurements tools indicated.
Figure 2-14: X2 IOT setup with Passive measurements tools
Figure 2-15 shows the test setup for F1 interoperability testing with Passive measurements tools indicated for en-gNB scenarios.
Figure 2-15: F1 IOT setup with Passive measurements tools
Figure 2-15a shows the test setup for F1 interoperability testing with Passive measurements tools indicated for gNB scenarios.
Figure 2-15a: F1 IOT setup with Passive measurements tools gNB
Figure 2-16 shows the test setup for Xn interoperability testing with Passive measurements tools indicated.
Figure 2-16: Xn IOT setup with Passive measurements tools
2.1.1.3 	Assumptions
In this version of the specification, the following assumptions apply:
Management Plane - DUTs are in service and running in normal operating state. M-Plane interactions between the DUTs and Service Management and Orchestration (SMO) are out of scope in this version of the specification.
Synchronization Plane - all the components including the DUTs and the Testing Tools are required to be synchronized to a common system time and master time source unless otherwise stated. S-Plane test setup details are out of scope in this version of the specification.
Transport Plane – transport aspects between the DUTs and between the DUTs to the Test Equipment are out of scope in this version of the specification, but the WG5 Transport Specification [6] can be used as a reference. Examples of transport aspects include Physical Connectivity Interface (eg, connectivity rates), Data Link Layer Interface (layer 2 eg, VLAN, QoS marking), Network Layer Interface (layer 3 eg, IP version), (layer 4 eg, SCTP), Security (eg, IPsec).
All wireline transport interfaces conform to ideal conditions (no impairments).
All wireless connections (air interface) conform to ideal conditions (no impairments) unless otherwise stated in test cases which may have requirements to impair the wireless connections in order to stimulate handover scenarios for example.
All wireless connections which conform to ideal conditions (no impairments) and adopt 3GPP approaches for “ideal” RF environment test setup.
All DUTs comply with the same version or compatible versions of the O-RAN WG5 C-Plane [2] and U-Plane [3] profiles.
All elements in the interoperability test and the supporting test environment, where 3GPP support is relevant, comply with the same version or compatible versions of the 3GPP Specifications.
2.1.1.4 	Specifications to be used for testing
In this version of the specification, the following sets of specifications and releases/versions shall be supported
O-RAN WG5:
NR C-Plane profile [2]
NR U-Plane profile [3]
3GPP
3GPP Release and Version as listed in O-RAN WG5 NR C-Plane [2] and U-Plane [3] profiles specifications. It is important to ensure that all DUTs and Testing Tools use compatible release/version of the 3GPP specifications.
2.1.1.5 	Standard Test Configuration
Most interoperability tests will use a standard test configuration although individual tests are expected to deviate from this in some way. By defining the standard test configuration, an understanding of how the test setup is configured can be gained, thereafter examining individual tests can reveal the specific deviations from the standard test configuration and these specific deviations will be specified in each of the test cases
The standard test setup involves a single DUT NE1 and a single DUT NE2 with DUT NE1 and DUT NE2 as specified in Table 2-1 in accordance with the interoperability test interfaces. Test cases which require more than a single DUT NE1 or DUT NE2 will specify the number of DUT NE1 and DUT NE2 required as part of the test case.
IPsec encryption of the interface(s) under test is optional. If IPsec encryption with non-NULL encryption is enabled as part of the test setup, it would not be possible to perform test verification using the Protocol Analyzer without the Protocol Analyzer performing IPsec decryption. Details about IPsec decryption is out of scope of this specification.
2.2 	X2 Interoperability Test Cases
The following set of X2 IOT cases are defined in this version of the specification.
Table 2-3: IOT Test Cases for X2 implemented in accordance with the NR C-Plane [2] profile
Table 2-4: IOT Test Cases for X2 implemented in accordance with the NR U-Plane [3] profile
The initial test conditions which are common to all X2 test cases are listed below while the test case specific deviations of the initial test conditions will be specified in each of the test cases:
eNB(s) and en-gNB(s) are running in normal operating state
eNB(s) and en-gNB(s) are physically and logically connected
Core or Core emulator (EPC with EN-DC capabilities) is physically connected to eNB(s) and en-gNB(s)
S1 Setup procedure specified in 3GPP TS 36.413 [7] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the X2 and S1-U link(s)
2.2.1 	X2 C-Plane IOT Test Cases
2.2.1.1 	EN-DC X2 Setup (eNB initiated)
2.2.1.1.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated EN-DC X2 Setup procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.1.1.
2.2.1.1.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.1.3 	Initial Conditions
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.2.1.1.4 	Procedures
Initiate the EN-DC X2 Setup procedure in MN (eNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
O&M command in eNB to enable X2 interface
Observe the Protocol Analyzer X2 logs.
2.2.1.1.5 	Expected Results and Log Observation
2.2.1.1.5.1 Expected Results
The EN-DC X2 Setup procedure is successfully completed.
2.2.1.1.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.1.1.1/4.1.1.1.2.
2.2.1.2 	EN-DC X2 Setup (en-gNB initiated)
2.2.1.2.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated EN-DC X2 Setup procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.1.2.
2.2.1.2.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.1.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.2.3 	Initial Conditions
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.2.1.2.4 	Procedures
Initiate the EN-DC X2 Setup procedure in SN (en-gNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
O&M command in en-gNB to enable X2 interface
Observe the Protocol Analyzer X2 logs.
2.2.1.2.5 	Expected Results and Log Observation
2.2.1.2.5.1 Expected Results
The EN-DC X2 Setup procedure is successfully completed.
2.2.1.2.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.1.2.1/4.1.1.2.2.
2.2.1.3 	Reset (eNB initiated)
2.2.1.3.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Reset procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.1.
2.2.1.3.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2-C procedural flows and content
2.2.1.3.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.3.4 	Procedures
Initiate the X2 Reset procedure in MN (eNB).
A few examples of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
O&M command in eNB to enable X2 interface
Stimulate transport failure. One of the possible methods can be to disconnect and re-connect the X2 physical link at the eNB end in order to stimulate momentary transport link disruption between the eNB and en-gNB. This should trigger the X2 procedure to be sent from the eNB to the en-gNB
Observe the Protocol Analyzer X2 link logs.
2.2.1.3.5 	Expected Results and Log Observation
2.2.1.3.5.1 Expected Results
The Reset (eNB initiated) procedure is successfully completed.
2.2.1.3.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.2.1.1/4.1.2.1.2.
The test result shall be determined as Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “RESET RESPONSE”
2.2.1.4 	Reset (en-gNB initiated)
2.2.1.4.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Reset procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.2.
2.2.1.4.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2-C procedural flows and content
2.2.1.4.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.4.4 	Procedures
Initiate the X2 Reset procedure in SN (en-gNB).
A few examples of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
O&M command in en-gNB to enable X2 interface
Stimulate transport failure. One of the possible methods can be to disconnect and re-connect the X2 physical link at the en-gNB end in order to stimulate momentary transport link disruption between the eNB and en-gNB. This should trigger the X2 procedure to be sent from the en-gNB to the eNB
Observe the Protocol Analyzer X2 link logs.
2.2.1.4.5 	Expected Results and Log Observation
2.2.1.4.5.1 Expected Results
The Reset (en-gNB initiated) procedure is successfully completed.
2.2.1.4.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.2.2.1/4.1.2.2.2.
The test result is determined as Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “RESET RESPONSE”
2.2.1.5 	Partial Reset (MeNB initiated)
2.2.1.5.1 	Test Purpose
The purpose of this test case is to verify that the MeNB initiated Partial Reset procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.1.
2.2.1.5.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.5.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
At least one UE context exists in en-gNB
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell and Secondary Node Addition procedure has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.5.4 	Procedures
Perform the MeNB initiated Partial Reset procedure for a part of the Test UEs or emulated UEs.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate partial transport failure. One of the possible methods can be to make use of O&M command in the eNB to disable and re-enable few of the X2 IP addresses in order to stimulate momentary transport link disruption between the eNB and en-gNB. This should trigger the MeNB initiated Partial Reset procedure to be sent from the eNB to the en-gNB
Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs.
2.2.1.5.5 	Expected Results and Log Observation
2.2.1.5.5.1 Expected Results
The MeNB initiated Partial Reset procedure is successfully completed.
The selected UE context(s) is successfully released in the en-gNB and data transfer sessions on the en-gNB side between the Application Test Server and the Test UE or UE emulator are completed.
2.2.1.5.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.4.1.1/4.1.4.1.2.
Logs recorded in the Test UE or UE emulator shows:
After the end of Step 1, Test UE or UE emulator does NOT receive any data which is transmitted from en-gNB
2.2.1.6 	Partial Reset (en-gNB initiated)
2.2.1.6.1 	Test Purpose
The purpose of this test case is to verify that the en-gNB initiated Partial Reset procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.2.
2.2.1.6.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.6.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
At least one UE context exists in MeNB
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] have been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell and Secondary Node Addition procedure has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.6.4 	Procedures
Perform the en-gNB initiated Partial Reset procedure for a part of the Test UEs or emulated UEs.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate partial transport failure. One of the possible methods can be to make use of O&M command in the en-gNB to disable and re-enable few of the X2 IP addresses in order to stimulate momentary transport link disruption between the eNB and en-gNB. This should trigger the en-gNB initiated Partial Reset procedure to be sent from the en-gNB to the eNB.
Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs.
2.2.1.6.5 	Expected Results and Log Observation
2.2.1.6.5.1 Expected Results
The en-gNB initiated Partial Reset procedure is successfully completed.
The selected UE context(s) is successfully released in the MeNB and data transfer sessions on the MeNB side between the Application Test Server and the Test UE or UE emulator are completed.
2.2.1.6.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.4.2.1/4.1.4.2.2.
Logs recorded in the Test UE or UE emulator shows:
After the end of Step 1, Test UE or UE emulator does NOT receive any data which is transmitted from MeNB
2.2.1.7 	Secondary Node Addition (Option 3x)
2.2.1.7.1 	Test Purpose
The purpose of this test case is to verify that the Secondary Node Addition (Option 3x) procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.1.1.
2.2.1.7.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.7.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary node has not yet been added to the Test UE or UE emulator
2.2.1.7.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Addition (Option 3x) procedure. This involves observing that the user plane data forwarded from the eNB to the en-gNB over the X2 interface during the Secondary Node Addition (Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the eNB to start buffering user plane downlink data prior to the addition of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
Perform Secondary Node Addition (Option 3x) procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SgNB Addition Request procedure.
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.7.5 	Expected Results and Log Observation
2.2.1.7.5.1 Expected Results
The Secondary Node Addition (Option 3x) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.7.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.1.1.1/5.1.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs which are:
Forwarded to the Test UE or emulated UE from the eNB towards the en-gNB via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
Transmitted to the Test UE or emulated UE from the en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the en-gNB.
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.8 	Secondary Node Release (MN initiated, Option 3x)
2.2.1.8.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated SgNB Release procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.2.1.
2.2.1.8.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.2.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2-C procedural flows and content
2.2.1.8.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.8.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Release (MN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the en-gNB to the eNB over the X2 interface during the Secondary Node Release (MN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Release Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Provoke a Radio Link Failure in SCG, so MN receives SCG Failure Information NR message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.8.5 	Expected Results and Log Observation
2.2.1.8.5.1 Expected Results
The Secondary Node Release procedure is successfully completed.
All the data generated is correctly received by UE after the release procedure.
2.2.1.8.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.2.1.1/5.2.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 3:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 3:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
2.2.1.9 	Secondary Node Release (SN initiated, Option 3x)
2.2.1.9.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated SgNB Release procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.2.2.
2.2.1.9.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.2.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2-C procedural flows and content
2.2.1.9.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.9.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Release (SN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the en-gNB to the eNB over the X2 interface during the Secondary Node Release (SN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Release Procedure from SN (en-gNB) side.
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Block NR cell in en-gNB. One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell
Provoke conditions in a way that the SN detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SN and the Test UE or UE emulator so that the emulated interference can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.9.5 	Expected Results and Log Observation
2.2.1.9.5.1 Expected Results
The Secondary Node Release procedure is successfully completed.
All the data generated is correctly received by UE after the release procedure.
2.2.1.9.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.2.2.1/5.2.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE CONFIRM”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 3:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 3:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
2.2.1.10 	Secondary Node Change (MN initiated, Option 3x)
2.2.1.10.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated SgNB Change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.3.1.
2.2.1.10.2 	Minimum Requirements
DUTs: Single eNB and two en-gNB (Source en-gNB – S-SN, Target en-gNB – T-SN):
DUTs shall apply the parameter condition specified in 5.3.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 links procedural flows and content, S1-U UP content
2.2.1.10.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.10.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change (MN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the source en-gNB to the eNB and from the eNB to the target en-gNB over the X2 interface during the Secondary Node Change (MN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Change Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Secondary Node Change procedure.
Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after Secondary Node Change.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.10.5 	Expected Results and Log Observation
2.2.1.10.5.1 Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.10.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.3.1.1/5.3.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs which are:
Forwarded to the Test UE or emulated UE from the source en-gNB towards the eNB and from the eNB towards the target en-gNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
Transmitted to the Test UE or emulated UE from the target en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the target en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the target en-gNB
Regarding the downlink U-Plane data generated in step 5:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from target en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 5:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to target en-gNB) is recorded in the X2 logs
2.2.1.11 	Secondary Node Change (SN initiated, Option 3x)
2.2.1.11.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated SgNB Change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.3.2.
2.2.1.11.2 	Minimum Requirements
DUTs: Single eNB and two en-gNB (Source en-gNB – S-SN, Target en-gNB – T-SN):
DUTs shall apply the parameter condition specified in 5.3.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 links procedural flows and content, S1-U UP content
2.2.1.11.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.11.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change (SN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the source en-gNB to the eNB and from the eNB to the target en-gNB over the X2 interface during the Secondary Node Change (SN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Change Procedure from Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Move the Test UE or UE emulator from the coverage area of Source en-gNB cell (S-SN) towards Target en-gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-TN.
Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after Secondary Node Change.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.11.5 	Expected Results and Log Observation
2.2.1.11.5.1 Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.11.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.3.2.1/5.3.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB CHANGE CONFIRM”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs which are:
Forwarded to the Test UE or emulated UE from the source en-gNB towards the eNB and from the eNB towards the target en-gNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
Transmitted to the Test UE or emulated UE from the target en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the target en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the target en-gNB.
Regarding the downlink U-Plane data generated in step 5:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from target en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 5:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to target en-gNB) is recorded in the X2 logs
2.2.1.12 	Inter-Master Node Handover (without SN Change, Option 3x)
2.2.1.12.1 	Test Purpose
The purpose of this test case is to verify that the Inter-Master Node Handover (without SN Change, Option 3x) procedure with two eNBs and en-gNB from different vendors can be successfully completed; conforming to the 3GPP TS 36.423 [12] for X2 Setup and the NR C-Plane profile specification [2] Section 5.4.1.
2.2.1.12.2 	Minimum Requirements
DUTs: Two eNB (Source eNB – S-MN, Target eNB – T-MN) and single en-gNB:
DUTs shall apply the parameter condition specified in 5.4.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Inter-Master Node Handover procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe all three X2 links procedural flows and content
2.2.1.12.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between both the source eNB and en-gNB, and the target eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and en-gNB cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.12.4 	Procedures
Perform Inter-Master Node Handover (without SN Change, Option 3x) procedure from source eNB (S-MN), target eNB (T-MN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
The Test UE or UE emulator sends a Measurement Report to the source eNB (S-MN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source eNB (S-MN) and the target eNB (T-MN) simultaneously. In this specific case, the source eNB (S-MN) cell can start off with low attenuation applied which is subsequently increased. At the same time, the target eNB (T-MN) cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source eNB (S-MN).
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.1.12.5 	Expected Results and Log Observation
2.2.1.12.5.1 Expected Results
The Inter-Master Node Handover (without SN Change, Option 3x) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.12.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer and the Test UE or Emulated UE are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.4.1.1/5.4.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 2:
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 2:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.13 	Master Node to eNB Change
2.2.1.13.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to eNB Change procedure with eNB and en-gNB from different vendors can be successfully completed; conforming the NR C-Plane profile specification [2] Section 5.5.1.
2.2.1.13.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.5.1 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell (S-MN), Target eNB cell (T-MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Master Node to eNB Change procedure
Target eNB or Target eNB emulator: used to perform Master Node to eNB Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content and, S1-U UP content
2.2.1.13.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB or target eNB emulator specified in 3GPP TS 36.423 [12] has been successfully completed
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and SN cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Then SCG configuration query has been completed if needed
2.2.1.13.4 	Procedures
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Master Node to eNB Change procedure. This involves observing that the user plane data forwarded from the en-gNB to the source eNB over the X2 interface during the Master Node to eNB Change procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
Perform the Master Node to eNB Change Procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
The handover to Target eNB is decided by the Master Node based on the Measurement Report sent from the Test UE or UE emulator. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and Master Node cell and the eNB cell simultaneously. In this specific case, the Master Node cell can start off with low attenuation applied which is subsequently increased. At the same time, the eNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Master Node to eNB Change procedure.
Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after the Master Node to eNB Change.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during MCG Bearer(s) operation. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.13.5 	Expected Results and Log Observation
2.2.1.13.5.1 Expected Results
The Master Node to eNB Change Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.13.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.5.1.1/5.5.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to source eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the downlink U-Plane data generated in step 5:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 5:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT is recorded in the S1 logs
2.2.1.14 	PCell change (Intra MN) (MN initiated)
2.2.1.14.1 	Test Purpose
The purpose of this test case is to verify that the PCell change (Intra MN) (MN initiated) procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.1.
2.2.1.14.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.1 of the NR C-Plane profile specification [2]
eNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PCell change (Intra MN) (MN initiated) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.14.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB Source cell and SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.14.4 	Procedures
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform PCell change (Intra MN) procedure on the MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MN Source Cell and the Target Cell simultaneously. In this specific case, the MN Source Cell can start off with low attenuation applied which is subsequently increased. At the same time, the Target Cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the handover from the Source Cell to the Target Cell.
Observe that data transfer between the Application Test Server and the Test UE or UE emulator is ongoing after PCell change (Intra MN) procedure.
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.14.5 	Expected Results and Log Observation
2.2.1.14.5.1 Expected Results
The PCell change (Intra MN) (MN initiated) procedure is successfully completed and data transfer sessions between the Application Test Server and the Test UE or UE emulator are not interrupted throughout the test case execution.
2.2.1.14.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.6.1.1/5.6.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected by the MeNB” in “SGNB RECONFIGURATION COMPLETE”
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data after Step 2 and generated in Step 5:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data after Step 2 and generated in Step 5:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.15 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option
2.2.1.15.1 	Test Purpose
The purpose of this test case is to verify that the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.15.
2.2.1.15.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.15 of NR C-Plane profile specification [2]
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.15.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.15.4 	Procedures
Perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
The condition by which UE sends an ULInformationTransferMRDC message to the MN depends on the configuration done by MN. Still, we can create a situation where PSCell Change occurs. There should be at least two en-gNB cells within the coverage of a cell under eNB. The first cell under en-gNB which is PSCell and the second cell under en-gNB which is not PSCell. If the tester manually degrades the radio quality of the first en-gNB cell this can be the trigger of the PSCell Change procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first en-gNB cell. In this specific case, the first en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the PSCell Change procedure.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.1.15.5 	Expected Results and Log Observation
2.2.1.15.5.1 Expected Results
The PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.15.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.6.15.1/5.6.15.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 2:
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 2:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.16 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option
2.2.1.16.1 	Test Purpose
The purpose of this test case is to verify that the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.16.
2.2.1.16.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.16 of NR C-Plane profile specification [2]
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.1.16.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.16.4 	Procedures
Perform PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
The condition by which UE sends an ULInformationTransferMRDC message to the MN depends on the configuration done by MN. Still, we can create a situation where PSCell Change occurs. There should be at least two en-gNB cells within the coverage of a cell under eNB. The first cell under en-gNB which is PSCell and the second cell under en-gNB which is not PSCell. If the tester manually degrades the radio quality of the first en-gNB cell, this can be the trigger of the PSCell Change procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first en-gNB cell. In this specific case, the first en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the PSCell Change procedure.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data) or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.1.16.5 	Expected Results and Log Observation
2.2.1.16.5.1 Expected Results
The PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.16.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.6.16.1/5.6.16.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 2:
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 2:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.17 	Served NR cell information Update (en-gNB initiated)
2.2.13.17.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Served NR cell Update procedure, with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.3.1.
2.2.1.17.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.3.1 of the NR C-Plane profile specification [2]
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2-C procedural flows and content
2.2.1.17.3 	Initial Conditions
Refer to Section 2.1.2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.17.4 	Procedure
Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Delete.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell failure. One of the possible methods can be to make use of O&M command in the en-gNB in order to make one of en-gNB cell failure status
Perform a procedure to observe that the en-gNB cell deleted in step 1 is not enabled for EN-DC PSCell or SCell.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell performing as PSCell and the en-gNB cell deleted in step 1 simultaneously. In this specific case, the en-gNB cell performing as PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the en-gNB cell deleted in step 1 can start off with high attenuation applied which is subsequently lowered to a level which can trigger PSCell Change procedure.
Note that although PSCell Change procedure is listed as an example in this step, it does not mean this test case verifies correct PSCell Change procedure (The test case of PSCell Change procedure is specified in 2.2.1.15 and 2.2.1.16 in this specification).
Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Add.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the en-gNB in order to make the en-gNB cell deleted in step 1 recover from failure status
Perform a procedure to observe that the en-gNB cell added in step 3 is enabled for EN-DC PSCell or SCell.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell performing as PSCell and the en-gNB cell added in step 3 simultaneously. In this specific case, the en-gNB cell performing as PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the en-gNB cell added in step 3 can start off with high attenuation applied which is subsequently lowered to a level which can trigger PSCell Change procedure.
In case that PSCell is not configured to test UE or UE emulator after step 2, to trigger Secondary Node addition procedure in order to configure the en-gNB cell recovered in step 3 as PSCell
Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Modify.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
NR PCI information of the en-gNB cell is changed. One of the possible methods can be to make use of O&M command in the en-gNB in order to change the NR PCI
Perform a procedure to observe the information modified in step 5.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
In case that NR PCI information of the en-gNB cell is changed in step 5, to make test UE or UE emulator send Measurement Report including NR PCI information of the en-gNB cell.
Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs.
2.2.1.17.5 	Expected Results and Log Observation
2.2.1.17.5.1 Expected Results
The Served NR cell information Update (en-gNB initiated) is successfully completed in each case, ie, to Add, to Modify, and to Delete case.
2.2.1.17.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.3.1.1/4.1.3.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “EN-DC CONFIGURATION UPDATE ACKNOWLEDGE”
Test UE or UE emulator logs show that:
In step 2, the en-gNB cell deleted in step 1 is not enabled for EN-DC PSCell or SCell
In step 4, the en-gNB cell added in step 3 is enabled for EN-DC PSCell or SCell
In step 6, the information modified in step 5 is included
2.2.1.18 	Security Key Change (MN initiated)
2.2.1.18.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Security Key Change procedure, with MN (eNB) and SN (en-gNB) from different vendors, can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.5.
2.2.1.18.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.5 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform MN initiated Security Key Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.18.3 	Initial Conditions
Refer to Section 2.1.2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.18.4 	Procedure
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform Security Key Change procedure (MN initiated).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Perform PCell Change (Intra MN) (MN initiated) procedure (See step 2 in 2.2.1.14.4)
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Security Key Change procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.18.5 	Expected Results and Log Observation
2.2.1.18.5.1 Expected Results
The Security Key Change procedure (MN initiated) is successfully completed.
2.2.1.18.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.5.1/5.6.5.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
S1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in UE:
An example of how to observe the updated security key is to check UE emulator log. The exact method to observer the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data which is recorded in the S1 logs, but is not recorded in X2 logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE via LTE RAT or NR RAT.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
2.2.1.19 	Measurement Gap Coordination Procedure (MN initiated)
2.2.1.19.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination Procedure (MN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 5.6.6.
2.2.1.19.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.6 of NR C-plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination Procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.19.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or service request procedure specified in 3GPP TS 23.401 [7] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-plane profile specification [2]
2.2.1.19.4 	Procedures
Perform Measurement Gap Coordination Procedure (MN initiated).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
An eNB receives Measurement Report from UE
Observe the Protocol Analyzer X2 logs.
2.2.1.19.5 	Expected Results and Log observation
2.2.1.19.5.1 Expected Results
The Measurement Gap Coordination Procedure (MN initiated) is successfully completed.
2.2.1.19.5.2 Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-plane profile specification [2] sections 5.6.6.1/5.6.6.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
2.2.1.20 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
2.2.1.20.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 5.6.7.
2.2.1.20.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.7 of NR C-plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.20.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-plane profile specification [2]
2.2.1.20.4 	Procedures
Perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
An en-gNB receive X2AP: RRC TRANSFER as specified in 5.7.1 of NR C-plane profile specification [2]
Observe the Protocol Analyzer X2 logs
2.2.1.20.5 	Expected Results and Log observation
2.2.1.20.5.1 Expected Results
The Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) is successfully completed.
2.2.1.20.5.2 Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-plane profile specification [2] sections 5.6.7.1/5.6.7.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
2.2.1.21 	Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)
2.2.1.21.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 5.6.8.
2.2.1.21.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.8 of NR C-plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.21.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-plane profile specification [2]
2.2.1.21.4 	Procedures
Perform Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
An en-gNB receives X2AP: RRC TRANSFER as specified in 5.7.1 of NR C-plane profile specification [2]
Observe the Protocol Analyzer X2 logs
2.2.1.21.5 	Expected Results and Log observation
2.2.1.21.5.1 Expected Results
The Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated) is successfully completed.
2.2.1.21.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-plane profile specification [2] sections 5.6.8.1/5.6.8.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
2.2.1.22 	UL Configuration Update Procedure (SN initiated)
2.2.1.22.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated UL Configuration Update procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 5.6.9.
2.2.1.22.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.9 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.22.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.22.4 	Procedure
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Perform UL Configuration Update procedure (SN initiated) for the purpose of changing from share to only of the UL Configuration IE.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. One of the possible methods can be to degrade the radio quality of the en-gNB cell. And to make use of O&M command in SN side to change from share to only of the UL configuration IE.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.22.5 	Expected Results and Log Observation
2.2.1.22.5.1 Expected Results
The UL Configuration Update Procedure (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.22.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.9.1/5.6.9.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION COFIRM”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT and NR RAT.
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow for “UL Configuration Update Procedure (SN initiated)” is specified in the NR C-plane profile specification [2] sections 5.6.9.1/5.6.9.2.
2.2.1.23 	Addition of SN terminated split bearer (MN initiated)
2.2.1.23.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform addition of SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.10.
2.2.1.23.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.10 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.23.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer or SN terminated SCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.23.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data transferring function operates correctly during the Secondary Node Modification (MN Initiated, addition of SN terminated split bearer) procedure. This involves observing that the user plane data transferred from the eNB to the en-gNB over the X2 interface during the Secondary Node Modification (MN Initiated, addition of SN terminated split bearer) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
Perform Secondary Node Modification with addition of SN terminated split bearer procedure from MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
Trigger from Core or Core emulator (EPC with EN-DC capabilities) to add a new E-RAB for this Test UE or UE emulator
Stop data transfer from the Application Test Server to the Test UE or UE emulator
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds on the new bearer
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly on the new established SN terminated split bearer in above step 2. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.23.5 	Expected Results and Log Observation
2.2.1.23.5.1 Expected Results
The Secondary Node Modification procedure (MN initiated) with addition of SN terminated split bearer procedure is successfully completed.
2.2.1.23.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.10.1/5.6.10.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from eNB to en-gNB) is correctly received by the Test UE or UE emulator via LTE RAT
Forwarded to the Test UE or emulated UE from the eNB towards the en-gNB via their corresponding established DL Forwarding GTP Tunnels if data forward is used, is correctly received by the Test UE or emulated UE via the NR RAT
Transmitted to the Test UE or emulated UE from the en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the en-gNB.
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow and IEs for “Addition of SN terminated split bearer (MN initiated) – X2 message flow, successful operation” are specified in the NR C-plane profile specification [2] sections 5.6.10.1/5.6.10.2.
2.2.1.24 	Removal of SN terminated split bearer (MN initiated)
2.2.1.24.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform removal of SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.11.
2.2.1.24.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.11 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.24.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition with multiple SN terminated bearers, including at least one SN terminated split bearer procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.24.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data transferring function operates correctly during the Secondary Node Modification (MN Initiated, Removal of SN terminated split bearer) procedure. This involves observing that the user plane data transferred between the en-gNB to the eNB over the X2 interface during the Secondary Node Modification (MN Initiated, Removal of SN terminated split bearer) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
Perform Secondary Node Modification with removal of SN terminated split bearer from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Trigger from Core or Core emulator (EPC with EN-DC capabilities) to delete the E-RAB bearer on the established with split bearer for this Test UE or UE emulator.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds on the remained bearer.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after removal of Split Bearer(s) operation with Secondary Node Modification procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.24.5 	Expected Results and Log Observation
2.2.1.24.5.1 Expected Results
The Secondary Node Modification procedure (MN initiated) with removal of SN terminated split bearer procedure is successfully completed.
2.2.1.23.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.11.1/5.6.11.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT in case of EN-DC operation with SN terminated split bearer
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs in case of EN-DC operation with SN terminated split bearer
The message flow and IEs for “Removal of SN terminated split bearer (MN initiated) – X2 message flow, successful operation” are specified in the NR C-plane profile specification [2] sections 5.6.11.1/5.6.11.2.
2.2.1.25 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated)
2.2.1.25.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated split bearer to SN terminated MCG bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.12.
2.2.1.25.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.12 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.25.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.25.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer. It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform Secondary Node Modification procedure from MN (eNB) side to trigger the bearer type change from SN terminated split bearer to SN terminated MCG bearer.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell (SN) can start off with low attenuation applied which is subsequently increased to a level in case of the eNB cell (MN) without changes to trigger Secondary Node Modification procedure.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.25.5 	Expected Results and Log Observation
2.2.1.25.5.1 Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.25.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.12.1/5.6.12.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow and IEs for “Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated) – X2 message flow, successful operation” are specified the NR C-plane profile specification [2] sections 5.6.12.1/5.6.12.2.
2.2.1.26 	Bearer type change from SN terminated MCG bearer to SN terminated split bearer (MN initiated)
2.2.1.26.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated MCG bearer to SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.13.
2.2.1.26.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.13 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.26.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated MCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible via the LTE
2.2.1.26.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer (MN initiated). It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform Secondary Node Modification procedure from MN (eNB) side to trigger the bearer type change from SN terminated MCG bearer to SN terminated split bearer.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with high attenuation applied which is subsequently reduced to a level in case of the eNB cell (MN) without changes to trigger Secondary Node Modification procedure.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.26.5 	Expected Results and Log Observation
2.2.1.26.5.1 Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.25.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.13.1/5.6.13.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow and IEs for “Bearer type change from SN terminated MCG bearer to SN terminated split bearer (MN initiated) – X2 message flow, successful operation” are specified in the NR C-plane profile specification [2] sections 5.6.13.1/5.6.13.2.
2.2.1.27 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated)
2.2.1.27.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated split bearer to SN terminated MCG bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.14.
2.2.1.27.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.14 of the NR C-plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.27.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.27.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer (SN initiated). It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform Secondary Node Modification procedure from SN (en-gNB) side to trigger the bearer type change from SN terminated split bearer to SN terminated MCG bearer.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Block the en-gNB cell (SN). One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.27.5 	Expected Results and Log Observation
2.2.1.27.5.1 Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.27.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.6.14.1/5.6.14.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow and IEs for “Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated) – X2 message flow, successful operation” are specified in the NR C-plane profile specification [2] sections 5.6.14.1/5.6.14.2.
2.2.1.28 	E-UTRA - NR Cell Resource Coordination (MN initiated, Option 3x/3a)
2.2.1.28.1 	Test Purpose
The purpose of this test case is to verify that the E-UTRA - NR Cell Resource Coordination procedure from MN (eNB) side to request the exchange the DSS information between MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.8.1.
2.2.1.28.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.8.1 of the NR C-plane profile specification [2]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
The MN (eNB) cell and SN (en-gNB) cell are same frequency band
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.28.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Enable the Dynamic Spectrum Sharing in MN (eNB) cell and SN (en-gNB) cell
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer or SN terminated SCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.28.4 	Procedure
Perform data transfer in the downlink or uplink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly for SN terminated split bearer or SN terminated SCG bearer.
Perform the E-UTRA - NR Cell Resource Coordination procedure from MN (eNB) side to trigger the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Increase the load of eNB cell (MN), eg, using more Test UE or UE emulator to send/receive traffic. The MN (eNB) requests more resources from SN (en-gNB) to serve the Test UE or UE emulator via LTE RAT.
Stop data transfer in the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly on previous bearer after step 2. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.28.5 	Expected Results and Log Observation
2.2.1.28.5.1 Expected Results
The E-UTRA - NR Cell Resource Coordination procedure (MN initiated) with the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum executed successfully, and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.27.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.8.1.1/5.8.1.2.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the U-Plane data generated in step 1 and step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT in case of EN-DC operation with SN terminated split bearer
The message flow and IEs for “E-UTRA - NR Cell Resource Coordination (MN initiated, Option 3x/3a)” are specified in the NR C-plane profile specification [2] sections 5.8.1.1/5.8.1.2.
2.2.1.29 	E-UTRA - NR Cell Resource Coordination (SN initiated, Option 3x/3a)
2.2.1.29.1 	Test Purpose
The purpose of this test case is to verify that the E-UTRA - NR Cell Resource Coordination procedure from SN (en-gNB) side to request the exchange the DSS information between MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.8.2.
2.2.1.29.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.8.2 of the NR C-plane profile specification [2]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
The MN (eNB) cell and SN (en-gNB) cell are same frequency band
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.29.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Enable the Dynamic Spectrum Sharing in MN (eNB) cell and SN (en-gNB) cell
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer or SN terminated SCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.29.4 	Procedure
Perform data transfer in the downlink or uplink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly for SN terminated split bearer or SN terminated SCG bearer.
Perform the E-UTRA - NR Cell Resource Coordination procedure from SN (en-gNB) side to trigger the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Increase the load of en-gNB cell (SN), eg, using more Test UE or UE emulator to send/receive traffic. The SN (en-gNB) requests more resources from MN (eNB) to serve the Test UE or UE emulator via NR RAT.
Stop data transfer in the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly on the previous bearer after step 2. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.29.5 	Expected Results and Log Observation
2.2.1.29.5.1 Expected Results
The E-UTRA - NR Cell Resource Coordination procedure (SN initiated) with the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum executed successfully, and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.29.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-plane profile specification [2] sections 5.8.2.1/5.8.2.2.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the U-Plane data generated in step 1 and step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT in case of EN-DC operation with SN terminated split bearer
The message flow and IEs for “E-UTRA - NR Cell Resource Coordination (SN initiated, Option 3x/3a)” are specified in the NR C-plane profile specification [2] sections 5.8.2.1/5.8.2.2.
2.2.2 	X2 U-Plane IOT Test Cases
2.2.2.1 	Node behaviour of the corresponding node
2.2.2.1.1 	Test Purpose
The purpose of this test case is to verify that the behavior of the corresponding node procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
2.2.2.1.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.1.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transmission has not been performed via the NR RAT, eg, keeping Option 3x with NR radio quality low enough
Note: This test case is used to verify that the eNB does not discard any of its buffered packets in events such as Radio Link Outage over the LTE RAT unless it receives discard indication from the higher layers or from the en-gNB hosting NR PDCP, such as the buffer discard indication from the en-gNB. This initial condition ensures that en-gNB does not send the buffer discard indication to the eNB.
2.2.2.1.4 	Procedures
Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for eNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to eNB vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Trigger radio link outage on the LTE RAT.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
Trigger radio link resume on the LTE RAT.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To move the Test UE or UE emulator back within the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.1.5 	Expected Results and Log Observation
2.2.2.1.5.1 Expected Results
The behavior of eNB is align with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.2.2.1.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
eNB sends DL DATA DELIVERY STATUS (DDDS) message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to en-gNB after step 2
eNB sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to en-gNB after step 3
Note: these are to confirm if the Radio Link Outage operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from eNB in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from eNB before triggering Radio Link Outage in step 1
2.2.2.2 	General for Elements for the NR user plane protocols
2.2.2.2.1 	Test Purpose
The purpose of this test case is to verify that the general behavior with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.2.2.2.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the X2 link
2.2.2.2.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the X2 link between the eNB and en-gNB
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Data transmission has not been performed via the LTE RAT
Note: the intention of this is to make a condition where any of the optional fields in DDDS has no available value.
2.2.2.2.4 	Procedures
Trigger Secondary Node Addition procedure.
Note: the intention of this step is to have the eNB send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
Perform data transfer from the Application Test Server to the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
After the Application Test Server starts to transmit downlink data, drop some packets sent from the en-gNB to eNB via X2 link by using the Network Impairment Emulator inserted in-line in the X2 link.
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
Trigger the en-gNB to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to eNB.
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Trigger radio link outage condition in the eNB at least once.
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
To gradually move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
Stop scheduling in the eNB.
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.2.5 	Expected Results and Log Observation
2.2.2.2.5.1 Expected Results
The behavior of eNB and en-gNB is align with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.2.2.2.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs captured during step 1 have the following IEs with the value ‘0’:
Highest Transmitted NR PDCP SN Ind IE
Highest Delivered NR PDCP SN Ind IE
Final Frame Indication IE
Lost Packet Report IE
Highest Retransmitted NR PDCP SN Ind IE
Highest Delivered Retransmitted NR PDCP SN Ind IE
Cause Report IE
One or more DDDSs captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
Highest Transmitted NR PDCP SN Ind IE
Highest Delivered NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
Highest Retransmitted NR PDCP SN Ind IE
Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
2.2.2.3 	Report Polling
2.2.2.3.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.2.2.3.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the X2 link
2.2.2.3.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the X2 link between the eNB and en-gNB
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.3.4 	Procedures
Perform data transfer from the Application Test Server to the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningful verify that the user plane transmission operates correctly.
Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from en-gNB to eNB at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
en-gNB transmits some data packets to eNB (ie, step 1)
Drop some packets sent from en-gNB to eNB via X2 link by using the Network Impairment Emulator inserted in-line in the X2 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in eNB.
Trigger radio link outage condition in the eNB.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in eNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
To gradually move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
Trigger radio link resume condition on LTE RAT.
Stop scheduling in the eNB.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in eNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stop downlink data transmission
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.3.5 	Expected Results and Log Observation
2.2.2.3.5.1 Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.2.2.3.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
en-gNB sends eNB one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
eNB sends en-gNB DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, eNB sends en-gNB DDDS where following IEs show the dropped packets:
Start of lost NR-U Sequence Number range IE(s)
End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, eNB sends en-gNB DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, eNB sends en-gNB DDDS including Final Frame Indication IE with the value ‘1’, and then eNB does not send en-gNB DDDS including any updated instance of the following IEs
Highest successfully delivered NR PDCP Sequence Number IE
Highest transmitted NR PDCP Sequence Number IE
Highest successfully delivered retransmitted NR PDCP Sequence Number IE
Highest retransmitted NR PDCP Sequence Number IE
2.2.2.4 	Buffer discard indication
2.2.2.4.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.2.2.4.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.4.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.4.4 	Procedures
Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for eNB to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
en-gNB to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from en-gNB to eNB to discard NR PDCP PDUs. It is up to en-gNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the en-gNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Tester sets small value in "discardTimer" in order that this timer expires before the en-gNB receives acknowledgement of the transmitted data from the eNB
en-gNB to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from en-gNB to eNB to discard NR PDCP PDUs. It is up to en-gNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the en-gNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Tester sets small value in "discardTimer" in order that this timer expires before the en-gNB receives acknowledgement of the transmitted data from the eNB
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.4.5 	Expected Results and Log Observation
2.2.2.4.5.1 Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.2.2.4.5.2 Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
en-gNB DL discard Number of blocks
DL discard NR PDCP PDU SN start
Discarded Block size present
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
DL discard NR PDCP PDU SN present
2.2.2.5 	User data existence flag
2.2.2.5.1 	Test Purpose
The purpose of this test case is to verify en-gNB’s notification to the eNB of the existence of user data, but without using the User data existence flag IE, with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the eNB does not support the User data existence flag IE eg, in the case when the eNB is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.2.2.5.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
en-gNB shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to en-gNB implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.5.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.5.4 	Procedures
Perform data transfer from the Application Test Server to the Test UE or UE emulator via X2. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningful verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in eNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc.).
Decrease the amount of user data to be transmitted from the Application Test Server to the Test UE or UE emulator so that the user data can be transmitted via NR RAT only. With this condition perform data transmission for 60 seconds.
Note: the intention of this step is to create a situation where the en-gNB sends actual user data to the eNB even when the amount of user data is small enough to be sent via the NR RAT only. In this test scenario, the NR RAT radio condition need not be ideal but must be good enough to ensure that all user data can be transmitted through the NR RAT only.
Stop data transfer.
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.5.5 	Expected Results and Log Observation
2.2.2.5.5.1 Expected Results
The behavior of en-gNB is align with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.2.2.5.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from en-gNB to eNB, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to eNB implementation, ie, the value of the timers used in the eNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC_Connected state without expiring DRX inactivity timer in LTE RAT as specified in 3GPP TS 36.331 [13] and 3GPP TS 36.321 [14], from the beginning of step 2 till before step 3
2.2.2.6 	Assistance Information Report polling
2.2.2.6.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.2.2.6.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.6.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.6.4 	Procedures
Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.6.5 	Expected Results and Log Observation
2.2.2.6.5.1 Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.2.2.6.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the en-gNB to the eNB include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), the Assistance Information Data (AID) is sent by the eNB to the en-gNB
2.2.2.7 	Radio quality assistance information
2.2.2.7.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.2.2.7.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
eNB shall be configured with the Assistance Information Type(s) to be reported in the Assistance Information Data (AID) message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
‘0’=UNKNOWN
‘1’=Average CQI
‘2’=Average HARQ Failure
‘3’=Average HARQ Retransmissions
‘4’= DL Radio Quality Index
‘5’= UL Radio Quality Index
‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.7.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.7.4 	Procedures
Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the eNB becomes available.
Note: the intention of this step is to create a situation where the eNB does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
Create conditions which can help the eNB gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
Send DL user data via LTE RAT so that eNB can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.7.5 	Expected Results and Log Observation
2.2.2.7.5.1 Expected Results
The use of the use of the Radio quality assistance information IE is align the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.2.2.7.5.2 Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, eNB sends the Assistance Information Data message to en-gNB, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, eNB sends the Assistance Information Data message to en-gNB, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the Assistance Information Data (AID) message.
2.3 	F1 Interoperability Test Cases
The following set of F1 IOT cases are defined in this version of the specification.
Table 2-5: IOT Test Cases for F1 implemented in accordance with the NR C-Plane [2] profile
The initial test conditions which are common to all F1 test cases are listed below.:
Initial test conditions for scenarios with an EPC:
gNB-CU(s) and gNB-DU(s) are running in normal operating state
gNB-CU(s) and gNB-DU(s) are physically and logically connected
Core or Core emulator (EPC with EN-DC capabilities) is physically connected to the en-gNB(s)
S1 Setup procedure specified in 3GPP TS 36.413 [7] has been completed with the Core or Core emulator
EN-DC X2 setup procedure has been successfully completed between the eNB or eNB emulator and the en-gNB according to the NR C-Plane profile specification [2]
Protocol Analyzer is physically connected to the X2, F1 and S1-U link(s)
Initial test conditions for scenarios with a 5GC:
gNB-CU(s) and gNB-DU(s) are running in normal operating state
gNB-CU(s) and gNB-DU(s) are physically and logically connected
Core or Core emulator (5GC capabilities) is physically connected to the gNB(s)
NG Setup procedure specified in 3GPP TS 38.413 [15] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the F1 and NG-U link(s)
Test case specific deviations of the initial test conditions will be specified in each of the test cases.
2.3.1	F1 C-Plane IOT Test Cases
2.3.1.1 	Partial Reset (MeNB initiated)
2.3.1.1.1 	Test Purpose
The purpose of this test case is to verify that the MeNB initiated Partial Reset Procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using Reset procedure; conforming to the NR C-Plane profile specification [2] Section 4.1.4.1. This test case is on top of the X2 part of the MeNB initiated Partial Reset Procedure described in Section 2.2.1.5.
2.3.1.1.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
Testing tools which are required for this test scenario:
eNB and eNB emulator: used to perform MeNB initiated Partial Reset procedure, where the coverage of eNB cell and en-gNB cell overlap
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.1.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup Procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition procedure has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.1.4 	Procedures
Perform the MeNB initiated Partial Reset Procedure Step 1 described in Section 2.2.5.1.4.
Note: the intention of this step is to perform not only the X2 part of the MeNB initiated Partial Reset Procedure but also trigger to perform the F1 signaling, that is Reset Procedure with gNB-CU and gNB-DU.
Observe the Protocol Analyzer X2 and F1 link logs.
2.3.1.1.5 	Expected Results and Log Observation
2.3.1.1.5.1 Expected Results
Reset Procedure over F1 is successfully completed.
The MeNB initiated Partial Reset Procedure over F1 is successfully completed.
2.3.1.1.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.4.1.3/4.1.4.1.4.
2.3.1.2 	Secondary Node Addition (Option 3x)
2.3.1.2.1 	Test Purpose
The purpose of this test case is to verify that a Secondary Node Addition (Option 3x) procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Setup procedures; conforming to the NR C-Plane profile specification [2] Section 5.1.1. This test case is on top of the X2 part of the Secondary Node Addition (Option 3x) procedure described in Sections 2.2.1.7.
2.3.1.2.2 	Minimum Requirements
The minimum requirements described in Section 2.2.1.13.2.
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.2.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary node has not yet been added to the Test UE or UE emulator
2.3.1.2.4 	Procedures
Perform data transfer in the downlink direction described in step 1 (except for Note) in Section 2.2.1.7.4
Perform the Secondary Node Addition (Option 3x) Procedures described in NR C-Plane profile specification [2] Section 5.1.1.3
Stop data transfer direction described in step 3 in Section 2.2.1.7.4
Perform data transfer in both directions described in step 4 in Section 2.2.1.7.4
Observe the Protocol Analyzer X2 and F1 link logs and the Test UE or UE emulator logs
2.3.1.2.5 	Expected Results and Log Observation
2.3.1.2.5.1 Expected Results
The UE Context Setup procedure over F1 is successfully completed.
The Secondary Node Addition (Option 3x) Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.2.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Setup Response”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and 4 in Section 2.3.1.2.4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 4 in Section 2.3.1.2.4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.3 	Secondary Node Release (MN initiated, Option 3x)
2.3.1.3.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with MN (eNB) initiated SgNB Release procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.2.1. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.3.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
eNB or eNB emulator: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1-C and X2-C procedural flows and content
The coverage of eNB cell and en-gNB cell overlap.
2.3.1.3.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CU and en-gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.3.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Release Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Provoke a Radio Link Failure in SCG so MN receives SCG Failure Information NR message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.3.5 	Expected Results and Log Observation
2.3.1.3.5.1 Expected Results
The F1 UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Release procedure is successfully completed.
2.3.1.3.5.2 Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.2.1.3/5.2.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
2.3.1.4 	Secondary Node Release (SN initiated, Option 3x)
2.3.1.4.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with SN (en-gNB) initiated SgNB Release procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.2.2. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.4.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.2.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
eNB or eNB emulator: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1-C and X2-C procedural flows and content
The coverage of eNB cell and en-gNB cell overlap.
2.3.1.4.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CU and en-gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
F1 UE Context Setup procedure between en-gNB-CU and en-gNB-DU, triggered together with Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.4.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Secondary Node Release Procedure from SN (en-gNB) side.
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Block NR cell in en-gNB. One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell.
Provoke conditions in a way, that the SN detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SN and the Test UE or UE emulator as such the emulated interferences can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level.
Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.4.5 	Expected Results and Log Observation
2.3.1.4.5.1 Expected Results
The F1 UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Release procedure is successfully completed.
2.3.1.4.5.2 Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.2.2.1/5.2.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
2.3.1.5 	Secondary Node Change (MN initiated, Option 3x)
2.3.1.5.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with MN (eNB) initiated SgNB Change procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.3.1.4. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.5.2 	Minimum Requirements
DUTs: Two en-gNB-CU (S-SN-CU, T-SN-CU) and two en-gNB-DU (S-SN-DU, T-SN-DU):
DUTs shall apply the parameter condition specified in 5.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
eNB or eNB emulator: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 links procedural flows and content, S1-U UP content
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap.
2.3.1.5.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CUs and en-gNB-DUs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.5.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform Secondary Node Change Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Secondary Node Change procedure.
Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after Secondary Node Change.
Stop the data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in the uplink direction between the Test UE or UE emulator and the Application Test Server.
Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.5.5 	Expected Results and Log Observation
2.3.1.5.5.1 Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.3.10.5.2 Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.3.1.3/5.3.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.3.1.6 	Secondary Node Change (SN initiated, Option 3x)
2.3.1.6.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with SN (en-gNB) initiated SgNB Change procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.3.2.4. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.6.2 	Minimum Requirements
DUTs: Two en-gNB-CU (S-SN-CU, T-SN-CU) and two en-gNB-DU (S-SN-CU, T-SN-CU):
DUTs shall apply the parameter condition specified in 5.3.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
eNB or eNB emulator: used to perform Secondary Node Change procedure (SN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 links procedural flows and content, S1-U UP content
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap.
2.3.1.6.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CUs and en-gNB-DUs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.6.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform Secondary Node Change Procedure from Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Move the Test UE or UE emulator from the coverage area of Source en-gNB cell (S-SN) towards Target en-gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-TN. Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after Secondary Node Change.
Stop the data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in the uplink direction between the Test UE or UE emulator and the Application Test Server.
Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.6.5 	Expected Results and Log Observation
2.3.1.6.5.1 Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.6.5.2 Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.3.2.3/5.3.2.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
“F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.3.1.7 	Inter-Master Node Handover (without SN Change, Option 3x)
2.3.1.7.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (without SN Change, Option 3x) procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedures; conforming to the NR C-Plane profile specification [2] Section 5.1.1. This test case is on top of the X2 part of the Inter-Master Node Handover (without SN Change, Option 3x) procedure described in Section 2.2.1.12.
2.3.1.7.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.4.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Inter-Master Node Handover (without SN Change, Option 3x) procedure
eNB or eNB emulator: used to perform Inter-Master Node Handover (without SN Change, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.7.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the Source eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.7.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform the X2 part of Inter-Master Node Handover (without SN Change, Option 3x) procedures described in NR C-Plane profile specification [2] Section 5.4.1.3
Perform data transfer in both directions described step 2 in Section 2.2.1.12.4.
Observe the Protocol Analyzer X2 and F1 link logs and Test UE or UE emulator logs.
2.3.1.7.5 	Expected Results and Log Observation
2.3.1.7.5.1 Expected Results
The UE Context Modification procedure over F1 is successfully completed.
The Inter-Master Node Handover (without SN Change, Option 3x) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.7.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and 3 in Section 2.3.1.7.4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 3 in Section 2.3.1.7.4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.8 	Master Node to eNB Change
2.3.1.8.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to eNB Change Procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using UE Context Modification and UE Context Release procedure, conforming the NR C-Plane profile specification [2] Section 5.5.1. This test case is on top of the X2 part of the Master Node to eNB Change Procedure described in Sections 2.2.1.13.
2.3.1.8.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.5.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario.
eNB and eNB emulator: used to perform Master Node to eNB Change procedure, where the coverage of Source eNB cell (S-MN), Target eNB cell (T-MN) and en-gNB cell (SN) overlap
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Master Node to eNB Change procedure
Target eNB or Target eNB emulator: used to perform Master Node to eNB Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content, and S1-U UP content
2.3.1.8.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB or target eNB emulator specified in 3GPP TS 36.423 [12] has been successfully completed
F1 setup Procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and SN cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Then SCG configuration query has been completed if needed
2.3.1.8.4 	Procedures
Perform the Master Node to eNB Change Procedures Steps 1 – 2 described in Section 2.2.1.13.4.
Note: the intention of this step is to perform not only the X2 part of the Master Node to eNB Change Procedure but also trigger to perform the F1 signaling, that is UE Context Modification Procedure and the UE Context Release Procedure with gNB-CU and gNB-DU.
Perform the X2 part of Master Node to eNB Change Procedures Steps 3 – 5 described in Section 2.2.1.13.4.
Observe the Protocol Analyzer X2 and F1 link logs, and Test UE or UE emulator logs.
2.3.1.8.5 	Expected Results and Log Observation
2.3.1.8.5.1 	Expected Results
The UE Context Modification Procedure and the UE Context Release Procedure over F1 are successfully completed.
The Master Node to eNB Change Procedure over F1 is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.8.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.5.1.3/5.5.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
“Criticality Diagnostics” in “UE Context Release Complete”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in Step 1:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE via NR RAT
2.3.1.9 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario)
2.3.1.9.1 	Test Purpose
The purpose of this test case is to verify that a PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Setup procedure, F1 UE Context Modification procedure, and F1 UE Context Release procedure; conforming to the NR C-Plane profile specification [2] Section 5.1.1. This test case is on top of the X2 part of the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure described in Sections 2.2.1.15.
2.3.1.9.2 	Minimum Requirements
DUTs: Single gNB-CU and two gNB-DUs (Source gNB-DU, Target gNB-DU):
DUTs shall apply the parameter condition specified in 5.6.15 of the NR C-Plane profile specification [2]
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario) procedure
eNB or eNB emulator: used to perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.9.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.9.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedures described in NR C-Plane profile specification [2] Section 5.6.15.3
Perform data transfer in both directions described step 2 in Section 2.2.1.15.4
Observe the Protocol Analyzer X2 and F1 link logs and Test UE or UE emulator logs
2.3.1.9.5 	Expected Results and Log Observation
2.3.1.9.5.1 Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Setup, UE Context Modification and UE Context Release procedure over F1 is successfully completed.
The PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.9.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
“Criticality Diagnostics” in “UE Context Setup Response”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and 3 in Section 2.3.1.9.4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 3 in Section 2.3.1.9.4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.10 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option (Inter gNB-DU scenario)
2.3.1.10.1 	Test Purpose
The purpose of this test case is to verify that a PSCell Change, using SRB1 for RRC Reconfiguration – delta configuration option procedure, received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Setup procedure, F1 UE Context Modification procedure and F1 UE Context Release procedure; conforming to the NR C-plane profile specification [2] section 5.1.1. This test case is on top of the X2 part of the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure described in sections 2.2.1.16.
2.3.1.10.2 	Minimum Requirements
DUTs: Single gNB-CU and two gNB-DUs (Source gNB-DU, Target gNB-DU):
DUTs shall apply the parameter condition specified in 5.6.16 of the NR C-plane profile specification [2]
en-gNB has at least 2 cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration - delta config option (Inter gNB-DU scenario) procedure
eNB or eNB emulator: used to perform PSCell Change using SRB1 for RRC Reconfiguration - delta config option (Inter gNB-DU scenario) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.10.3 	Initial Conditions
Refer to section 2.3 for the F1 related standard list of initial conditions. Besides, refer to section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions is applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-plane profile specification [2]
2.3.1.10.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedures described in NR C-Plane profile specification [2] Section 5.6.16.3
Perform data transfer in both directions described step 2 in Section 2.2.1.16.4.
Observe the Protocol Analyzer X2 and F1 link logs and Test UE or UE emulator logs.
2.3.1.10.5 	Expected Results and Log Observation
2.3.1.10.5.1 Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Setup, UE Context Modification and UE Context Release procedure over F1 is successfully completed.
The PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.10.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
“Criticality Diagnostics” in “UE Context Setup Response”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and 3 in Section 2.3.1.10.4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 3 in Section 2.3.1.10.4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.11 	Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration
2.3.1.11.1 	Test Purpose
The purpose of this test case is to verify that an Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedures; conforming to the NR C-Plane profile specification [2] Section 5.1.1.
2.3.1.11.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.17 of NR C-Plane profile specification [2]
Single gNB-CU and single gNB-DU have at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure
eNB or eNB emulator: used to perform Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.11.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.11.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Perform the Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedures described NR C-Plane profile specification [2] Section 5.6.17.1
Perform data transfer in both directions described step 2 in Section 2.2.1.15.4
Observe the Protocol Analyzer X2 and F1 link logs and Test UE or UE emulator logs
2.3.1.11.5 	Expected Results and Log Observation
2.3.1.11.5.1 Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Modification procedure over F1 is successfully completed.
The Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.11.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and 3 in Section 2.3.1.11.4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 3 in Section 2.3.1.11.4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.12 	F1 Setup for EN-DC
2.3.1.12.1 	Test Purpose
The purpose of this test case is to verify that the F1 Setup procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.5.1.
2.3.1.12.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.1.5.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.12.3 	Initial Conditions
A SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.3.1.12.4 	Procedures
Initiate the F1 Setup procedure in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
O&M command in gNB-DU to enable F1 interface
This step is executed optionally. The gNB-DU initiates gNB-DU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message in order to test OPT1 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1. In this step, all cells or a part of cells requested are activated. If a part of cells requested are activated in this step, the rest cells may be activated by OPT 2 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1
This step is executed optionally. The gNB-CU initiates gNB-CU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message in order to test OPT2 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1. Since this step can be independently done from step 2, the cells to be activated in this step may be different from those of step 2.
Observe the Protocol Analyzer F1 link logs
2.3.1.12.5 	Expected Results and Log Observation
2.3.1.12.5.1 Expected Results
The F1 Setup procedure is successfully completed.
The gNB-DU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message.
The gNB-CU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message.
2.3.1.12.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.5.1.1/4.1.5.1.2.
2.3.1.13 	gNB-DU Configuration Update for EN-DC
2.3.1.13.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.6.1.
2.3.1.13.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.1.6.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.13.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.13.4 	Procedures
Perform the gNB-DU Configuration Update procedure to add cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make the gNB-DU’s cell recover after the transition to its cell failure status.
Perform the gNB-DU Configuration Update procedure to delete cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make gNB-DU’s cell failure status.
Perform the gNB-DU Configuration Update procedure to modify cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation, then change NR PCI information of the deactivated cells. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells and change the NR PCI.
Perform the gNB-DU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to activate cells.
The cell activation is successfully completed by gNB-DU Configuration Update procedure in this step. If the gNB-CU requests the gNB-DU to activate cells via GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE message, then the gNB-DU will trigger additional GNB-DU CONFIGURATION UPDATE procedure to inform the Service Status for activated cells (OPT1) specified in NR C-Plane profile specification [2] Section 4.1.6.1.1.
Perform the gNB-DU Configuration Update procedure to deactivate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells.
Perform the gNB-DU Configuration Update procedure to inform the Service Status in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate the Service Status of the cell from “In-Service” to "Out-Of-Service". One of the possible methods can be to make use of O&M command in the gNB-DU in order to change the Service Status from “In-Service” to " Out-Of-Service".
Observe the Protocol Analyzer F1 link logs.
2.3.1.13.5 	Expected Results and Log Observation
2.3.1.13.5.1 Expected Results
The cell addition is successfully completed by gNB-DU Configuration Update procedure in step 1.
The cell deletion is successfully completed by gNB-DU Configuration Update procedure in step 2.
The cell modification is successfully completed by gNB-DU Configuration Update procedure in step 3.
The cell activation is successfully completed by gNB-DU Configuration Update procedure in step 4. Informing the service status for additionally activated cells may be successfully completed by gNB-DU Configuration Update procedure in this step.
The cell deactivation is successfully completed by gNB-DU Configuration Update procedure in step 5.
Informing the service status is successfully completed by gNB-DU Configuration Update procedure in step 6.
2.3.1.13.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.6.1.1/4.1.6.1.2.
The test result shall be determined as Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE”
2.3.1.14 	gNB-CU Configuration Update for EN-DC
2.3.1.14.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.7.1.
2.3.1.14.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.1.7.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.14.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.14.4 	Procedures
Perform the gNB-CU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to activate cells.
Perform the gNB-CU Configuration Update procedure to deactivate cells s in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate cells.
Observe the Protocol Analyzer F1 link logs.
2.3.1.14.5 	Expected Results and Log Observation
2.3.1.14.5.1 Expected Results
In step 1, after the gNB-DU sent GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE, GNB-DU CONFIGURATION UPDATE and GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE are observed to activate cells.
In step 2, GNB-CU CONFIGURATION UPDATE and GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE are observed to deactivate cells.
2.3.1.14.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.7.1.1/4.1.7.1.2.
The test result shall be determined as Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE”
2.3.1.15 	F1 Setup for NR Stand-Alone
2.3.1.15.1 	Test Purpose
The purpose of this test case is to verify that the F1 Setup procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.3.1.
2.3.1.15.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.2.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.15.3 	Initial Conditions
A SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.3.1.15.4 	Procedures
Initiate the F1 Setup procedure in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
O&M command in gNB-DU to enable F1 interface
This step is executed optionally. The gNB-DU initiates gNB-DU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message in order to test OPT1 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1. In this step, all cells or a part of cells requested are activated. If a part of cells requested are activated in this step, the rest cells may be activated by OPT 2 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1.
This step is executed optionally. The gNB-CU initiates gNB-CU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message in order to test OPT2 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1. Since this step can be independently done from step 2, the cells to be activated in this step may be different from those of step 2.
Observe the Protocol Analyzer F1 link logs
2.3.1.15.5 	Expected Results and Log Observation
2.3.1.15.5.1 Expected Results
The F1 Setup procedure is successfully completed.
The gNB-DU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message.
The gNB-CU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sends F1 SETUP RESPONSE message.
2.3.1.15.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.3.1.1/4.2.3.1.2.
2.3.1.16 	gNB-DU Configuration Update for NR Stand-Alone
2.3.1.16.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.4.1.
2.3.1.16.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.2.4.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.16.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.16.4 	Procedures
Perform the gNB-DU Configuration Update procedure to add cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make the gNB-DU’s cell recover after the transition to its cell failure status.
Perform the gNB-DU Configuration Update procedure to delete cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make gNB-DU’s cell failure status.
Perform the gNB-DU Configuration Update procedure to inform the Service Status in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate the Service Status of the cell from “In-Service” to "Out-Of-Service". One of the possible methods can be to make use of O&M command in the gNB-DU in order to change the Service Status from “In-Service” to " Out-Of-Service".
Perform the gNB-DU Configuration Update procedure to modify cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation, then change NR PCI information of the deactivated cells. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells and change the NR PCI.
Observe the Protocol Analyzer F1 link logs.
2.3.1.16.5 	Expected Results and Log Observation
2.3.1.16.5.1 Expected Results
The cell addition is successfully completed by gNB-DU Configuration Update procedure in step 1.
The cell deletion is successfully completed by gNB-DU Configuration Update procedure in step 2.
Informing the service status is successfully completed by gNB-DU Configuration Update procedure in step 3.
The cell modification is successfully completed by gNB-DU Configuration Update procedure in step 4.
2.3.1.16.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.4.1.1/4.2.4.1.2.
The test result shall be determined as Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE”
2.3.1.17 	 gNB-CU Configuration Update for NR Stand-Alone
2.3.1.17.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.5.1.
2.3.1.17.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.2.5.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.17.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.17.4 	Procedures
Perform the gNB-CU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to activate cells.
Perform the gNB-CU Configuration Update procedure to deactivate cells s in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate cells.
Perform the gNB-CU Configuration Update procedure to update of gNB-CU generated SIB information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate change the SIB information. One of the possible methods can be to make use of O&M command in the gNB-CU in order to change the SIB information.
Perform the gNB-CU Configuration Update procedure to bar the cells of gNB-DU managed by the gNB-CU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cells barring. One of the possible methods can be to make use of O&M command in the gNB-CU in order to make gNB-DU’s cells barring.
Observe the Protocol Analyzer F1 link logs.
2.3.1.17.5 	Expected Results and Log Observation
2.3.1.17.5.1 Expected Results
In step 1, after the gNB-DU sent GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE, GNB-DU CONFIGURATION UPDATE and GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE are observed to activate cells.
In step 2, GNB-CU CONFIGURATION UPDATE and GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE are observed to deactivate cells.
In step 3, GNB-CU CONFIGURATION UPDATE with updated SIB information is observed.
in step 4, GNB-CU CONFIGURATION UPDATE with modified Cell barring informing is observed.
2.3.1.17.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.5.1.1/4.2.5.1.2.
The test result shall be determined as Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE”
2.3.1.18 	Paging (CN-initiated)
2.3.1.18.1 	Test Purpose
The purpose of this test case is to verify that the Paging (CN-initiated) procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.6.1.
2.3.1.18.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 4.2.6.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.18.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and/or Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
2.3.1.18.4 	Procedures
Initiate Paging procedure from Core or Core emulator (5GC capabilities) to page a UE in RRC-IDLE state.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Initiate data transfer from Core or Core emulator (5GC capabilities) to UE in CM-IDLE state.
Observe the Protocol Analyzer F1 link logs.
2.3.1.18.5 	Expected Results and Log Observation
2.3.1.18.5.1 Expected Results
The Paging procedure is successfully completed.
In step 2, the Paging message is observed to page the UE.
2.3.1.18.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.6.1./4.2.6.2.
2.3.1.19 	UE context creation (service request)
2.3.1.19.1 	Test Purpose
The purpose of this test case is to verify that the UE initiated Service Request procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using the UE Context Setup procedure, conforming to the NR C-Plane profile specification [2] Section 6.1.1
2.3.1.19.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 6.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.19.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] section 6.1.2 has been successfully completed
2.3.1.19.4 	Procedures
Initiate Service Request procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Initiate data transfer from a UE in CM-IDLE state
Observe the Protocol Analyzer F1 logs.
2.3.1.19.5 	Expected Results and Log Observation
2.3.1.19.5.1 Expected Results
The F1 UE Context Setup procedure is successfully completed.
The service request procedure is successfully performed, a PDU session and DRB are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.3.1.19.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.1.1.2/6.1.1.3.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.3.1.20 	UE context creation (registration request)
2.3.1.20.1 	Test Purpose
The purpose of this test case is to verify that the UE initiated Initial Registration Request procedure can be performed successfully with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.1.2.
2.3.1.20.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 6.1.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.20.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has not registered to the network
2.3.1.20.4 	Procedures
Initiate Initial Registration Request procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Switch on a powered-off UE
Observe the Protocol Analyzer F1 logs.
2.3.1.20.5 	Expected Results and Log Observation
2.3.1.20.5.1 Expected Results
The F1 procedure as specified in the NR C-Plane profile specification [2] Section 6.1.2.2 are successfully completed.
The Initial registration procedure is successfully completed, and a new UE context is created in NG-RAN for signaling only connection.
2.3.1.20.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.1.2.2/6.1.2.3.
2.3.1.21 	UE Context Release
2.3.1.21.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Release Procedure is successfully performed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.2.1
2.3.1.21.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.21.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network and a PDU session has been established, ie, Registration procedure specified in NR C-Plane profile specification [2] section 6.1.2 has been successfully completed
2.3.1.21.4 	Procedures
Initiate UE Context Release procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Power off the Test UE or UE emulator or
Turn on flight-mode in Test UE (or UE emulator) or
Delete subscriber in AMF
Observe the Protocol Analyzer F1 logs.
2.3.1.21.5 	Expected Results and Log Observation
2.3.1.21.5.1 Expected Results
The F1 UE Context Release procedure is successfully completed.
The NGAP UE Context Release procedure is successfully completed, NG-AP signaling connection and associated User Plane connections are released
2.3.1.14.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.2.1.1/6.2.1.2
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
2.3.1.22 	UE Context Modification (SCell to be setup/removed)
2.3.1.22.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to setup or remove SCell(s) for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1
2.3.1.22.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU, PCell and SCell(s) are available and configured for Carrier Aggregation.
DUTs shall apply the parameter condition specified in 6.3.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of Carrier Aggregation: used to perform UE Context Modification procedure for SCell(s) setup or release.
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.22.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] section 6.1.2 has been successfully completed
The service request procedure, as specified in NR C-Plane profile specification [2] section 6.1.1, is successfully performed, a DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
Test UE or UE emulator is within the coverage area of the PCell
2.3.1.22.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Initiate UE Context Modification procedure for SCell(s) setup
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Move the Test UE or UE emulator under the coverage area of the SCell, while still remaining under the coverage area of the PCell, eg. by making use of variable attenuators. In this specific case, the SCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the UE Context Modification Procedure for SCell Setup, eg after Event A1 reporting from UE.
Observe the Protocol Analyzer F1 logs.
Initiate UE Context Modification procedure for SCell(s) removal
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Move the Test UE or UE emulator away from the coverage area of the SCell, while still remaining under the coverage area of the PCell, eg, by making use of variable attenuators. In this specific case, the SCell can start low attenuation applied which is subsequently increased to a level which can trigger the UE Context Modification Procedure for SCell Removal, eg after Event A2 reporting from UE.
Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.1.22.5 	Expected Results and Log Observation
2.3.1.22.5.1 Expected Results
The F1 UE Context Modification procedure 
after step 2 for SCell(s) setup and 
after step 4 for SCell removal are successfully completed.
Data transfer is still ongoing after step 2 and after step 4.
2.3.1.22.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.1/6.3.1.1.1.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“SCell Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.3.1.23 	UE Context Modification (DRB to be setup)
2.3.1.23.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to setup a DRB for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1
2.3.1.23.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU,
DUTs shall apply the parameter condition specified in 6.3.1.2/6.3.1.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB setup
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.23.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] section 6.1.1, is successfully performed, a DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.23.4 	Procedures
Initiate UE Context Modification procedure for DRB setup
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Add another DRB to the UE by requesting another service, eg, Video streaming, resulting in a PDU Session Resource Setup or Modification Request
Observe the Protocol Analyzer F1 logs.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.3.1.23.5 	Expected Results and Log Observation
2.3.1.23.5.1 Expected Results
The F1 UE Context Modification procedure for DRB setup to UE is performed successfully.
Data transfer is possible using the newly established DRB.
2.3.1.23.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.2/6.3.1.2.1.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“DRB Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.3.1.24 	UE Context Modification (DRB to be released)
2.3.1.24.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to release a DRB for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.
2.3.1.24.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU,
DUTs shall apply the parameter condition specified in 6.3.1.3/6.3.1.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB setup
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.24.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] section 6.1.1, is successfully performed, at least two DRBs are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.24.4 	Procedures
Initiate UE Context Modification procedure for DRB release
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
Remove one of at least two established DRBs from the UE by releasing one service, eg, Video streaming, resulting in a PDU Session Resource Release or Modification Request
Observe the Protocol Analyzer F1 logs.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.3.1.24.5 	Expected Results and Log Observation
2.3.1.24.5.1 Expected Results
The F1 UE Context Modification procedure for DRB release to UE is performed successfully.
Data transfer is possible using the remaining DRB.
2.3.1.24.5.2 Log Observation
F1 (and NG) logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.3/6.3.1.3.1.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
2.4 	Xn Interoperability Test Cases
The following set of Xn IOT cases are defined in this version of the specification.
Table 2-6: IOT Test Cases for Xn implemented in accordance with the NR C-Plane [2] profile
The initial test conditions which are common to all Xn test cases are listed below while the test case specific deviations of the initial test conditions will be specified in each of the test cases:
The gNBs are running in normal operating state
The gNBs are physically and logically connected
Core or Core emulator (5GC capabilities) is physically connected to the gNB(s)
NG Setup procedure specified in 3GPP TS 38.413 [15] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the Xn link(s)
2.4.1 	Xn C-Plane IOT Test Cases
2.4.1.1 	Xn Setup
2.4.1.1.1 	Test Purpose
The purpose of this test case is to verify that the Xn Setup procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.1.
2.4.1.1.2 	Minimum Requirements
DUTs: Two gNBs:
DUTs shall apply the parameter condition specified in 4.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.4.1.1.4 	Procedure
Initiate the Xn Setup procedure in gNB1.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
O&M command in gNB1 to enable Xn interface
Observe the Protocol Analyzer Xn logs.
2.4.1.1.5 	Expected Results and Log Observation
2.4.1.1.5.1 Expected Results
The Xn Setup procedure is successfully completed.
2.4.1.1.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.1.1/4.2.1.2.
2.4.1.2 	Inter gNB Handover
2.4.1.2.1 	Test Purpose
The purpose of this test case is to verify that the Inter gNB Handover procedure with source gNB and target gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 6.4.1.
2.4.1.2.2 	Minimum Requirements
DUTs: Two gNBs (Source gNB and Target gNB):
DUTs shall apply the parameter condition specified in 6.4.1 of the NR C-Plane profile specification [2]
The coverage of source gNB cell and target gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform Inter gNB Handover
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the source gNB and target gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the source gNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.4.1.2.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter gNB Handover procedure. This involves observing that the user plane data forwarded from the source gNB to the target gNB over the Xn interface during the Inter gNB Handover procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source gNB to start buffering user plane downlink data prior to the Inter gNB Handover.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform Inter gNB Handover Procedure from Source gNB cell and Target gNB cell.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Move the Test UE or UE emulator from the coverage area of source gNB cell towards target gNB cell. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the source gNB cell and the target gNB cell simultaneously. In this specific case, the source gNB cell can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Inter gNB Handover.
Stop data transfer from the Application Test Server to the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Inter gNB Handover Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.2.5 	Expected Results and Log Observation
2.4.1.2.5.1 Expected Results
The Inter gNB Handover procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.4.1.1/6.4.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “HANDOVER REQUEST ACKNOWLEDGE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via the source gNB cell and target gNB cell.
All U-Plane data recorded in the Xn logs which is:
Forwarded to the Test UE or emulated UE from the source gNB towards the target gNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the target gNB cell
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE via the target gNB cell
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or emulated UE via the target gNB cell is recorded in the NG logs
2.4.1.3 	S-NG-RAN Node Addition
2.4.1.3.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN Node Addition procedure with two gNBs, hereafter MgNB and SgNB respectively, from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.1.1.
2.4.1.3.2 	Minimum Requirements
DUTs: MgNB and SgNB:
DUTs shall apply the parameter condition specified in 7.1.1 of the NR C-plane profile specification [2]
The coverages of MgNB cell and SgNB cell overlap each other.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN Node Addition
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.3.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
2.4.1.3.4 	Procedures
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator via MgNB.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the S-NG-RAN Node Addition procedure. This involves observing that the user plane data forwarded from the MgNB to the SgNB over the Xn interface during the S-NG-RAN Node Addition procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the MgNB to start buffering user plane downlink data prior to the addition of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
Perform S-NG-RAN Node Addition procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the S-NG-RAN Node Addition procedure.
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during SN terminated Split Bearer(s) operation in NR-DC. This involves observing that the user plane data transferred over the Xn in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the SN terminated Split Bearer(s) usage of both MgNB and SgNB is to transfer user plane data at data rates high enough for the SgNB to start distributing user plane data to the gNB via the Xn interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both MgNB and SgNB, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.3.5 	Expected Results and Log Observation
2.4.1.3.5.1 Expected Results
The S-NG-RAN Node Addition procedure is successfully completed.
2.4.1.3.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.1.1.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“QoS Flows Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“PDU Session Resource Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via the MgNB or the SgNB
All U-Plane data recorded in the Xn logs which are:
Forwarded to the Test UE or emulated UE from the MgNB towards the SgNB via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE
Transmitted to the Test UE or emulated UE from the SgNB to the MgNB, via the established MgNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via MgNB
Note: this test verification process does not impose a requirement for the SgNB to transmit the user plane data which it has received from the MgNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the MgNB, but rather it is to verify the correct operation of the transmit operation via MgNB when it is used by the SgNB.
Regarding the downlink U-Plane data generated in step 4:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
All U-Plane data recorded in the Xn logs (ie, all U-Plane data transferred from SgNB to MgNB) is correctly received by the Test UE or UE emulator via MgNB
Regarding the uplink U-Plane data generated in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the NG logs
All U-Plane data transmitted by the Test UE or UE emulator via MgNB (ie, all U-Plane data to be transferred from MgNB to SgNB) is recorded in the Xn logs
2.4.1.4 	M-NG-RAN node initiated SN modification
2.4.1.4.1 	PDU Session Addition
2.4.1.4.1.1 Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Addition) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.1.1.
2.4.1.4.1.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1.1 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Addition)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.1.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification
2.4.1.4.1.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator using existing PDU Session.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform M-NG-RAN node initiated SN modification (PDU Session Addition)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Add the PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to add the PDU Session
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using new PDU Session.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Addition).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.4.1.5 Expected Results and Log Observation
2.4.1.4.1.5.1 Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Addition) procedure is successfully completed.
2.4.1.4.1.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.1.1/7.2.1.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the added PDU Session is applied:
An example of how to observe the PDU Session Addition is to check UE emulator and Core emulator log. The exact method to observer the added PDU Session is out of scope of this specification
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “M-NG-RAN node initiated SN Modification – PDU Session addition” is specified in the NR C-plane profile specification [2] sections 7.2.1.1.1/7.2.1.1.2.
2.4.1.4.2 	PDU Session Release
2.4.1.4.2.1 Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Release) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.1.2.
2.4.1.4.2.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.1.1.2 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
At least two PDU Session exists to a Test UE or UE emulator in the NW
2.4.1.4.2.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification
At least two PDU Sessions exists to a Test UE or UE emulator in the NW
2.4.1.4.2.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator using two PDU Sessions.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform M-NG-RAN node initiated SN modification (PDU Session Release)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Release one of PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to release the PDU Session
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using remaining PDU Session.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Release).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.4.2.5 Expected Results and Log Observation
2.4.1.4.2.5.1 Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Release) procedure is successfully completed.
2.4.1.4.2.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.2.1/7.2.1.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the Released PDU Session is not applied:
An example of how to observe the PDU Session Release is to check the following three points. The exact method to observer the released PDU Session is out of scope of this specification
Check that data is flowing the two PDU Sessions before step 2
Check that step 2 (PDU Session Release procedure) perform correctly
Check that the data is flowing using the remaining PDU Session in step 4
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “M-NG-RAN node initiated SN Modification – PDU Session Release” is specified in the NR C-plane profile specification [2] sections 7.2.1.2.1/7.2.1.2.2.
2.4.1.4.3 	Security Key change
2.4.1.4.3.1 Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (Security Key change) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.1.4.
2.4.1.4.3.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1.4 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (Security Key change)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.3.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification
2.4.1.4.3.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
Perform M-NG-RAN node initiated SN modification (Security Key change)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Perform Intra-gNB-CU handover (M-NG-RAN node initiated) procedure
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (Security Key change).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.4.3.5 Expected Results and Log Observation
2.4.1.4.3.5.1 Expected Results
The M-NG-RAN node initiated SN modification (Security Key change) procedure is successfully completed.
2.4.1.4.3.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.4.1/7.2.1.4.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in Test UE or UE emulator:
An example of how to observe the updated security key is to check UE emulator log. The exact method to observer the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data which is recorded in the NG logs, but is not recorded in Xn logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “M-NG-RAN node initiated SN Modification – Security Key change” is specified in the NR C-plane profile specification [2] sections 7.2.1.4.1/7.2.1.4.2.
2.4.1.5 	S-NG-RAN node initiated SN modification with MN involvement
2.4.1.5.1 	PDU Session Release
2.4.1.5.1.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.2.2.
2.4.1.5.1.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.2 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
At least two PDU Sessions exists to a Test UE or UE emulator in the NW.
2.4.1.5.1.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
At least two PDU Sessions exists to a Test UE or UE emulator in the NW
2.4.1.5.1.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator using two PDU Sessions.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform S-NG-RAN node initiated SN modification (PDU Session Release)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Release one of PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to release the PDU Session
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using remaining PDU Session.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.5.1.5 Expected Results and Log Observation
2.4.1.5.1.5.1 Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release) procedure is successfully completed.
2.4.1.5.1.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.2.1/7.2.2.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the Released PDU Session is not applied:
An example of how to observe the PDU Session Release is to check the following three points. The exact method to observer the released PDU Session is out of scope of this specification
Check that data is flowing the two PDU Sessions before step 2
Check that step 2 (PDU Session Release procedure) perform correctly
Check that the data is flowing using the remaining PDU Session in step 4
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “S-NG-RAN node initiated SN Modification with MN involvement – PDU Session Release” is specified in the NR C-plane profile specification [2] sections 7.2.2.2.1/7.2.2.2.2
2.4.1.5.2 	Security Key change
2.4.1.5.2.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.2.3.
2.4.1.5.2.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.3 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.5.2.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.2.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
Perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Perform Intra-gNB-CU handover (M-NG-RAN node initiated) procedure
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using new PDU Session.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (Security Key change).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.5.2.5 Expected Results and Log Observation
2.4.1.5.2.5.1 Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure is successfully completed.
2.4.1.5.2.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.3.1/7.2.2.3.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in Test UE or UE emulator:
An example of how to observe the updated security key is to check UE emulator log. The exact method to observer the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated after step 2 and in step 4:
All U-Plane data which is recorded in the NG logs, but is not recorded in Xn logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “S-NG-RAN node initiated SN Modification with MN involvement – Security Key change” is specified in the NR C-plane profile specification [2] sections 7.2.2.3.1/7.2.2.3.2
2.4.1.6 	S-NG-RAN node initiated SN modification without MN involvement
2.4.1.6.1 	SRB3 not supported
2.4.1.6.1.1 SN Modification – SCell(s) Addition / Release
2.4.1.6.1.1.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SCell(s) Addition / Release)) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.2.3.1.1.
2.4.1.6.1.1.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.3.1.1 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell(s) Addition / Release))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.6.1.1.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
2.4.1.6.1.1.4 Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – scull Addition))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SN cell. In this specific case, the candidate SCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SCell Addition using the Measurement results.
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Addition)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Release))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SN SCell. In this specific case, the candidate SCell can start off with low attenuation applied which is subsequently increased to a level which can trigger the SCell Release using the Measurement results. The Measurement report is sent by MN via RRC Transfer procedure. It is defined in the 5.7.1 of the NR C-Plane profile specification [2].
Stop data transfer between the Application Test Server and the Test UE or UE emulator.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Release)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.6.1.1.5 Expected Results and Log Observation
2.4.1.6.1.1.5.1 Expected Results
The S-NG-RAN node initiated SN modofication without MN involvement (SRB3 not supported (SCell(s) Addition / Release)) procedure is successfully completed. All the data generated is correctly received by Test UE or UE emulator after the addition and release procedures.
2.4.1.6.1.1.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.1.1.1/7.2.3.1.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane date generated after step 2 and in step 4:
All U-Plane data recorded in the NG log is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
Regarding the downlink U-Plane date generated after step 5 and in step 7:
All U-Plane data recorded in the NG log is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated after step 5 and in step 7:
All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
The message flow for “S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SCell(s) Addition / Release)) procedure” is specified the NR C-plane profile specification [2] sections 7.2.3.1.1.1/7.2.3.1.1.2.
2.4.1.7 	M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
2.4.1.7.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed; conforming to the NR C-plane profile specification [2] section 7.3.1.
2.4.1.7.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.1 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn-C procedural flows and content
2.4.1.7.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
2.4.1.7.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
One of the possible methods can be to make use of O&M command in 5GC or MN side to trigger UE context release.
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.7.5 	Expected Results and Log observation
2.4.1.7.5.1 Expected Results
The M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.7.5.2 Log observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.4.1.1/6.4.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
The message flow for “M-NG-RAN node initiated S-NG-RAN Node Release without keeping UE” is specified in the NR C-plane profile specification [2] sections 7.3.1.1/7.3.1.2.
2.4.1.8 	M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
2.4.1.8.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.3.2.
2.4.1.8.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.2 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn-C procedural flows and content
2.4.1.8.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
2.4.1.8.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
Perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Provoke a Radio Link Failure in SCG, so MgNB receives SCGFailureInformation NR message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated S-NG-RAN node Release with keeping UE.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.8.5 	Expected Results and Log observation
2.4.1.8.5.1 Expected Results
The M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.8.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.2.1/7.3.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from SgNB to MgNB) is correctly received by the Test UE or UE emulator
NG logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 3:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 3:
All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
The message flow for “M-NG-RAN node initiated S-NG-RAN Node Release without keeping UE” is specified in the NR C-plane profile specification [2] sections 7.3.2.1/7.3.2.2.
2.4.1.9 	S-NG-RAN node initiated S-NG-RAN node Release
2.4.1.9.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated S-NG-RAN node Release procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed, conforming to the NR C-plane profile specification [2] section 7.3.3.
2.4.1.9.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.3 of the NR C-plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated S-NG-RAN node Release
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn-C procedural flows and content
2.4.1.9.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB been successfully completed according to NR C-Plane profile specification [2]
2.4.1.9.4 	Procedure
Perform data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
There are two options for this procedure, as shown in Figure 7.3.3.1-1 in the NR C-plane profile specification [2].
If M-NG-RAN will keep this UE in MN side (ie, Opt1), the notes in step 1 are as follows.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the S-NG-RAN node initiated S-NG-RAN node Release procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the S-NG-RAN node initiated S-NG-RAN node Release procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
If M-NG-RAN will not keep this UE in MN side (ie, Opt2), the notes in step 1 is as follow.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform S-NG-RAN node initiated S-NG-RAN node Release
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Block cell in SgNB. One of the possible methods can be to make use of the O&M command in the SgNB to block the cell
Provoke conditions in a way that the SgNB detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SgNB and the Test UE or UE emulator so that the emulated interference can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level
The procedure for Opt1 and opt2 is as follows.
In Opt1, perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated S-NG-RAN node Release.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
In Opt2, stop data transfer from the Application Test Server to the Test UE or UE emulator.
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.9.5 	Expected Results and Log observation
2.4.1.9.5.1 Expected Results
The S-NG-RAN node initiated S-NG-RAN node Release procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.9.5.2 Log observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.3.1/7.3.3.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE CONFIRM”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from SgNB to MgNB) is correctly received by the Test UE or UE emulator
In OPT1, NG logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 3:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 3:
All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
The message flow for “S-NG-RAN node initiated SN Modification with MN involvement – Security Key change” is specified in the NR C-plane profile specification [2] sections 7.3.3.1/7.3.3.2
Annex ZZZ: O-RAN Adopter License Agreement
BY DOWNLOADING, USING OR OTHERWISE ACCESSING ANY O-RAN SPECIFICATION, ADOPTER AGREES TO THE TERMS OF THIS AGREEMENT.
This O-RAN Adopter License Agreement (the “Agreement”) is made by and between the O-RAN Alliance and the entity that downloads, uses or otherwise accesses any O-RAN Specification, including its Affiliates (the “Adopter”).
This is a license agreement for entities who wish to adopt any O-RAN Specification.
Section 1: DEFINITIONS
1.1 “Affiliate” means an entity that directly or indirectly controls, is controlled by, or is under common control with another entity, so long as such control exists. For the purpose of this Section, “Control” means beneficial ownership of fifty (50%) percent or more of the voting stock or equity in an entity.
1.2 “Compliant Implementation” means any system, device, method or operation (whether implemented in hardware, software or combinations thereof) that fully conforms to a Final Specification.
1.3 “Adopter(s)” means all entities, who are not Members, Contributors or Academic Contributors, including their Affiliates, who wish to download, use or otherwise access O-RAN Specifications.
1.4 “Minor Update” means an update or revision to an O-RAN Specification published by O-RAN Alliance that does not add any significant new features or functionality and remains interoperable with the prior version of an O-RAN Specification. The term “O-RAN Specifications” includes Minor Updates.
1.5 “Necessary Claims” means those claims of all present and future patents and patent applications, other than design patents and design registrations, throughout the world, which (i) are owned or otherwise licensable by a Member, Contributor or Academic Contributor during the term of its Member, Contributor or Academic Contributorship; (ii) such Member, Contributor or Academic Contributor has the right to grant a license without the payment of consideration to a third party; and (iii) are necessarily infringed by a Compliant Implementation (without considering any Contributions not included in the Final Specification). A claim is necessarily infringed only when it is not possible on technical (but not commercial) grounds, taking into account normal technical practice and the state of the art generally available at the date any Final Specification was published by the O-RAN Alliance or the date the patent claim first came into existence, whichever last occurred, to make, sell, lease, otherwise dispose of, repair, use or operate a Compliant Implementation without infringing that claim. For the avoidance of doubt in exceptional cases where a Final Specification can only be implemented by technical solutions, all of which infringe patent claims, all such patent claims shall be considered Necessary Claims.
1.6 “Defensive Suspension” means for the purposes of any license grant pursuant to Section 3, Member, Contributor, Academic Contributor, Adopter, or any of their Affiliates, may have the discretion to include in their license a term allowing the licensor to suspend the license against a licensee who brings a patent infringement suit against the licensing Member, Contributor, Academic Contributor, Adopter, or any of their Affiliates.
Section 2: COPYRIGHT LICENSE
2.1 Subject to the terms and conditions of this Agreement, O-RAN Alliance hereby grants to Adopter a nonexclusive, nontransferable, irrevocable, non-sublicensable, worldwide copyright license to obtain, use and modify O-RAN Specifications, but not to further distribute such O-RAN Specification in any modified or unmodified way, solely in furtherance of implementations of an O-RAN Specification.
2.2 Adopter shall not use O-RAN Specifications except as expressly set forth in this Agreement or in a separate written agreement with O-RAN Alliance.
Section 3: FRAND LICENSE
3.1 Members, Contributors and Academic Contributors and their Affiliates are prepared to grant based on a separate Patent License Agreement to each Adopter under Fair Reasonable And Non- Discriminatory (FRAND) terms and conditions with or without compensation (royalties) a nonexclusive, non-transferable, irrevocable (but subject to Defensive Suspension), non-sublicensable, worldwide patent license under their Necessary Claims to make, have made, use, import, offer to sell, lease, sell and otherwise distribute Compliant Implementations; provided, however, that such license shall not extend: (a) to any part or function of a product in which a Compliant Implementation is incorporated that is not itself part of the Compliant Implementation; or (b) to any Adopter if that Adopter is not making a reciprocal grant to Members, Contributors and Academic Contributors, as set forth in Section 3.3. For the avoidance of doubt, the foregoing licensing commitment includes the distribution by the Adopter’s distributors and the use by the Adopter’s customers of such licensed Compliant Implementations.
3.2 Notwithstanding the above, if any Member, Contributor or Academic Contributor, Adopter or their Affiliates has reserved the right to charge a FRAND royalty or other fee for its license of Necessary Claims to Adopter, then Adopter is entitled to charge a FRAND royalty or other fee to such Member, Contributor or Academic Contributor, Adopter and its Affiliates for its license of Necessary Claims to its licensees.
3.3 Adopter, on behalf of itself and its Affiliates, shall be prepared to grant based on a separate Patent License Agreement to each Members, Contributors, Academic Contributors, Adopters and their Affiliates under Fair Reasonable And Non-Discriminatory (FRAND) terms and conditions with or without compensation (royalties) a nonexclusive, non-transferable, irrevocable (but subject to Defensive Suspension), non-sublicensable, worldwide patent license under their Necessary Claims to make, have made, use, import, offer to sell, lease, sell and otherwise distribute Compliant Implementations; provided, however, that such license will not extend: (a) to any part or function of a product in which a Compliant Implementation is incorporated that is not itself part of the Compliant Implementation; or (b) to any Members, Contributors, Academic Contributors, Adopters and their Affiliates that is not making a reciprocal grant to Adopter, as set forth in Section 3.1. For the avoidance of doubt, the foregoing licensing commitment includes the distribution by the Members’, Contributors’, Academic Contributors’, Adopters’ and their Affiliates’ distributors and the use by the Members’, Contributors’, Academic Contributors’, Adopters’ and their Affiliates’ customers of such licensed Compliant Implementations.
Section 4: TERM AND TERMINATION
4.1 This Agreement shall remain in force, unless early terminated according to this Section 4.
4.2 O-RAN Alliance on behalf of its Members, Contributors and Academic Contributors may terminate this Agreement if Adopter materially breaches this Agreement and does not cure or is not capable of curing such breach within thirty (30) days after being given notice specifying the breach.
4.3 Sections 1, 3, 5 - 11 of this Agreement shall survive any termination of this Agreement. Under surviving Section 3, after termination of this Agreement, Adopter will continue to grant licenses (a) to entities who become Adopters after the date of termination; and (b) for future versions of O-RAN Specifications that are backwards compatible with the version that was current as of the date of termination.
Section 5: CONFIDENTIALITY
Adopter will use the same care and discretion to avoid disclosure, publication, and dissemination of O-RAN Specifications to third parties, as Adopter employs with its own confidential information, but no less than reasonable care. Any disclosure by Adopter to its Affiliates, contractors and consultants should be subject to an obligation of confidentiality at least as restrictive as those contained in this Section. The foregoing obligation shall not apply to any information which is: (1) rightfully known by Adopter without any limitation on use or disclosure prior to disclosure; (2) publicly available through no fault of Adopter; (3) rightfully received without a duty of confidentiality; (4) disclosed by O-RAN Alliance or a Member, Contributor or Academic Contributor to a third party without a duty of confidentiality on such third party; (5) independently developed by Adopter; (6) disclosed pursuant to the order of a court or other authorized governmental body, or as required by law, provided that Adopter provides reasonable prior written notice to O-RAN Alliance, and cooperates with O-RAN Alliance and/or the applicable Member, Contributor or Academic Contributor to have the opportunity to oppose any such order; or (7) disclosed by Adopter with O-RAN Alliance’s prior written approval.
Section 6: INDEMNIFICATION
Adopter shall indemnify, defend, and hold harmless the O-RAN Alliance, its Members, Contributors or Academic Contributors, and their employees, and agents and their respective successors, heirs and assigns (the “Indemnitees”), against any liability, damage, loss, or expense (including reasonable attorneys’ fees and expenses) incurred by or imposed upon any of the Indemnitees in connection with any claims, suits, investigations, actions, demands or judgments arising out of Adopter’s use of the licensed O-RAN Specifications or Adopter’s commercialization of products that comply with O-RAN Specifications.
Section 7: LIMITATIONS ON LIABILITY; NO WARRANTY
EXCEPT FOR BREACH OF CONFIDENTIALITY, ADOPTER’S BREACH OF SECTION 3, AND ADOPTER’S INDEMNIFICATION OBLIGATIONS, IN NO EVENT SHALL ANY PARTY BE LIABLE TO ANY OTHER PARTY OR THIRD PARTY FOR ANY INDIRECT, SPECIAL, INCIDENTAL, PUNITIVE OR CONSEQUENTIAL DAMAGES RESULTING FROM ITS PERFORMANCE OR NON-PERFORMANCE UNDER THIS AGREEMENT, IN EACH CASE WHETHER UNDER CONTRACT, TORT, WARRANTY, OR OTHERWISE, AND WHETHER OR NOT SUCH PARTY HAD ADVANCE NOTICE OF THE POSSIBILITY OF SUCH DAMAGES. O-RAN SPECIFICATIONS ARE PROVIDED “AS IS” WITH NO WARRANTIES OR CONDITIONS WHATSOEVER, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE. THE O-RAN ALLIANCE AND THE MEMBERS, CONTRIBUTORS OR ACADEMIC CONTRIBUTORS EXPRESSLY DISCLAIM ANY WARRANTY OR CONDITION OF MERCHANTABILITY, SECURITY, SATISFACTORY QUALITY, NONINFRINGEMENT, FITNESS FOR ANY PARTICULAR PURPOSE, ERROR-FREE OPERATION, OR ANY WARRANTY OR CONDITION FOR O-RAN SPECIFICATIONS.
Section 8: ASSIGNMENT
Adopter may not assign the Agreement or any of its rights or obligations under this Agreement or make any grants or other sublicenses to this Agreement, except as expressly authorized hereunder, without having first received the prior, written consent of the O-RAN Alliance, which consent may be withheld in O-RAN Alliance’s sole discretion. O-RAN Alliance may freely assign this Agreement.
Section 9: THIRD-PARTY BENEFICIARY RIGHTS
Adopter acknowledges and agrees that Members, Contributors and Academic Contributors (including future Members, Contributors and Academic Contributors) are entitled to rights as a third-party beneficiary under this Agreement, including as licensees under Section 3.
Section 10: BINDING ON AFFILIATES
Execution of this Agreement by Adopter in its capacity as a legal entity or association constitutes that legal entity’s or association’s agreement that its Affiliates are likewise bound to the obligations that are applicable to Adopter hereunder and are also entitled to the benefits of the rights of Adopter hereunder.
Section 11: GENERAL
This Agreement is governed by the laws of Germany without regard to its conflict or choice of law provisions.
This Agreement constitutes the entire agreement between the parties as to its express subject matter and expressly supersedes and replaces any prior or contemporaneous agreements between the parties, whether written or oral, relating to the subject matter of this Agreement.
Adopter, on behalf of itself and its Affiliates, agrees to comply at all times with all applicable laws, rules and regulations with respect to its and its Affiliates’ performance under this Agreement, including without limitation, export control and antitrust laws. Without limiting the generality of the foregoing, Adopter acknowledges that this Agreement prohibits any communication that would violate the antitrust laws.
By execution hereof, no form of any partnership, joint venture or other special relationship is created between Adopter, or O-RAN Alliance or its Members, Contributors or Academic Contributors. Except as expressly set forth in this Agreement, no party is authorized to make any commitment on behalf of Adopter, or O-RAN Alliance or its Members, Contributors or Academic Contributors.
In the event that any provision of this Agreement conflicts with governing law or if any provision is held to be null, void or otherwise ineffective or invalid by a court of competent jurisdiction, (i) such provisions will be deemed stricken from the contract, and (ii) the remaining terms, provisions, covenants and restrictions of this Agreement will remain in full force and effect.
Any failure by a party or third party beneficiary to insist upon or enforce performance by another party of any of the provisions of this Agreement or to exercise any rights or remedies under this Agreement or otherwise by law shall not be construed as a waiver or relinquishment to any extent of the other parties’ or third party beneficiary’s right to assert or rely upon any such provision, right or remedy in that or any other instance; rather the same shall be and remain in full force and effect.