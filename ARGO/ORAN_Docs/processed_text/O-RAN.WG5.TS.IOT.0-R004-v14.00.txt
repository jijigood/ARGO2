O-RAN.WG5.TS.IOT.0-R004-v14.00
Technical Specification
O-RAN Open F1/W1/E1/X2/Xn Interface Working Group
Interoperability Test Specification (IOT)
Copyright © 2025 by O-RAN ALLIANCE e.V.
The copying or incorporation into any other work of part or all of the material available in this specification in any form without the prior written permission of O-RAN ALLIANCE e.V.  is prohibited, save that you may print or download extracts of the material of this specification for your personal use, or copy the material of this specification for the purpose of sending to individual third parties for their information provided that you acknowledge O-RAN ALLIANCE as the source of the material and that you inform the third party that these conditions apply to them and that they must comply with them.
O-RAN ALLIANCE e.V., Buschkauler Weg 27, 53347 Alfter, Germany.
Contents
Chapter 1 Introductory Material	10
1.1	Foreword	10
1.2	Scope	10
1.2.1 	General	10
1.2.2 	Applicability to O-RAN interoperability badging procedures	10
1.3	References	11
1.4	Definitions and Abbreviations	12
1.4.1	Definitions	12
1.4.2	Abbreviations	12
Chapter 2 Interoperability Measurements	13
2.1	Interoperability Test Definitions	13
2.1.1 	Test Configurations	13
2.1.1.1 	Device Under Test (DUT) and System Under Test (SUT)	13
2.1.1.2 	Testing Tools	15
2.1.1.3 	Assumptions	23
2.1.1.4 	Specifications to be used for testing	24
2.1.1.5 	Standard Test Configuration	24
2.2 	X2 Interoperability Test Cases	24
2.2.1 	X2 C-Plane IOT Test Cases	26
2.2.1.1 	EN-DC X2 Setup (eNB initiated)	26
2.2.1.2 	EN-DC X2 Setup (en-gNB initiated)	27
2.2.1.3 	Reset (eNB initiated)	28
2.2.1.4 	Reset (en-gNB initiated)	29
2.2.1.5 	Partial Reset (MeNB initiated)	30
2.2.1.6 	Partial Reset (en-gNB initiated)	31
2.2.1.7 	Secondary Node Addition (Option 3x)	32
2.2.1.8 	Secondary Node Release (MN initiated, Option 3x)	35
2.2.1.9 	Secondary Node Release (SN initiated, Option 3x)	37
2.2.1.10 	Secondary Node Change (MN initiated, Option 3x)	39
2.2.1.11 	Secondary Node Change (SN initiated, Option 3x)	41
2.2.1.12 	Inter-Master Node Handover (without SN Change, Option 3x)	44
2.2.1.13 	Master Node to eNB Change	46
2.2.1.14 	PCell change (Intra MN) (MN initiated)	48
2.2.1.15 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option	51
2.2.1.16 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option	53
2.2.1.17 	Served NR cell information Update (en-gNB initiated)	56
2.2.1.18 	Security Key Change (MN initiated)	58
2.2.1.19 	Measurement Gap Coordination Procedure (MN initiated)	60
2.2.1.20 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)	62
2.2.1.21 	Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)	64
2.2.1.22 	UL Configuration Update Procedure (SN initiated)	66
2.2.1.23 	Addition of SN terminated split bearer (MN initiated)	68
2.2.1.24 	Removal of SN terminated split bearer (MN initiated)	70
2.2.1.25 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated)	73
2.2.1.26 	Bearer type change from SN terminated MCG bearer to SN terminated split bearer (MN initiated)	75
2.2.1.27 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated)	77
2.2.1.28 	E-UTRA - NR Cell Resource Coordination (MN initiated, Option 3x/3a)	80
2.2.1.29 	E-UTRA - NR Cell Resource Coordination (SN initiated, Option 3x/3a)	81
2.2.1.30 	Allowed Band Combination list update (MN initiated)	83
2.2.1.31 	Configured Band Combination update by PSCell/SCell change (SN initiated)	84
2.2.1.32 	SCG config query (MN initiated)	86
2.2.1.33 	Full Reconfiguration (SN initiated)	87
2.2.1.34 	UE measurement transfer	89
2.2.1.35	Inter-Master Node Handover (with SN change, option 3x)	91
2.2.1.36 	EN-DC Resource Status Reporting Initiation	94
2.2.1.37 	EN-DC Resource Status Reporting	95
2.2.1.38 	Change of QCI (MN initiated)	96
2.2.1.39 	Measurement ID Coordination (MN initiated)	98
2.2.1.40 	DRB ID change/Security Key change (SN initiated)	100
2.2.1.41 	Measurement ID Coordination (SN initiated)	102
2.2.2 	X2 U-Plane IOT Test Cases	103
2.2.2.1 	Node behaviour of the corresponding node with RLC-AM and/or RLC-UM	103
2.2.2.2 	General for Elements for the NR user plane protocols with RLC-AM and/or RLC-UM	105
2.2.2.3 	Report Polling with RLC-AM and/or RLC-UM	108
2.2.2.4 	Buffer discard indication with RLC-AM and/or RLC-UM	110
2.2.2.5 	User data existence flag with RLC-AM and/or RLC-UM	112
2.2.2.6 	Assistance Information Report polling with RLC-AM and/or RLC-UM	113
2.2.2.7 	Radio quality assistance information with RLC-AM and/or RLC-UM	114
2.2.2.8 	DL report NR PDCP PDU SN with RLC-AM	116
2.3 	F1 Interoperability Test Cases	118
2.3.1	F1 C-Plane IOT Test Cases	123
2.3.1.1 	Partial Reset (MeNB initiated)	123
2.3.1.2 	Secondary Node Addition (Option 3x)	124
2.3.1.3 	Secondary Node Release (MN initiated, Option 3x)	126
2.3.1.4 	Secondary Node Release (SN initiated, Option 3x)	128
2.3.1.5 	Secondary Node Change (MN initiated, Option 3x)	130
2.3.1.6 	Secondary Node Change (SN initiated, Option 3x)	132
2.3.1.7 	Inter-Master Node Handover (without SN Change, Option 3x)	134
2.3.1.8 	Master Node to eNB Change	135
2.3.1.9 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario)	137
2.3.1.10 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option (Inter gNB-DU scenario)	139
2.3.1.11 	Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration	141
2.3.1.12 	F1 Setup for EN-DC	142
2.3.1.13 	gNB-DU Configuration Update for EN-DC	143
2.3.1.14 	gNB-CU Configuration Update for EN-DC	145
2.3.1.15 	F1 Setup for NR Stand-Alone	147
2.3.1.16 	gNB-DU Configuration Update for NR Stand-Alone	148
2.3.1.17 	gNB-CU Configuration Update for NR Stand-Alone	149
2.3.1.18 	Paging (CN-initiated)	151
2.3.1.19 	UE context creation (service request)	152
2.3.1.20 	UE context creation (registration request)	153
2.3.1.21 	UE Context Release	154
2.3.1.22 	gNB–CU Initiated UE Context Modification (SCell to be setup/removed)	156
2.3.1.23 	gNB–CU Initiated UE Context Modification (DRB to be setup)	158
2.3.1.24 	gNB–CU Initiated UE Context Modification (DRB to be released)	160
2.3.1.25 	Reset (gNB-DU initiated) for EN-DC	161
2.3.1.26	Reset (gNB-CU initiated) for EN-DC	163
2.3.1.27 	Partial Reset (gNB-DU initiated) for EN-DC	164
2.3.1.28 	Partial Reset (gNB-CU initiated) for EN-DC	165
2.3.1.29 	Reset (gNB-CU initiated) for NR Stand-Alone	167
2.3.1.30 	Reset (gNB-DU initiated) for NR Stand-Alone	168
2.3.1.31	Intra gNB-DU, Intra Cell Handover	169
2.3.1.32 	Intra gNB-DU, Inter Cell Handover	171
2.3.1.33 	Inter gNB-DU Handover	172
2.3.1.34	Inter RAT Handover to LTE	174
2.3.1.35	RRC Connection Re-establishment (Intra gNB-DU)	175
2.3.1.36	RRC Connection Re-establishment (Inter gNB-DU)	177
2.3.1.37 	RRC connected to RRC inactive	178
2.3.1.38 	RRC inactive to RRC connected, Intra gNB-CU	180
2.3.1.39	S-NG-RAN Node Addition procedure	181
2.3.1.40 	Resource Status Reporting Initiation	183
2.3.1.41 	Resource Status Reporting	184
2.3.1.42	Inter-Master Node Handover (with SN Change, Option 3x)	185
2.3.1.43 	Allowed Band Combination list update (MN initiated)	187
2.3.1.44 	SCG config query (MN initiated) for EN-DC	188
2.3.1.45 	gNB-DU initiated UE Context Modification (DRB to be released)	190
2.3.1.46	Inter RAT Handover to NR	191
2.3.1.47 	gNB-CU initiated UE Context Modification (DRX cycle activation/deactivation)	193
2.3.1.48	gNB-CU initiated UE Context Modification (DRB to be modified)	195
2.3.1.49 	M-NG-RAN node initiated SN modification	196
2.3.1.50 	NG-RAN Node Configuration Update	212
2.3.1.51 	Write-Replace Warning	213
2.3.1.52 	System Information Delivery for NR Stand-Alone	214
2.3.1.53 	S-NG-RAN node initiated SN modification with MN involvement	215
2.3.1.54	Master Node to gNB Change	225
2.3.1.55	Inter-Master Node Handover Without SN Change for NR-DC	226
2.3.1.56	SN Initiated SN Change for NR-DC	228
2.3.1.57	MN initiated SN Change	230
2.3.1.58	Full Reconfiguration (SN initiated)	232
2.3.1.59	Change of QCI (MN initiated)	233
2.3.1.60	Security Key change (MN initiated) for EN-DC	235
2.3.1.61	UL Configuration Update Procedure (SN initiated)	236
2.3.1.62	Void	238
2.3.1.63	RRC connection re-establishment (inter gNB-CU)	238
2.3.1.64	gNB-CU initiated UE Context Modification (UE AMBR (for UL) modification)	239
2.3.1.65	Inter gNB Handover for SA	241
2.3.1.66	S-NG-RAN node Initiated SN modification without MN involvement	243
2.3.1.67 	M-NG-RAN node initiated S-NG-RAN Node Release without keeping UE	246
2.3.1.68 	M-NG-RAN node initiated S-NG-RAN Node Release with keeping UE	248
2.3.1.69 	S-NG-RAN node initiated S-NG-RAN Node Release	249
2.3.1.70 	PDU Session Establishment	251
2.3.1.71 	RRC Inactive to RRC Connected, Inter gNB-CU	253
2.3.1.72 	Measurement ID Coordination (MN initiated)	254
2.3.1.73 	New QoS Flow with Explicit NAS Signalling	256
2.3.1.74 	PCell change (Intra MN) (MN initiated)	257
2.3.1.75 	DRB ID change/Security Key change (SN initiated)	259
2.3.1.76 	Measurement ID Coordination (SN initiated)	261
2.3.1.77 	Release of QoS Flow with Explicit Signalling	262
2.3.1.78 	PDU session establishment after signalling-only connection	264
2.3.1.79 	Inter-Master Node Handover with SN Change for NR-DC	265
2.3.1.80 	gNB-DU initiated UE Context Modification (DRB to be modified)	267
2.3.1.81 	Addition of SN terminated split bearer (MN initiated)	268
2.3.1.82 	Removal of SN terminated split bearer (MN initiated)	270
2.3.1.83 	Registration update without Follow-on request.	272
2.3.1.84 	Measurement Gap Coordination Procedure (MN initiated)	273
2.3.1.85 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)	274
2.3.2 	F1 U-Plane IOT Test Cases	276
2.3.2.1 	Node behaviour of the corresponding node for EN-DC with RLC-AM and/or RLC-UM	276
2.3.2.2 	Node behaviour of the corresponding node for SA with RLC-AM and/or RLC-UM	278
2.3.2.3 	Node behaviour of the corresponding node for NR-DC with RLC-AM and/or RLC-UM	280
2.3.2.4 	General for Elements for the NR user plane protocols for EN-DC with RLC-AM and/or RLC-UM	283
2.3.2.5 	General for Elements for the NR user plane protocols for SA with RLC-AM and/or RLC-UM	285
2.3.2.6 	General for Elements for the NR user plane protocols for NR-DC with RLC-AM and/or RLC-UM	288
2.3.2.7 	Report Polling for EN-DC with RLC-AM and/or RLC-UM	291
2.3.2.8 	Report Polling for SA with RLC-AM and/or RLC-UM	294
2.3.2.9 	Report Polling for NR-DC with RLC-AM and/or RLC-UM	296
2.3.2.10 	Buffer discard indication for EN-DC with RLC-AM and/or RLC-UM	299
2.3.2.11 	Buffer discard indication for SA with RLC-AM and/or RLC-UM	301
2.3.2.12 	Buffer discard indication for NR-DC with RLC-AM and/or RLC-UM	303
2.3.2.13 	User data existence flag for EN-DC with RLC-AM and/or RLC-UM	305
2.3.2.14 	User data existence flag for SA with RLC-AM and/or RLC-UM	307
2.3.2.15 	User data existence flag for NR-DC with RLC-AM and/or RLC-UM	308
2.3.2.16 	Assistance Information Report polling for EN-DC with RLC-AM and/or RLC-UM	310
2.3.2.17 	Assistance Information Report polling for SA with RLC-AM and/or RLC-UM	312
2.3.2.18 	Assistance Information Report polling for NR-DC with RLC-AM and/or RLC-UM	313
2.3.2.19 	Radio quality assistance information for EN-DC with RLC-AM and/or RLC-UM	315
2.3.2.20 	Radio quality assistance information for SA with RLC-AM and/or RLC-UM	317
2.3.2.21 	Radio quality assistance information for NR-DC with RLC-AM and/or RLC-UM	319
2.3.2.22 	DL report NR PDCP PDU SN for EN-DC with RLC-AM	321
2.3.2.23 	DL report NR PDCP PDU SN for SA with RLC-AM	322
2.3.2.24 	DL report NR PDCP PDU SN for NR-DC with RLC-AM	323
2.4 	Xn Interoperability Test Cases	325
2.4.1 	Xn C-Plane IOT Test Cases	327
2.4.1.1 	Xn Setup	327
2.4.1.2 	Inter gNB Handover	328
2.4.1.3 	S-NG-RAN Node Addition	330
2.4.1.4 	M-NG-RAN node initiated SN modification	332
2.4.1.5 	S-NG-RAN node initiated SN modification with MN involvement	349
2.4.1.6 	S-NG-RAN node initiated SN modification without MN involvement	362
2.4.1.7 	M-NG-RAN node initiated S-NG-RAN node Release without keeping UE	368
2.4.1.8 	M-NG-RAN node initiated S-NG-RAN node Release with keeping UE	369
2.4.1.9 	S-NG-RAN node initiated S-NG-RAN node Release	371
2.4.1.10 	Resource Status Reporting Initiation	374
2.4.1.11 	Resource Status Reporting	375
2.4.1.12 	Master Node to gNB Change	376
2.4.1.13 	Reset	378
2.4.1.14	Inter-Master Node Handover (Without SN Change)	379
2.4.1.15	Secondary Node Change (SN initiated)	381
2.4.1.16 	NG-RAN Node Configuration Update	384
2.4.1.17	UE measurement transfer	385
2.4.1.18	MN initiated SN Change	387
2.4.1.19	RRC connection re-establishment (inter gNB-CU)	389
2.4.1.20 	RRC Inactive to RRC Connected, Inter gNB-CU	390
2.4.1.21 	Measurement Gap Coordination Procedure (MN initiated)	392
2.4.1.22 	SN initiated Activity Notification	394
2.4.1.23 	Inter-Master Node Handover (with SN Change)	396
2.4.1.24 	Intra Master Node, intra gNB-DU intra Cell handover with Secondary Node change	398
2.4.1.25 	Intra Master Node, intra gNB-DU inter Cell handover with Secondary Node change	400
2.4.2 	Xn U-Plane IOT Test Cases	403
2.4.2.1 	Node behaviour of the corresponding node with RLC-AM and/or RLC-UM	403
2.4.2.2 	General for Elements for the NR user plane protocols with RLC-AM and/or RLC-UM	405
2.4.2.3 	Report Polling with RLC-AM and/or RLC-UM	407
2.4.2.4 	Buffer discard indication with RLC-AM and/or RLC-UM	409
2.4.2.5 	User data existence flag with RLC-AM and/or RLC-UM	411
2.4.2.6 	Assistance Information Report polling with RLC-AM and/or RLC-UM	413
2.4.2.7 	Radio quality assistance information with RLC-AM and/or RLC-UM	414
2.4.2.8 	DL report NR PDCP PDU SN with RLC-AM	416
Annex (informative)	418
Introductory Material
1.1	Foreword
This Technical Specification has been produced by the O-RAN Alliance.
The contents of the present document are subject to continuing work within O-RAN and may change following formal O-RAN approval. Should the O-RAN Alliance modify the contents of the present document, it will be re-released by O-RAN with an identifying change of release date and an increase in version number.
1.2	Scope
1.2.1 	General
The present document specifies the interoperability testing (IOT) for the radio access network nodes from different vendors connected using the X2, F1 and Xn interfaces implemented in accordance with the NR C-Plane [2] and U-Plane [3] profiles.
In this version of the specification:
X2 interoperability testing is focused on the eNB and en-gNB as the Devices under Tests (DUTs)
F1 interoperability testing is focused on the en-gNB consisting of the gNB-CU and gNB-DU as the DUTs and also the gNB consisting of the same elements
Xn interoperability testing is focused on the gNBs as the DUTs
In case an SUT component DUT is replaced by a test tool or by a node emulator (see section 2.1.1.1), messages captured at standardised interfaces in the test configuration may be used to check compliance of a DUT against that part of the applicable technical standards exercised by the IOT TCs for that configuration. In such SUT configurations, interoperability between DUTs from different vendors cannot be tested.
1.2.2 	Applicability to O-RAN interoperability badging procedures
The interoperability between network functions may be tested and verified by various activities between different DUT vendors. The outcome of such activities is documented in a test report and a badge may be awarded, according to the procedures described in [16].
This specification contains test cases that are applicable to one or several network configurations. Network configurations depend on the connected core network type (EPC or 5GC), on the selected radio access technology (LTE and NR) and on the (en-)gNB node architecture, ie, split into (en-)gNB-CU and (en-)gNB-DU or non-split (en-)gNB. Interoperability test activities and resulting reports and badges for the interfaces X2, Xn and F1, respectively, may refer to the below six network configurations:
NSA (EN-DC), non-split architecture
NSA (EN-DC), split architecture
SA, non-split architecture
SA, split architecture
SA including NR-DC, non-split architecture
SA including NR-DC, split architecture
The test cases applicable to one or more network configurations are mandatory to ensure interoperability between DUTs. The mapping table below contains the applicability of test cases to the above mentioned network configurations.  Some few test cases which require availability of, for example, specific spectrum resources may be omitted from interoperability test activities.
1.3	References
The following documents contain provisions which, through reference in this text, constitute provisions of the present document.
References are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.
For a specific reference, subsequent revisions do not apply.
For a non-specific reference, the latest version applies.
In the case of a reference to a 3GPP document, a non-specific reference implicitly refers to the latest version of that document in Release 18, or the latest 3GPP release prior to Release 18 that includes that document.
[1]	3GPP TR 21.905: “Vocabulary for 3GPP Specifications”
[2]	O-RAN.WG5.TS.C.1-v15.00 “NR C-Plane profile”
[3]	O-RAN.WG5.TS.U.0-v07.00 “NR U-Plane profile”
[4]	O-RAN.WG1.TS.OAD “RAN Architecture Description”
[5]	O-RAN.WG4.CUS.0-v04.00 “Control, User and Synchronization Specification”
[6]	O-RAN.WG5.Transport.0-v01.00 “Transport Specification”
[7]	3GPP TS 36.413: "Evolved Universal Terrestrial Radio Access Network (E-UTRAN); S1 Application Protocol (S1AP)"
[8]	3GPP TS 23.401: "General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access"
[9]	3GPP TS 36.211: "Evolved Universal Terrestrial Radio Access (E-UTRA); Physical channels and modulation"
[10]	3GPP TS 38.211: "NR; Physical channels and modulation"
[11]	3GPP TS 38.214: "NR; Physical layer procedures for data"
[12]	3GPP TS 36.423: "Evolved Universal Terrestrial Radio Access Network (E-UTRAN); X2 Application Protocol (X2AP)"
[13]	3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification"
[14]	3GPP TS 36.321: "Evolved Universal Terrestrial Radio Access (E-UTRA); Medium Access Control (MAC) protocol specification"
[15]	3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)"
[16]	O-RAN.TIFG.Cert-Badge.0-v06.00 “Certification and Badging Processes and Procedures”
[17]	3GPP TS 38.331: "NR; Radio Resource Control (RRC); Protocol specification"
[18]	3GPP TS 38.321: "NR; Medium Access Control (MAC) protocol specification"
1.4	Definitions and Abbreviations
1.4.1	Definitions
For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].
1.4.2	Abbreviations
Abbreviations used in this specification refer to the ones defined in the referenced 3GPP specifications and WG5 specifications.
Chapter 2 Interoperability Measurements
2.1	Interoperability Test Definitions
2.1.1 	Test Configurations
Interoperability testing is performed to prove that the end-to-end functionality between the radio access network nodes is as per specified in the O-RAN NR C-Plane [2] and U-Plane [3] profiles specifications on which these components are based. This requires system level testing of the radio access network nodes requiring interoperability testing as an integrated system.
Figure 2-1 shows the EN-DC Overall Architecture [2]. The en-gNB may consist of a gNB-CU and one or more gNB-DU(s). A gNB-CU and a gNB-DU is connected via the F1 interface.
Figure 2-1: EN-DC Overall Architecture
Figure 2-2 shows the NG-RAN Overall Architecture [2].
Figure 2-2: NG-RAN Overall Architecture
2.1.1.1 	Device Under Test (DUT) and System Under Test (SUT)
The case where the DUTs for X2, F1 and Xn interoperability tests are provided by different vendors is the focus of this document, but the case where both are from the same vendor is also valid.
Table 2-1 summarizes the DUTs and SUTs for X2, F1 and Xn interoperability testing scenarios.
Table 2-1: DUTs and SUTs for X2, F1 and Xn Interoperability Testing
The test configurations will involve defining the cardinality between the X DUT NE1(s) and Y DUT NE2(s) as part of the test scenario which will determine the configuration required. The simplest test configuration involves a single DUT NE1 and a single DUT NE2 ie, X=Y=1.
Figure 2-3, 2-4 and 2-5 show the SUT configurations for X2, F1 and Xn interoperability testing, respectively.
External physical connections between the X DUT NE1(s) and Y DUT NE2(s) are out of scope of this specification.
Figure 2-3: SUT configuration for X2 IOT
Figure 2-4: SUT configuration for F1 IOT (for en-gNB or gNB)
Figure 2-5: SUT configurations for Xn IOT
2.1.1.2 	Testing Tools
One of the key objectives of interoperability testing is to validate the functionality of production grade DUTs. Hence it is important to ensure that the DUTs are not negatively impacted with the utilization of internal functions solely to support interoperability testing, ie, DUTs are not expected to be testing tools when deployed in production networks and therefore DUTs should not be used as testing tools during interoperability tests.
Interoperability tests are performed with a set of testing tools which are used to both apply active stimulus and as well as passive monitoring and measurements of the DUTs.
2.1.1.2.1 	Testing Tools Summary
Table 2-2 shows a summary listing of the testing tools and the requirements of each of these testing tools for X2, F1 and Xn interfaces interoperability testing.
Table 2-2: Testing Tools Summary and Applicability to X2, F1 and Xn Interoperability Testing
2.1.1.2.2 	Testing Tools Details
This section describes details of the testing tools listed in Table 2-2.
In any test configuration that illustrates a DU, as an option as noted in Table 2-2, that DU may be substituted by O-DU and O-RU functions. Such substitution has no effect on the 3GPP interfaces that are the sole target of this specification. In all such cases the O-RU function may be performed by real or emulated equipment (No. 8 in Table 2-2). Additionally, where the F1 interface is not the object of the test, both O-DU and O-RU functions may be performed by an emulator (No 7 in Table 2-2).
Given that the objective of this test specification is to validate the interoperability between the radio access network nodes over the X2, F1 and Xn interface and protocols, the test setup can be simplified if there can be alternative means of connecting the Test UEs and/or UE emulator to the DUTs namely the eNB, en-gNB and gNB in the various interoperability test setups. This can be accomplished if the DU or DU emulator is connected via cable to the UE or UE emulator where that DU can optionally be an O-DU and O-RU or respective emulator.
Active stimulus testing tools
This paragraph shows details of active stimulus testing tools for X2, F1 and Xn interfaces interoperability testing.
NOTE: The number allocated to each testing tool below corresponds to the number on the list in Table 2-2.
No. 1: Test UEs and/or UE emulator: used to generate stateful UE connections and traffic to validate the DUTs implementation of the X2, F1 and Xn interface protocols as these are stimulated by the 3GPP upper layer protocols:
o	Required so that the DUTs do not need to be put into a “test mode” which does not happen in live deployments
o	Test UEs and UE emulator will be required to support EN-DC operations for X2 and F1 interoperability testing. Test UEs and UE emulator will be required to support Standalone (SA) mode for Xn interoperability testing
o	Test UEs will require SIM cards which are pre-provisioned with subscriber profiles. UEs used for testing can be simpler to setup but given that these Test UEs are designed as commercial UEs with possibly certain diagnostic functions enabled for logging purposes, they are limited in terms of configurability
o	UE emulator will require SIM profile configuration with the subscriber’s profiles. UE emulator can be used in test scenarios which require multiple UE sessions, more flexibility and configurability to help drive test scenarios
o	RF connection between the Test UEs or UE emulator with the DUTs namely the eNB, en-gNB and gNB will be either through cabled connection or Over-The-Air (OTA)
No. 2: Core or Core emulator: used to terminate stateful NAS sessions with Test UEs and/or UE emulator and stateful S1 or NG sessions with the DUTs:
o	Required so that the DUTs do not need to be put into a “test mode” which does not happen in live deployments
o	Core or Core emulator will be required to support EPC with EN-DC capabilities for X2 and F1 interoperability testing. Core or Core emulator will be required to support 5GC with SA capabilities for Xn and F1 interoperability testing
o	External physical connection between Core or Core emulator and eNB, en-gNB and gNB is out of scope of this specification
No. 4: Application Test Server: An endpoint application test traffic emulator which can be used to originate and/or terminate various traffic streams to or from the Test UEs or UE emulator, respectively. It may provide one or more of these options:
o	Stateful traffic, eg, TCP, TWAMP
o	Stateless traffic, eg, UDP
o	Required to place traffic load on the DUT
o	External physical connection between Application Test Server and Core or Core emulator is out of scope of the specification
Active stimulus testing tools are connected to DUTs. The following describes the interoperability test setup for X2, F1, and Xn.
X2 IOT Setup
Figure 2-6 shows the test setup for X2 interoperability testing with the DUTs eNB, en-gNB and their connections to active stimulus testing tools No. 1, 2, and 4.
Figure 2-6: X2 IOT setup
In addition to the above active stimulus testing tools, the following testing tools are also used for certain X2 IOT tests.
No. 3: eNB or eNB emulator: used to support Master Node (eNB) (DUT) to eNB change test case:
o	Required so that the Master Node (eNB) which is the DUT does not need to be put into a “test mode” which does not happen in live deployments
o	External physical connection between eNB or eNB emulator and Master Node (eNB) is out of scope of this specification
No. 6: Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the eNB and en-gNB over the X2 interface
F1 IOT setup (EN-DC)
Figure 2-7 shows the test setup for F1 interoperability testing with the en-gNB consisting of DUTs gNB-CU, gNB-DU and their connections to active stimulus testing tools No. 1, 2, and 4.
Figure 2-7: F1 IOT setup
In addition to the above active stimulus testing tools, following testing tools are also used for certain F1 IOT tests.
No. 3: eNB or eNB emulator: used to support F1 interoperability testing of the gNB-CU and gNB-DU with both DUTs belonging to the en-gNB:
o	Required so that the DUTs (gNB-CU, gNB-DU) do not need to be put into a “test mode” which does not happen in live deployments
o	External physical connection between the eNB or the eNB emulator and the gNB-CU is out of scope of this specification
No. 6: Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the gNB-CU and gNB-DU over the F1 interface
F1 IOT setup (SA)
Figure 2-7a shows the test setup for F1 interoperability testing with the gNB consisting of DUTs gNB-CU, gNB-DU and their connections to active stimulus testing tools No. 1, 2, and 4.
Figure 2-7a: F1 IOT setup
In addition to the above active stimulus testing tools, following testing tools are also used for certain F1 IOT tests.
No. 6: Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the gNB-CU and gNB-DU over the F1 interface
F1 IOT setup (NR-DC)
Figure 2-7b shows the test setup for F1 interoperability testing with the MgNB and SgNB consisting of DUTs gNB-CU, gNB-DU and their connections to active stimulus testing tools No. 1, 2, and 4.
Figure 2-7b: F1 IOT setup
In addition to the above active stimulus testing tools, following testing tools are also used for certain F1 IOT tests.
No. 6: Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the gNB-CU and gNB-DU over the F1 interface
Xn IOT setup
Figure 2-8 shows the test setup for Xn interoperability testing with the gNBs (DUTs) and their connections to active stimulus testing tools No. 1, 2, and 4.
Figure 2-8: Xn IOT setup
In addition to the above active stimulus testing tools, the following testing tools are also used for certain Xn IOT tests.
No. 6: Network Impairment Emulator: used to create impairments such as packet discards over the network interfaces. This emulator is connected in an in-line mode such as between the gNB(s) and gNB(s) over the Xn interface
Figure 2-9: VOID
Figure 2-10: VOID
Figure 2-11: VOID
Figure 2-12: VOID
Figure 2-12a: VOID
Figure 2-13: VOID
Passive monitoring and measurements testing tools
This paragraph shows details of passive monitoring and measurements testing tools for X2, F1 and Xn interfaces interoperability testing.
NOTE: The number allocated to each testing tool below corresponds to the number on the list in Table 2-2.
No. 5: Protocol Analyzer: used for protocol analysis and measurements of X2 and Xn interfaces C-Plane and U-Plane protocols; S1-U and NG-U interface protocols, and F1 interface C-Plane and U-Plane protocols:
o	Test case validation and troubleshooting purposes which can help with test setup validation and root cause analysis for test cases which fail
o	Monitoring traffic from the X2, F1, Xn, S1-U and NG-U interfaces typically through a tap or span port. Taps are typically preferred as span ports are less reliable but can be used if taps are not readily available in the test lab. Connectivity specifics (eg, number of 10/25/40/100 GE) is out of scope of this specification
NOTE:  If IPsec encryption (non-Null) is applied to the X2, F1, Xn, S1-U and NG-U interfaces, the Protocol Analyzer cannot be used to reliably analyze the procedures and protocols exchanged over these interfaces. Decryption of IPsec protected traffic for lab testing purpose can be possible but processing intensive particularly when dealing with dynamic security parameters
No.1 and 10 Test UE logging tool and/or UE emulator: used to produce measurements and logs:
o	Measurements and KPIs logs for test case validation and reporting
o	Diagnostics logs for troubleshooting purposes which can help with test setup validation and root cause analysis for failed test cases
o	Diagnostics mode shall be enabled on the Test UEs for diagnostic logging purposes. Device logging tools shall be connected to the Test UEs for logging purposes
o	UEs used for testing can be simpler to setup but given that these Test UEs are designed as commercial UEs, they are limited in terms of diagnostic logging capabilities due to limited processing and buffer space
o	UE emulator can be used in test scenarios which require extensive diagnostics capabilities
No. 9: Test results and KPIs reporting which can be provided through one or more of these options:
o	UE logging tools which are connected to the Test UEs
o	UE emulator reporting dashboard typically built in as part of the UE emulator solution
o	External dashboard and reporting applications
Passive monitoring and measurements testing tools are also connected to DUTs. Followings describe interoperability test setup for X2, F1, and Xn.
X2 IOT setup
Figure 2-14 shows the test setup for X2 interoperability testing with Passive measurements tools indicated.
Figure 2-14: X2 IOT setup with Passive measurements tools
F1 IOT setup (EN-DC)
Figure 2-15 shows the test setup for F1 interoperability testing with Passive measurements tools indicated for en-gNB scenarios.
Figure 2-15: F1 IOT setup with Passive measurements tools
F1 IOT Setup (SA)
Figure 2-15a shows the test setup for F1 interoperability testing with Passive measurements tools indicated for gNB scenarios.
Figure 2-15a: F1 IOT setup with Passive measurements tools gNB
Xn IOT setup
Figure 2-16 shows the test setup for Xn interoperability testing with Passive measurements tools indicated.
Figure 2-16: Xn IOT setup with Passive measurements tools
2.1.1.3 	Assumptions
In this version of the specification, the following assumptions apply:
1.	Management Plane - DUTs are in service and running in normal operating state. M-Plane interactions between the DUTs and Service Management and Orchestration (SMO) are out of scope in this version of the specification.
2.	Synchronization Plane - all the components including the DUTs and the Testing Tools are required to be synchronized to a common system time and master time source unless otherwise stated. S-Plane test setup details are out of scope in this version of the specification.
3.	Transport Plane – transport aspects between the DUTs and between the DUTs to the Test Equipment are out of scope in this version of the specification, but the WG5 Transport Specification [6] can be used as a reference. Examples of transport aspects include Physical Connectivity Interface (eg, connectivity rates), Data Link Layer Interface (layer 2 eg, VLAN, QoS marking), Network Layer Interface (layer 3 eg, IP version), (layer 4 eg, SCTP), Security (eg, IPsec).
4.	All wireline transport interfaces conform to ideal conditions (no impairments).
5.	All wireless connections (air interface) conform to ideal conditions (no impairments) unless otherwise stated in test cases which may have requirements to impair the wireless connections in order to stimulate handover scenarios for example.
6.	All wireless connections conform to ideal conditions (no impairments) and adopt 3GPP approaches for “ideal” RF environment test setup.
7.	All DUTs comply with the same version or compatible versions of the O-RAN WG5 C-Plane [2] and U-Plane [3] profiles.
8.	All elements in the interoperability test and the supporting test environment, where 3GPP support is relevant, comply with the same version or compatible versions of the 3GPP Specifications.
2.1.1.4 	Specifications to be used for testing
In this version of the specification, the following sets of specifications and releases/versions shall be supported
O-RAN WG5:
o	NR C-Plane profile [2]
o	NR U-Plane profile [3]
3GPP
o	3GPP Release and Version as listed in O-RAN WG5 NR C-Plane [2] and U-Plane [3] profiles specifications. It is important to ensure that all DUTs and Testing Tools use compatible release/version of the 3GPP specifications.
2.1.1.5 	Standard Test Configuration
Most interoperability tests will use a standard test configuration although individual tests are expected to deviate from this in some way. By defining the standard test configuration, an understanding of how the test setup is configured can be gained, thereafter examining individual tests can reveal the specific deviations from the standard test configuration and these specific deviations will be specified in each of the test cases
1.	The standard test setup involves a single DUT NE1 and a single DUT NE2 with DUT NE1 and DUT NE2 as specified in Table 2-1 in accordance with the interoperability test interfaces. Test cases which require more than a single DUT NE1 or DUT NE2 will specify the number of DUT NE1 and DUT NE2 required as part of the test case.
2.	IPsec encryption of the interface(s) under test is optional. If IPsec encryption with non-NULL encryption is enabled as part of the test setup, it would not be possible to perform test verification using the Protocol Analyzer without the Protocol Analyzer performing IPsec decryption. Details about IPsec decryption is out of scope of this specification.
2.2 	X2 Interoperability Test Cases
The following set of X2 IOT cases are defined in this version of the specification.
Table 2-3: IOT Test Cases for X2 implemented in accordance with the NR C-Plane [2] profile
Table 2-4: IOT Test Cases for X2 implemented in accordance with the NR U-Plane [3] profile
The initial test conditions which are common to all X2 test cases are listed below while the test case specific deviations of the initial test conditions will be specified in each of the test cases:
eNB(s) and en-gNB(s) are running in normal operating state
eNB(s) and en-gNB(s) are physically and logically connected
Core or Core emulator (EPC with EN-DC capabilities) is physically connected to eNB(s) and en-gNB(s)
S1 Setup procedure specified in 3GPP TS 36.413 [7] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the X2 and S1-U link(s)
2.2.1 	X2 C-Plane IOT Test Cases
2.2.1.1 	EN-DC X2 Setup (eNB initiated)
2.2.1.1.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated EN-DC X2 Setup procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.1.1.
2.2.1.1.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.1.3 	Initial Conditions
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.2.1.1.4 	Procedure
1.	Initiate the EN-DC X2 Setup procedure in MN (eNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	O&M command in eNB to enable X2 interface
2.	Observe the Protocol Analyzer X2 logs.
2.2.1.1.5 	Expected Results and Log Observation
2.2.1.1.5.1 	Expected Results
The EN-DC X2 Setup procedure is successfully completed.
2.2.1.1.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.1.1.1/4.1.1.1.2.
2.2.1.2 	EN-DC X2 Setup (en-gNB initiated)
2.2.1.2.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated EN-DC X2 Setup procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.1.2.
2.2.1.2.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.1.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.2.3 	Initial Conditions
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.2.1.2.4 	Procedure
1.	Initiate the EN-DC X2 Setup procedure in SN (en-gNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
O&M command in en-gNB to enable X2 interface
2.	Observe the Protocol Analyzer X2 logs.
2.2.1.2.5 	Expected Results and Log Observation
2.2.1.2.5.1 	Expected Results
The EN-DC X2 Setup procedure is successfully completed.
2.2.1.2.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.1.2.1/4.1.1.2.2.
2.2.1.3 	Reset (eNB initiated)
2.2.1.3.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Reset procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.1.
2.2.1.3.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.3.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.3.4 	Procedure
1.	Initiate the X2 Reset procedure in MN (eNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
O&M command to deactivate all cells serving UEs in MN which will initiate reset procedure to en-gNB
2.	Observe the Protocol Analyzer X2 link logs.
2.2.1.3.5 	Expected Results and Log Observation
2.2.1.3.5.1 	Expected Results
The Reset (eNB initiated) procedure is successfully completed.
2.2.1.3.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.2.1.1/4.1.2.1.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “RESET RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.2.1.4 	Reset (en-gNB initiated)
2.2.1.4.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Reset procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.2.
2.2.1.4.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.4.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.4.4 	Procedure
1.	Initiate the X2 Reset procedure in SN (en-gNB).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	O&M command to deactivate all cells serving UEs in SN, which will initiate reset procedure to eNB
2.	Observe the Protocol Analyzer X2 link logs.
2.2.1.4.5 	Expected Results and Log Observation
2.2.1.4.5.1 	Expected Results
The Reset (en-gNB initiated) procedure is successfully completed.
2.2.1.4.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.2.2.1/4.1.2.2.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “RESET RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.2.1.5 	Partial Reset (MeNB initiated)
2.2.1.5.1 	Test Purpose
The purpose of this test case is to verify that the MeNB initiated Partial Reset procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.1.
2.2.1.5.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.5.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
At least one UE context exists in en-gNB
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell and Secondary Node Addition procedure (eg, SN terminated split bearer) has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.5.4 	Procedure
1.	Perform the MeNB initiated Partial Reset procedure over X2 for a part of the Test UEs or emulated UEs.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the eNB in order to deactivate a few cells serving UEs.
2.	Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs.
2.2.1.5.5 	Expected Results and Log Observation
2.2.1.5.5.1 	Expected Results
The MeNB initiated Partial Reset procedure is successfully completed.
The selected UE contexts are successfully released in the en-gNB and data transfer on the en-gNB side between the Application Test Server and the Test UE or UE emulator has ended.
2.2.1.5.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.4.1.1/4.1.4.1.2.
Logs recorded in the Test UE or UE emulator shows:
o	After the end of Step 1, Test UE or UE emulator does NOT receive any data which is transmitted from en-gNB
2.2.1.6 	Partial Reset (en-gNB initiated)
2.2.1.6.1 	Test Purpose
The purpose of this test case is to verify that the en-gNB initiated Partial Reset procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.2.
2.2.1.6.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.6.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
At least one UE context exists in MeNB
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] have been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell and Secondary Node Addition procedure (eg, SN terminated split bearer) has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.6.4 	Procedure
1.	Perform the en-gNB initiated Partial Reset procedure over X2 for a part of the Test UEs or emulated UEs.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the en-gNB in order to deactivate a few cells serving UEs.
2.	Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs.
2.2.1.6.5 	Expected Results and Log Observation
2.2.1.6.5.1 	Expected Results
The en-gNB initiated Partial Reset procedure is successfully completed.
The selected UE contexts are successfully released in the MeNB and data transfer on the MeNB side between the Application Test Server and the Test UE or UE has ended.
2.2.1.6.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.4.2.1/4.1.4.2.2.
Logs recorded in the Test UE or UE emulator shows:
After the end of Step 1, Test UE or UE emulator does NOT receive any data which is transmitted from MeNB
2.2.1.7 	Secondary Node Addition (Option 3x)
2.2.1.7.1 	Test Purpose
The purpose of this test case is to verify that the Secondary Node Addition (Option 3x) procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.1.1.
2.2.1.7.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.1.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.7.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary node has not yet been added to the Test UE or UE emulator
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.7.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Addition (Option 3x) procedure. This involves observing that the user plane data forwarded from the eNB to the en-gNB over the X2 interface during the Secondary Node Addition (Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the eNB to start buffering user plane downlink data prior to the addition of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Secondary Node Addition (Option 3x) procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SgNB Addition Request procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.7.5 	Expected Results and Log Observation
2.2.1.7.5.1 	Expected Results
The Secondary Node Addition (Option 3x) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.7.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.1.1.1/5.1.1.2.
If any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs which are:
o	Forwarded to the Test UE or emulated UE from the eNB towards the en-gNB via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
o	Transmitted to the Test UE or emulated UE from the en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the en-gNB.
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.8 	Secondary Node Release (MN initiated, Option 3x)
2.2.1.8.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated SgNB Release procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.2.1.
2.2.1.8.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.2.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and S1 procedural flows and content
2.2.1.8.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.8.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Release (MN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the en-gNB to the eNB over the X2 interface during the Secondary Node Release (MN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
2.	One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
3.	Perform Secondary Node Release Procedure from MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Provoke a Radio Link Failure in SCG, so MN receives SCG Failure Information NR message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
4.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
5.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
6.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.8.5 	Expected Results and Log Observation
2.2.1.8.5.1 	Expected Results
The Secondary Node Release procedure is successfully completed.
All the data generated is correctly received by UE after the release procedure.
2.2.1.8.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.2.1.1/5.2.1.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE respectively NR RAT is recorded in the S1 logs
2.2.1.9 	Secondary Node Release (SN initiated, Option 3x)
2.2.1.9.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated SgNB Release procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.2.2.
2.2.1.9.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.2.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and S1 procedural flows and content
2.2.1.9.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.9.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Release (SN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the en-gNB to the eNB over the X2 interface during the Secondary Node Release (SN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Release Procedure from SN (en-gNB) side
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Block NR cell in en-gNB. One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell
b.	Provoke conditions in a way that the SN detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SN and the Test UE or UE emulator so that the emulated interference can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.9.5 	Expected Results and Log Observation
2.2.1.9.5.1 	Expected Results
The Secondary Node Release procedure is successfully completed.
All the data generated is correctly received by UE after the release procedure.
2.2.1.9.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.2.2.1/5.2.2.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE respectively NR RAT is recorded in the S1 logs
2.2.1.10 	Secondary Node Change (MN initiated, Option 3x)
2.2.1.10.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated SgNB Change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.3.1.
2.2.1.10.2 	Minimum Requirements
DUTs: Single eNB and two en-gNB (Source en-gNB – S-SN, Target en-gNB – T-SN):
DUTs shall apply the parameter condition specified in 5.3.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and S1 links procedural flows and content
2.2.1.10.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.10.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change (MN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the source en-gNB to the eNB and from the eNB to the target en-gNB over the X2 interface during the Secondary Node Change (MN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Change Procedure from MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Secondary Node Change procedure.
3.	Stop data transfer from the Application Test Server to the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.10.5 	Expected Results and Log Observation
2.2.1.10.5.1 	Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.10.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.3.1.1/5.3.1.2.
If any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs which are:
o	Forwarded to the Test UE or emulated UE from the source en-gNB towards the eNB and from the eNB towards the target en-gNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
o	Transmitted to the Test UE or emulated UE from the target en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the target en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the target en-gNB
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from target en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to target en-gNB) is recorded in the X2 logs
2.2.1.11 	Secondary Node Change (SN initiated, Option 3x)
2.2.1.11.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated SgNB Change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.3.2.
2.2.1.11.2 	Minimum Requirements
DUTs: Single eNB and two en-gNB (Source en-gNB – S-SN, Target en-gNB – T-SN):
DUTs shall apply the parameter condition specified in 5.3.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and S1 links procedural flows and content
2.2.1.11.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.11.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change (SN Initiated, Option 3x) procedure. This involves observing that the user plane data forwarded from the source en-gNB to the eNB and from the eNB to the target en-gNB over the X2 interface during the Secondary Node Change (SN Initiated, Option 3x) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Change Procedure from Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Move the Test UE or UE emulator from the coverage area of Source en-gNB cell (S-SN) towards Target en-gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-TN.
3.	Stop data transfer from the Application Test Server to the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.11.5 	Expected Results and Log Observation
2.2.1.11.5.1 	Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.11.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.3.2.1/5.3.2.2.
If any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB CHANGE CONFIRM”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs which are:
o	Forwarded to the Test UE or emulated UE from the source en-gNB towards the eNB and from the eNB towards the target en-gNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
o	Transmitted to the Test UE or emulated UE from the target en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the target en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the target en-gNB.
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from target en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to target en-gNB) is recorded in the X2 logs
2.2.1.12 	Inter-Master Node Handover (without SN Change, Option 3x)
2.2.1.12.1 	Test Purpose
The purpose of this test case is to verify that the Inter-Master Node Handover (without SN Change, Option 3x) procedure with two eNBs and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.4.1.
2.2.1.12.2 	Minimum Requirements
DUTs: Two eNBs (Source eNB – S-MN, Target eNB – T-MN) and single en-gNB:
DUTs shall apply the parameter condition specified in 5.4.1 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell and en-gNB cell overlap
The coverage of Target eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Inter-Master Node Handover procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe all three X2 links procedural flows and content
2.2.1.12.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between both the source eNB and en-gNB, and the target eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and en-gNB cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.12.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the Inter-Master Node Handover (without SN Change, Option 3x) procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Inter-Master Node Handover (without SN Change, Option 3x) procedure from source eNB (S-MN), target eNB (T-MN)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The Test UE or UE emulator sends a Measurement Report to the source eNB (S-MN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source eNB (S-MN) and the target eNB (T-MN) simultaneously. In this specific case, the source eNB (S-MN) cell can start off with low attenuation applied which is subsequently increased. At the same time, the target eNB (T-MN) cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source eNB (S-MN).
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.12.5 	Expected Results and Log Observation
2.2.1.12.5.1 	Expected Results
The Inter-Master Node Handover (without SN Change, Option 3x) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.12.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.4.1.1/5.4.1.2.
If any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to source eNB after step 2 and from en-gNB to target eNB in step 4) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from source eNB to en-gNB after step 2 and target eNB to en-gNB in step 4) is recorded in the X2 logs
2.2.1.13 	Master Node to eNB Change
2.2.1.13.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to eNB Change procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.5.1.
2.2.1.13.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.5.1 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell (S-MN), Target eNB cell (T-MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Master Node to eNB Change procedure
Target eNB or Target eNB emulator: used to perform Master Node to eNB Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content and, S1-U UP content
2.2.1.13.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB or target eNB emulator specified in 3GPP TS 36.423 [12] has been successfully completed
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and SN cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Then SCG configuration query has been completed if needed
2.2.1.13.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Master Node to eNB Change procedure. This involves observing that the user plane data forwarded from the en-gNB to the source eNB over the X2 interface during the Master Node to eNB Change procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform the Master Node to eNB Change Procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The handover to Target eNB is decided by the Master Node based on the Measurement Report sent from the Test UE or UE emulator. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and Master Node cell and the eNB cell simultaneously. In this specific case, the Master Node cell can start off with low attenuation applied which is subsequently increased. At the same time, the eNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Master Node to eNB Change procedure.
3.	Stop data transfer from the Application Test Server to the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during MCG Bearer(s) operation. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.13.5 	Expected Results and Log Observation
2.2.1.13.5.1 	Expected Results
The Master Node to eNB Change Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.13.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.5.1.1/5.5.1.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to source eNB in step 1, en-gNB to source eNB to target eNB after step 2) is correctly received by the Test UE or emulated UE via LTE RAT, no U-Plane data recorded in the X2 logs in step 4
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT (ie, all U-Plane data to be transferred from source eNB to en-gNB in step 1, from source eNB to target eNB and en-gNB to source eNB to target eNB after step 2) is recorded in the X2 logs, no U-Plane data recorded in the X2 logs in step 4
2.2.1.14 	PCell change (Intra MN) (MN initiated)
2.2.1.14.1 	Test Purpose
The purpose of this test case is to verify that the PCell change (Intra MN) (MN initiated) procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.1.
2.2.1.14.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.1 of the NR C-Plane profile specification [2]
eNB has at least 2 Cells configured and in operation
The coverage of Intra-eNB source cell and en-gNB cell overlap
The coverage of Intra-eNB target cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PCell change (Intra MN) (MN initiated) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.14.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB Source cell and SN cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.14.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the PCell change (Intra MN) (MN initiated) procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform PCell change (Intra MN) procedure on the MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MN Source Cell and the Target Cell simultaneously. In this specific case, the MN Source Cell can start off with low attenuation applied which is subsequently increased. At the same time, the Target Cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the handover from the Source Cell to the Target Cell.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.14.5 	Expected Results and Log Observation
2.2.1.14.5.1 	Expected Results
The PCell change (Intra MN) (MN initiated) procedure is successfully completed and data transfer between the Application Test Server and the Test UE or UE emulator is not interrupted throughout the test case execution.
2.2.1.14.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 5.6.1.1/5.6.1.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after Step 2 and generated in Step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from SN en-gNB to MN eNB in step 1 and after step 2 and in step 4) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after Step 2 and in Step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from MN eNB to SN en-gNB in step 1 and after step 2 and in step 4) is recorded in the X2 logs
2.2.1.15 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option
2.2.1.15.1 	Test Purpose
The purpose of this test case is to verify that the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.15.
2.2.1.15.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.15 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cells overlap
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.15.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and one SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.15.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the PSCell Change using SRB1 for RRC Reconfiguration (full configuration) procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The condition by which UE sends an ULInformationTransferMRDC message to the MN depends on the configuration done by MN. Still, we can create a situation where PSCell Change occurs. There should be at least two en-gNB cells within the coverage of a cell under eNB. The first cell under en-gNB which is PSCell and the second cell under en-gNB which is not PSCell. If the tester manually degrades the radio quality of the first en-gNB cell this can be the trigger of the PSCell Change procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first en-gNB cell. In this specific case, the first en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the PSCell Change procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.15.5 	Expected Results and Log Observation
2.2.1.15.5.1 	Expected Results
The PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.15.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.6.15.1/5.6.15.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.16 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option
2.2.1.16.1 	Test Purpose
The purpose of this test case is to verify that the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.16.
2.2.1.16.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.16 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cells overlap
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.1.16.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the eNB cell and one en-gNB cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.16.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the PSCell Change using SRB1 for RRC Reconfiguration (delta configuration) procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The condition by which UE sends an ULInformationTransferMRDC message to the MN depends on the configuration done by MN. Still, we can create a situation where PSCell Change occurs. There should be at least two en-gNB cells within the coverage of a cell under eNB. The first cell under en-gNB which is PSCell and the second cell under en-gNB which is not PSCell. If the tester manually degrades the radio quality of the first en-gNB cell, this can be the trigger of the PSCell Change procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first en-gNB cell. In this specific case, the first en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the PSCell Change procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data) or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.16.5 	Expected Results and Log Observation
2.2.1.16.5.1 	Expected Results
The PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.16.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.6.16.1/5.6.16.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.17 	Served NR cell information Update (en-gNB initiated)
2.2.1.17.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Served NR cell Update procedure, with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.3.1.
2.2.1.17.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 4.1.3.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cells overlap
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.17.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.17.4 	Procedure
1.	Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Delete
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell failure. One of the possible methods can be to make use of O&M command in the en-gNB in order to make one of en-gNB cell failure status
2.	Perform a procedure to observe that the en-gNB cell deleted in step 1 is not enabled for EN-DC PSCell or SCell
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell performing as PSCell and the en-gNB cell deleted in step 1 simultaneously. In this specific case, the en-gNB cell performing as PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the en-gNB cell deleted in step 1 can start off with high attenuation applied which is subsequently lowered to a level which can trigger PSCell Change procedure.
Note that although PSCell Change procedure is listed as an example in this step, it does not mean this test case verifies correct PSCell Change procedure (The test case of PSCell Change procedure is specified in 2.2.1.15 and 2.2.1.16 in this specification).
3.	Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Add
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the en-gNB in order to make the en-gNB cell deleted in step 1 recover from failure status
4.	Perform a procedure to observe that the en-gNB cell added in step 3 is enabled for EN-DC PSCell or SCell
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell performing as PSCell and the en-gNB cell added in step 3 simultaneously. In this specific case, the en-gNB cell performing as PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the en-gNB cell added in step 3 can start off with high attenuation applied which is subsequently lowered to a level which can trigger PSCell Change procedure.
b.	In case that PSCell is not configured to test UE or UE emulator after step 2, to trigger Secondary Node addition procedure in order to configure the en-gNB cell recovered in step 3 as PSCell
5.	Perform Served NR cell information Update (en-gNB initiated) procedure for served NR cells to Modify
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	NR PCI information of the en-gNB cell is changed. One of the possible methods can be to make use of O&M command in the en-gNB in order to change the NR PCI
6.	Perform a procedure to observe the information modified in step 5
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	In case that NR PCI information of the en-gNB cell is changed in step 5, to make test UE or UE emulator send Measurement Report including NR PCI information of the en-gNB cell.
7.	Observe the Protocol Analyzer X2 link logs and Test UE or UE emulator logs
2.2.1.17.5 	Expected Results and Log Observation
2.2.1.17.5.1 	Expected Results
The Served NR cell information Update (en-gNB initiated) is successfully completed in each case, ie, to Add, to Modify, and to Delete case.
2.2.1.17.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.3.1.1/4.1.3.1.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “EN-DC CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Test UE or UE emulator logs show that:
In step 2, the en-gNB cell deleted in step 1 is not enabled for EN-DC PSCell or SCell
In step 4, the en-gNB cell added in step 3 is enabled for EN-DC PSCell or SCell
In step 6, the information modified in step 5 is included
2.2.1.18 	Security Key Change (MN initiated)
2.2.1.18.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Security Key Change procedure, with MN (eNB) and SN (en-gNB) from different vendors, can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.5.
2.2.1.18.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.5 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform MN initiated Security Key Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.18.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.18.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform Security Key Change procedure (MN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform PCell Change (Intra MN) (MN initiated) procedure (See step 2 in 2.2.1.14.4)
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Security Key Change procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.18.5 	Expected Results and Log Observation
2.2.1.18.5.1 	Expected Results
The Security Key Change procedure (MN initiated) is successfully completed.
2.2.1.18.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.5.1/5.6.5.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
S1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in UE:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the S1 logs, but is not recorded in X2 logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE via LTE RAT or NR RAT.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
2.2.1.19 	Measurement Gap Coordination Procedure (MN initiated)
2.2.1.19.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination Procedure (MN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.6.
2.2.1.19.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.6 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination Procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.19.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [7] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.19.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the Measurement Gap Coordination procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Measurement Gap Coordination Procedure (MN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	An eNB receives Measurement Report from UE
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data) or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.19.5 	Expected Results and Log observation
2.2.1.19.5.1 	Expected Results
The Measurement Gap Coordination Procedure (MN initiated) is successfully completed.
2.2.1.19.5.2 	Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-Plane profile specification [2] Sections 5.6.6.1/5.6.6.2.
If any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4::
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.20 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
2.2.1.20.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.7.
2.2.1.20.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.7 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.20.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.20.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the Measurement Gap Coordination for per FR1 or per UE gap procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	An en-gNB receive X2AP: RRC TRANSFER as specified in 5.7.1 of NR C-Plane profile specification [2]
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data) or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer X2 logs
2.2.1.20.5 	Expected Results and Log observation
2.2.1.20.5.1 	Expected Results
The Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) is successfully completed.
2.2.1.20.5.2 	Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-Plane profile specification [2] Sections 5.6.7.1/5.6.7.2.
If any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.21 	Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)
2.2.1.21.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.8.
2.2.1.21.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.8 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.21.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.21.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the Measurement Gap Coordination for per FR2 gap procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	An en-gNB receives X2AP: RRC TRANSFER as specified in 5.7.1 of NR C-Plane profile specification [2]
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data) or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs  and Test UE or UE emulator logs
2.2.1.21.5 	Expected Results and Log observation
2.2.1.21.5.1 	Expected Results
The Measurement Gap Coordination for per FR2 gap (with MN involvement) Procedure (SN initiated) is successfully completed.
2.2.1.21.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-Plane profile specification [2] Sections 5.6.8.1/5.6.8.2.
If any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.22 	UL Configuration Update Procedure (SN initiated)
2.2.1.22.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated UL Configuration Update procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.9.
2.2.1.22.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.9 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.22.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.22.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform UL Configuration Update procedure (SN initiated) for the purpose of changing from share to only of the UL Configuration IE
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	To make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. One of the possible methods can be to degrade the radio quality of the en-gNB cell. And to make use of O&M command in SN side to change from share to only of the UL configuration IE.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.22.5 	Expected Results and Log Observation
2.2.1.22.5.1 	Expected Results
The UL Configuration Update Procedure (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.22.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.9.1/5.6.9.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION COFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.23 	Addition of SN terminated split bearer (MN initiated)
2.2.1.23.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform addition of SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.10.
2.2.1.23.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.10 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.23.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.23.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink transmission correctly during the Secondary Node Modification (MN Initiated, addition of SN terminated split bearer) procedure. This involves observing that the user plane data transferred from the eNB to the en-gNB over the X2 interface during the Secondary Node Modification (MN Initiated, addition of SN terminated split bearer) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the LTE RAT is to transfer user plane data at data rates high enough for the eNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Secondary Node Modification with addition of SN terminated split bearer procedure from MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Trigger from Core or Core emulator (EPC with EN-DC capabilities) to add a new E-RAB for this Test UE or UE emulator
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds on the new bearer
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly on the newly established SN terminated split bearer in above step 2. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.23.5 	Expected Results and Log Observation
2.2.1.23.5.1 	Expected Results
The Secondary Node Modification procedure (MN initiated) with addition of SN terminated split bearer procedure is successfully completed.
2.2.1.23.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.10.1/5.6.10.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
o	Forwarded to the Test UE or emulated UE from the eNB towards the en-gNB via their corresponding established DL Forwarding GTP Tunnels if data forward is used, is correctly received by the Test UE or emulated UE via the NR RAT
o	Transmitted to the Test UE or emulated UE from the en-gNB to the eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the en-gNB to transmit the user plane data which it has received from the eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the eNB and the LTE RAT when it is used by the en-gNB.
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1, after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.24 	Removal of SN terminated split bearer (MN initiated)
2.2.1.24.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform removal of SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.11.
2.2.1.24.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.11 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.24.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure which, including at least two SN terminated split bearers between the eNB and en-gNB, has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.24.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the Secondary Node Modification (MN Initiated, Removal of SN terminated split bearer) procedure. This involves observing that the user plane data transferred between the en-gNB to the eNB over the X2 interface during the Secondary Node Modification (MN Initiated, Removal of SN terminated split bearer) procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Modification with removal of SN terminated split bearer from MN (eNB) side
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Trigger from Core or Core emulator (EPC with EN-DC capabilities) to delete the E-RAB bearer on the established with split bearer for this Test UE or UE emulator
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds on the remaining bearer
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after removal of Split Bearer(s) operation with Secondary Node Modification procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the LTE RAT is to transfer user plane data at data rates high enough for the eNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.24.5 	Expected Results and Log Observation
2.2.1.24.5.1 	Expected Results
The Secondary Node Modification procedure (MN initiated) with removal of SN terminated split bearer procedure is successfully completed
2.2.1.24.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.11.1/5.6.11.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT in case of EN-DC operation with SN terminated split bearer
Regarding the uplink U-Plane data generated in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs in case of EN-DC operation with SN terminated split bearer
2.2.1.25 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated)
2.2.1.25.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated split bearer to SN terminated MCG bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.12.
2.2.1.25.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.12 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.25.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.25.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer. It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Modification procedure from MN (eNB) side to trigger the bearer type change from SN terminated split bearer to SN terminated MCG bearer
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell (SN) can start off with low attenuation applied which is subsequently increased to a level in case of the eNB cell (MN) without changes to trigger Secondary Node Modification procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the MCG Bearer(s) usage of the LTE RAT is to transfer user plane data at data rates high enough for the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.25.5 	Expected Results and Log Observation
2.2.1.25.5.1 	Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.25.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.12.1/5.6.12.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data forwarded from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.26 	Bearer type change from SN terminated MCG bearer to SN terminated split bearer (MN initiated)
2.2.1.26.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated MCG bearer to SN terminated split bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.13.
2.2.1.26.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.13 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.26.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated MCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.26.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer (MN initiated). It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
One of the methods which can be used to stimulate the MCG Bearer(s) usage of the LTE is to transfer user plane data at data rates high enough for the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
2.	Perform Secondary Node Modification procedure from MN (eNB) side to trigger the bearer type change from SN terminated MCG bearer to SN terminated split bearer
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with high attenuation applied which is subsequently reduced to a level in case of the eNB cell (MN) without changes to trigger Secondary Node Modification procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.26.5 	Expected Results and Log Observation
2.2.1.26.5.1 	Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.26.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.13.1/5.6.13.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transmission from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 log
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.27 	Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated)
2.2.1.27.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Secondary Node Modification procedure to perform bearer type change from SN terminated split bearer to SN terminated MCG bearer with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.14.
2.2.1.27.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.14 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content, S1-U UP content
2.2.1.27.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.27.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during bearer type change operation from SN terminated split bearer to SN terminated MCG bearer (SN initiated). It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Modification procedure from SN (en-gNB) side to trigger the bearer type change from SN terminated split bearer to SN terminated MCG bearer
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Block the en-gNB cell (SN). One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly in case of SN terminated MCG bearer configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the MCG Bearer(s) usage of the LTE is to transfer user plane data at data rates high enough for the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.27.5 	Expected Results and Log Observation
2.2.1.27.5.1 	Expected Results
The Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.27.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.14.1/5.6.14.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transmission from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
The message flow and IEs for “Bearer type change from SN terminated split bearer to SN terminated MCG bearer (SN initiated) – X2 message flow, successful operation” are specified in the NR C-Plane profile specification [2] Sections 5.6.14.1/5.6.14.2.
2.2.1.28 	E-UTRA - NR Cell Resource Coordination (MN initiated, Option 3x/3a)
2.2.1.28.1 	Test Purpose
The purpose of this test case is to verify that the E-UTRA - NR Cell Resource Coordination procedure from MN (eNB) side to request the exchange the DSS information between MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.8.1.
2.2.1.28.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.8.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
The MN (eNB) cell and SN (en-gNB) cell are same frequency band
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.28.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Enable the Dynamic Spectrum Sharing in MN (eNB) cell and SN (en-gNB) cell
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer or SN terminated SCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.28.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly for SN terminated split bearer or SN terminated SCG bearer.
2.	Perform the E-UTRA - NR Cell Resource Coordination procedure from MN (eNB) side to trigger the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Increase the load of eNB cell (MN), eg, using more Test UE or UE emulator to send/receive traffic. The MN (eNB) requests more resources from SN (en-gNB) to serve the Test UE or UE emulator via LTE RAT.
3.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.28.5 	Expected Results and Log Observation
2.2.1.28.5.1 	Expected Results
The E-UTRA - NR Cell Resource Coordination procedure (MN initiated) with the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum executed successfully, and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.28.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.8.1.1/5.8.1.2.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from en-gNB to eNB) is recorded in the X2 logs in case of EN-DC operation with SN terminated split bearer
Regarding the uplink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs in case of EN-DC operation with SN terminated split bearer
2.2.1.29 	E-UTRA - NR Cell Resource Coordination (SN initiated, Option 3x/3a)
2.2.1.29.1 	Test Purpose
The purpose of this test case is to verify that the E-UTRA - NR Cell Resource Coordination procedure from SN (en-gNB) side to request the exchange the DSS information between MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.8.2.
2.2.1.29.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.8.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
The MN (eNB) cell and SN (en-gNB) cell are same frequency band
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.29.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Enable the Dynamic Spectrum Sharing in MN (eNB) cell and SN (en-gNB) cell
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (eg, SN terminated split bearer or SN terminated SCG bearer) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.29.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly for SN terminated split bearer or SN terminated SCG bearer.
2.	Perform the E-UTRA - NR Cell Resource Coordination procedure from SN (en-gNB) side to trigger the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Increase the load of en-gNB cell (SN), eg, using more Test UE or UE emulator to send/receive traffic. The SN (en-gNB) requests more resources from MN (eNB) to serve the Test UE or UE emulator via NR RAT.
3.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.29.5 	Expected Results and Log Observation
2.2.1.29.5.1 	Expected Results
The E-UTRA - NR Cell Resource Coordination procedure (SN initiated) with the coordination of radio resource allocation between MN (eNB) and SN (en-gNB) that are sharing spectrum executed successfully, and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.29.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.8.2.1/5.8.2.2.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs is correctly received by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from en-gNB to eNB) in case of EN-DC operation with SN terminated split bearer
Regarding the uplink U-Plane data generated in step 1 and step 2:
o	All U-Plane data sent from the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data sent from the Test UE or UE emulator via NR RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs in case of EN-DC operation with SN terminated split bearer
2.2.1.30 	Allowed Band Combination list update (MN initiated)
2.2.1.30.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated Allowed Band Combination list update procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.2.
2.2.1.30.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform MN initiated Allowed Band Combination list update procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.30.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.30.4 	Procedure
1.	Perform Allowed Band Combination list update procedure (MN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The condition by which eNB update an allowedBC-ListMRDC to the en-gNB depends on the eNB implementation. Still, we can create a situation where Allowed Band Combination list update occurs. One of the possible methods programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB SCell. In this specific case, the retained multiple LTE SCells are deleted and the eNB causes Band Combination list to be updated.
2.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.30.5 	Expected Results and Log Observation
2.2.1.30.5.1 	Expected Results
The Allowed Band Combination list update (MN initiated) procedure is successfully completed.
2.2.1.30.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.2.1/5.6.2.2.
If any of the following listed IEs is observed in the X2 log.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 logs recorded in the Protocol Analyzer show that:
After step 1 the updated allowedBC-ListMRDC is applied in en-gNB:
o	An example of how to observe the updated allowedBC-ListMRDC is to check X2 log. The exact method to observe the updated allowedBC-ListMRDC is out of scope of this specification.
2.2.1.31 	Configured Band Combination update by PSCell/SCell change (SN initiated)
2.2.1.31.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Configured Band Combination update by PSCell/SCell change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] section 5.6.3.
2.2.1.31.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.3 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform SN initiated Configured Band Combination update by PSCell/SCell change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.31.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.31.4 	Procedure
1.	Perform Configured Band Combination update by PSCell/SCell change procedure (SN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform PSCell Change using SRB3 for RRC Reconfiguration procedure is completed and selectedBandCombination is updated
2.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.31.5 	Expected Results and Log Observation
2.2.1.31.5.1 	Expected Results
The Configured Band Combination update by PSCell/SCell change (SN initiated) procedure is successfully completed.
2.2.1.31.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.3.1/5.6.3.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 logs recorded in the Protocol Analyzer show that:
After step 1 the updated selectedBandCombination is applied in eNB:
o	An example of how to observe the updated selectedBandCombination is to check X2 log. The exact method to observe the updated selectedBandCombination is out of scope of this specification.
2.2.1.32 	SCG config query (MN initiated)
2.2.1.32.1 	Test Purpose
The purpose of this test case is to verify that the MN (eNB) initiated SCG config query procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.4.
2.2.1.32.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.4 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform MN initiated SCG config query procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.32.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.32.4 	Procedure
1.	Perform SCG config query procedure (MN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Secondary Node Change (MN initiated, Option 3x) procedure (See step 2 in 2.2.1.10.4). This test method requires the addition of the following to the initial conditions.
en-gNB emulator: used to perform Secondary Node Change (MN initiated, Optional 3x) procedure.
2.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.32.5 	Expected Results and Log Observation
2.2.1.32.5.1 	Expected Results
The SCG config query procedure is successfully completed.
2.2.1.32.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.4.1/5.6.4.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 logs recorded in the Protocol Analyzer show that:
After step 1 the scg-CellGroupConfig and/or scg-RB-Config is applied in eNB:
o	An example of how to observe the scg-CellGroupConfig and/or scg-RB-Config is to check X2 log. The exact method to observe the SCG configuration Query is out of scope of this specification
2.2.1.33 	Full Reconfiguration (SN initiated)
2.2.1.33.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated Full Reconfiguration procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.22.
2.2.1.33.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.22 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform SN initiated Full Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.33.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.33.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform Full Reconfiguration procedure (SN initiated) to reset PDCP COUNT using full reconfiguration option in case of PDCP Count wrap around
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform data transfer between the Application Test Server and the Test UE or UE emulator and cause PDCP count to reset
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful PDCP COUNT reset.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.33.5 	Expected Results and Log Observation
2.2.1.33.5.1 	Expected Results
The Full Reconfiguration procedure (SN initiated) is successfully completed
2.2.1.33.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.22.1/5.6.22.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
S1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
2.2.1.34 	UE measurement transfer
2.2.1.34.1 	Test Purpose
The purpose of this test case is to verify that the UE measurement transfer procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.7.1.
2.2.1.34.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.7.1 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cells overlap
en-gNB has at least 2 cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform UE measurement transfer procedure using ULInformationTransferMRDC message
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.34.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and one of SN (en-gNB) cells
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.34.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the UE measurement transfer procedure. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform UE measurement transfer procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The condition by which UE sends an ULInformationTransferMRDC message to the MN depends on the configuration done by MN. Still, we can create a situation where UE measurement transfer occurs. There should be at least two en-gNB cells within the coverage of a cell under eNB. The first cell under en-gNB which is PSCell and the second cell under en-gNB which is not PSCell. If the tester manually degrades the radio quality of the first en-gNB cell this can be the trigger of the UE measurement transfer procedure.

One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first en-gNB cell. In this specific case, the first en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the UE measurement transfer procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful UE measurement transfer procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.34.5 	Expected Results and Log Observation
2.2.1.34.5.1 	Expected Results
The UE measurement transfer procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.34.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.7.1.1/5.7.1.2.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.35	Inter-Master Node Handover (with SN change, option 3x)
2.2.1.35.1 	Test Purpose
The purpose of this test case is to verify that the Inter-Master Node Handover (with SN Change, Option 3x) procedure with two eNBs and two en-gNBs from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.4.2.1.
2.2.1.35.2 	Minimum Requirements
DUTs: Two eNBs (Source eNB – S-MN, Target eNB – T-MN) and two en-gNBs (Source gNB – S-SN, Target gNB – T-SN):
DUTs shall apply the parameter condition specified in 5.4.2 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell (S-MN) overlaps with Target eNB cell (T-MN) and Source en-gNB cell (S-SN)
The coverage of Target eNB cell (T-MN) overlaps with Target en-gNB cell (T-SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Inter-Master Node Handover with Secondary Node Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe all three X2 links procedural flows and content
2.2.1.35.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and en-gNB (S-SN) cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB (S-SN) has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is ongoing (via the LTE and NR RATs)
2.2.1.35.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter-Master Node Handover procedure.
This involves observing that the user plane data forwarded from the source en-gNB to the target en-gNB, optionally via the source and/or target eNB over the X2 interface during the Inter-Master Node Handover procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Inter-Master Node Handover (with SN Change, Option 3x) procedure from source eNB (S-MN) to target eNB (T-MN)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The Test UE or UE emulator sends a Measurement Report to the source eNB (S-MN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source eNB (S-MN) and the target eNB (T-MN) simultaneously. In this specific case, the source eNB (S-MN) cell can start off with low attenuation applied which is subsequently increased. At the same time, the target eNB (T-MN) cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source eNB (S-MN).
b.	The target eNB (T-MN) decides to change the Secondary Node, the target eNB (T-MN) sends the SgNB Addition Request to the target gNB (T-SN).
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during Split Bearer(s) operation in EN-DC Option 3x configuration. This involves observing that the user plane data transferred over the X2 in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1and X2 logs and Test UE or UE emulator logs
2.2.1.35.5	Expected Results and Log Observation
2.2.1.35.5.1 	Expected Results
The Inter-Master Node Handover with Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.35.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flow specified in NR C-Plane profile specification [2] Sections 5.4.2.1/5.4.2.2.
If any of the following listed IEs is observed in the X2 logs:
“E-RABs Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs which are:
o	Forwarded to the Test UE or emulated UE from the source en-gNB towards the source eNB and from the source eNB towards the target en-gNB through target eNB, via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or emulated UE via the NR RAT
o	Transmitted to the Test UE or emulated UE from the target en-gNB to the target eNB, via the established MeNB DL GTP Tunnels, is correctly received by the Test UE or emulated UE via the LTE RAT
Note: this test verification process does not impose a requirement for the target en-gNB to transmit the user plane data which it has received from the target eNB (as part of the downlink data forwarding procedure) to the Test UE or emulated UE via the source eNB and LTE RAT, but rather it is to verify the correct operation of the transmit operation via the target eNB and the LTE RAT when it is used by the target en-gNB.
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from target en-gNB to target eNB) is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT (ie, all U-Plane data to be transferred from source eNB to source en-gNB in step 1 and target eNB to target en-gNB in step 4) is recorded in the X2 logs
2.2.1.36 	EN-DC Resource Status Reporting Initiation
2.2.1.36.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting Initiation procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.8.1.
2.2.1.36.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.36.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.36.4 	Procedure
1.	Perform the EN-DC Resource Status Reporting Initiation procedure to start a measurement in the source node
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the source node in order to initiate the Resource Status Reporting Initiation procedure to start the measurement.
Note: In step 1, the source node and the target node have the following two cases:
Case 1) The source node is the eNB and the target node is the en-gNB.
Case 2) The source node is the en-gNB and the target node is the eNB.
2.	Perform the EN-DC Resource Status Reporting Initiation procedure to add cells to report for a measurement in the source node
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the source node in order to initiate the Resource Status Reporting Initiation procedure to add cells to the measurement.
Note: The same case as step 1 needs to be performed.
3.	Perform the Resource Status Reporting Initiation procedure to stop a measurement in the source node
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods is to make use of O&M command in the source node in order to initiate the Resource Status Reporting Initiation procedure to stop the measurement.
Note: The same case as step 1 needs to be performed.
Note: Repeat step 1 to step 3 with a different case from the case performed above.
4.	Observe the Protocol Analyzer X2 logs
2.2.1.36.5 	Expected Results and Log Observation
2.2.1.36.5.1 	Expected Results
The start of the measurement in the target node (Case 1) en-gNB, Case 2) eNB) is successfully completed by performing the EN-DC Resource Status Reporting Initiation procedure from the source node (Case 1) eNB, Case 2) en-gNB) in step 1.
The cell addition for the measurement in the target node (Case 1) en-gNB, Case 2) eNB) initiated in step 1 is successfully completed by performing the EN-DC Resource Status Reporting Initiation procedure from the source node (Case 1) eNB, Case 2) en-gNB) in step 2.
The stop of the measurement in the target node (Case 1) en-gNB, Case 2) eNB) is successfully completed by performing the Resource Status Reporting Initiation procedure from the source node (Case 1) eNB, Case 2) en-gNB) in step 3.
2.2.1.36.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.8.1.1/4.1.8.1.2.1/4.1.8.1.2.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “EN-DC RESOURCE STATUS RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.2.1.37 	EN-DC Resource Status Reporting
2.2.1.37.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.8.2.
2.2.1.37.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.37.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
2.2.1.37.4 	Procedure
1.	Perform the EN-DC Resource Status Reporting procedure from the en-gNB to report the result of on-going load measurements
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform the EN-DC Resource Status Reporting Initiation procedure from the eNB (See case 1 of step 1 in 2.2.1.36.4)
Note: How to perform the specific procedures for the traffic load are out of scope of this specification.
2.	Perform the EN-DC Resource Status Reporting procedure from the eNB to report the result of on-going load measurements
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform the EN-DC Resource Status Reporting Initiation procedure from the en-gNB (See case 2 of step 1 in 2.2.1.36.4)
Note: How to perform the specific procedures for the traffic load are out of scope of this specification.
3.	Observe the Protocol Analyzer X2 logs
2.2.1.37.5 	Expected Results and Log Observation
2.2.1.37.5.1 	Expected Results
The EN-DC Resource Status Reporting procedure from the en-gNB in step 1 is successfully completed.
The EN-DC Resource Status Reporting procedure from the eNB in step 2 is successfully completed.
2.2.1.37.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.8.2.1/4.1.8.2.2.1/4.1.8.2.2.2.
2.2.1.38 	Change of QCI (MN initiated)
2.2.1.38.1 	Test Purpose
The purpose of this test case is to verify that the eNB node initiated modify QCI (and/or ARP) of the SN terminated split bearer procedure with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.23.
2.2.1.38.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply parameter condition specified in 5.6.23 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN) overlaps with en-gNB cell (SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and EN-DC: used to perform MN initiated Secondary Node Modification
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.38.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.38.4 	Procedures
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using an E-RAB from an existing LTE bearer
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform change of QCI (MN initiated) procedure
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	Change the QCI used in step 1
One of the possible methods can be to trigger Core or Core emulator (MME) to change the QCI of the ERAB of an existing LTE bearer.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using E-RAB with changed QCI
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful change of QCI procedure (MN initiated).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs
2.2.1.38.5 	Expected Results and Log Observation
2.2.1.38.5.1	 Expected Results
The change of QCI procedure (MN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.38.5.2	 Log Observation
X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.23.1/5.6.23.2.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the U-Plane data transmission.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the C-Plane:
o	Check that step 2 QCI in IE “Full E-RAB Level QoS Parameters” in IE “E-RABs To Be Modified List” included in message “SGNB MODIFICATION REQUEST” performs correctly
Regarding the downlink U-Plane data generated in step1, after step 2 and in step 4:
o	All U-Plane data recorded in the S1 and X2 logs is correctly received by the Test UE or UE emulator.
o	Check that the data is flowing using the new QCI in step 4
Regarding the uplink U-Plane data generated in step1, after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the S1 and X2 logs
o	Check that the data is flowing using the new QCI in step 4
2.2.1.39 	Measurement ID Coordination (MN initiated)
2.2.1. 39.1 	Test Purpose
The purpose of this test case is to verify that the Measurement ID Coordination (MN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] section 5.6.24.
2.2.1. 39.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.24 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement ID Coordination procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1. 39.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1. 39.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform Measurement ID Coordination procedure (MN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of the scope of this specification and is left up to the implementation of the DUT.
a.	An eNB sends maximum number of measurement identities to en-gNB. One of the possible methods can be to make use of O&M command in the eNB to send for measurement identities to en-gNB.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1. 39.5 	Expected Results and Log observation
2.2.1. 39.5.1 	Expected Results
The Measurement ID Coordination procedure (MN initiated) is successfully completed.
2.2.1. 39.5.2 	Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-Plane profile specification [2] Sections 5.6.24.1/5.6.24.2.
If any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
•	Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.1.40 	DRB ID change/Security Key change (SN initiated)
2.2.1.40.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated DRB ID change/Security Key change procedure with MN (eNB) and SN (en-gNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 5.6.21.
2.2.1.40.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.21 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform SN (en-gNB) initiated DRB ID change/Security Key change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.40.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.2.1.40.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform SN initiated DRB ID change/Security Key change procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform data transfer between the Application Test Server and the Test UE or UE emulator to increment the PDCP Count. This may trigger either a DRB ID change in case of PDCP Count wrap around, or a Security Key change in case of PDCP Count wrap around prevention.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful DRB ID change/Security Key change.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission  (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.40.5 	Expected Results and Log Observation
2.2.1.40.5.1 	Expected Results
The SN (en-gNB) initiated DRB ID change/Security Key change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.2.1.40.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.21.1/5.6.21.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
S1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
•	After step 2 the updated security key is applied in UE or UE emulator in case of Security Key change procedure:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification
•	Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or emulated UE via LTE RAT or NR RAT
•	Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via LTE RAT or NR RAT is recorded in the S1 logs
2.2.1.41 	Measurement ID Coordination (SN initiated)
2.2.1.41.1 	Test Purpose
The purpose of this test case is to verify that the Measurement ID Coordination (SN initiated) with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] section 5.6.25.
2.2.1.41.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply the parameter condition specified in 5.6.25 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement ID Coordination procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and content
2.2.1.41.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.1.41.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform Measurement ID Coordination procedure (SN initiated)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of the scope of this specification and is left up to the implementation of the DUT.
a.	An en-gNB requests eNB for new maximum number of measurement identities. eNB responds with measurement identities to en-gNB. One of the possible methods can be to make use of O&M command in the en-gNB to request for measurement identities to eNB.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Measurement ID Coordination (SN initiated).
5.	Observe the Protocol Analyzer S1 and X2 logs and Test UE or UE emulator logs.
2.2.1.41.5 	Expected Results and Log observation
2.2.1.41.5.1 	Expected Results
The Measurement ID Coordination procedure (SN initiated) is successfully completed.
2.2.1.41.5.2 	Log observation
X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in NR C-Plane profile specification [2] Sections 5.6.25.1/5.6.25.2.
If any of the following listed IEs is observed in the X2 logs.
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
X2 and S1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the S1 logs is correctly received by the Test UE or UE emulator via LTE RAT or NR RAT
o	All U-Plane data recorded in the X2 logs (ie, all U-Plane data transferred from en-gNB to eNB) is correctly received by the Test UE or UE emulator via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT or NR RAT is recorded in the S1 logs
o	All U-Plane data transmitted by the Test UE or UE emulator via LTE RAT (ie, all U-Plane data to be transferred from eNB to en-gNB) is recorded in the X2 logs
2.2.2 	X2 U-Plane IOT Test Cases
2.2.2.1 	Node behaviour of the corresponding node with RLC-AM and/or RLC-UM
2.2.2.1.1 	Test Purpose
The purpose of this test case is to verify that the behaviour of the corresponding node procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
Note: The test cases for the behaviour of the corresponding node sending DDDS when events lost packet detection and stop scheduling for the data bearer occur are included in the chapter 2.2.2.3.
2.2.2.1.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.1.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transmission has not been performed via the NR RAT, eg, keeping Option 3x with NR radio quality low enough
Note: This test case is used to verify that the eNB does not discard any of its buffered packets in events such as Radio Link Outage over the LTE RAT unless it receives discard indication from the higher layers or from the en-gNB hosting NR PDCP, such as the buffer discard indication from the en-gNB. This initial condition ensures that en-gNB does not send the buffer discard indication to the eNB.
2.2.2.1.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for eNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to eNB vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Trigger radio link outage on the LTE RAT.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
3.	Trigger radio link resume on the LTE RAT.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
4.	Stop data transfer from the Application Test Server to the Test UE or UE emulator.
5.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.1.5 	Expected Results and Log Observation
2.2.2.1.5.1 	Expected Results
The behaviour of eNB is aligned with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.2.2.1.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
eNB sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to en-gNB after step 2
eNB sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to en-gNB after step 3
Note: these are to confirm if the Radio Link Outage operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from eNB in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from eNB before triggering Radio Link Outage in step 1
2.2.2.2 	General for Elements for the NR user plane protocols with RLC-AM and/or RLC-UM
2.2.2.2.1 	Test Purpose
The purpose of this test case is to verify that the general behaviour with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.2.2.2.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the X2 link
2.2.2.2.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the X2 link between the eNB and en-gNB
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Data transmission has not been performed via the LTE RAT
Note: the intention of this is to make a condition where any of the optional fields in DDDS has no available value.
2.2.2.2.4 	Procedure
1.	Trigger Secondary Node Addition procedure
Note: the intention of this step is to have the eNB send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
2.	Perform data transfer from the Application Test Server to the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
3.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the en-gNB to eNB via X2 link by using the Network Impairment Emulator inserted in-line in the X2 link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
4.	Trigger the en-gNB to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to eNB
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
5.	Trigger radio link outage condition in the eNB at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
6.	Stop scheduling in the eNB
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
7.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs
2.2.2.2.5 	Expected Results and Log Observation
2.2.2.2.5.1 	Expected Results
The behaviour of eNB and en-gNB is align with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.2.2.2.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs captured during step 1 have the following IEs with the value ‘0’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
o	Final Frame Indication IE
o	Lost Packet Report IE
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
o	Cause Report IE
One or more DDDSs captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
2.2.2.3 	Report Polling with RLC-AM and/or RLC-UM
2.2.2.3.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.2.2.3.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the X2 link
2.2.2.3.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the X2 link between the eNB and en-gNB
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.3.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from en-gNB to eNB at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	en-gNB transmits some data packets to eNB (ie, step 1)
2.	Drop some packets sent from en-gNB to eNB via X2 link by using the Network Impairment Emulator inserted in-line in the X2 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in eNB.
3.	Trigger radio link outage condition in the eNB.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in eNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the eNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
4.	Trigger radio link resume condition on LTE RAT.
5.	Stop scheduling in the eNB.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in eNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
6.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.3.5 	Expected Results and Log Observation
2.2.2.3.5.1 	Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.2.2.3.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
o	en-gNB sends eNB one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	eNB sends en-gNB DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, eNB sends en-gNB DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, eNB sends en-gNB DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, eNB sends en-gNB DDDS including Final Frame Indication IE with the value ‘1’, and then eNB does not send en-gNB DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
2.2.2.4 	Buffer discard indication with RLC-AM and/or RLC-UM
2.2.2.4.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.2.2.4.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.4.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.4.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for eNB to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	en-gNB to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from en-gNB to eNB to discard NR PDCP PDUs. It is up to en-gNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the en-gNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the en-gNB receives acknowledgement of the transmitted data from the eNB
3.	en-gNB to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from en-gNB to eNB to discard NR PDCP PDUs. It is up to en-gNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the en-gNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the en-gNB receives acknowledgement of the transmitted data from the eNB
4.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.4.5 	Expected Results and Log Observation
2.2.2.4.5.1 	Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.2.2.4.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	en-gNB DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	DL discard NR PDCP PDU SN present
2.2.2.5 	User data existence flag with RLC-AM and/or RLC-UM
2.2.2.5.1 	Test Purpose
The purpose of this test case is to verify en-gNB’s notification to the eNB of the existence of user data, but without using the User data existence flag IE, with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the eNB does not support the User data existence flag IE eg, in the case when the eNB is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.2.2.5.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
en-gNB shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to en-gNB implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.5.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.5.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator via X2. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in eNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc).
2.	Decrease the amount of user data to be transmitted from the Application Test Server to the Test UE or UE emulator so that the user data can be transmitted via NR RAT only. With this condition perform data transmission for 60 seconds.
Note: the intention of this step is to create a situation where the en-gNB sends actual user data to the eNB even when the amount of user data is small enough to be sent via the NR RAT only. In this test scenario, the NR RAT radio condition need not be ideal but shall be good enough to ensure that all user data can be transmitted through the NR RAT only.
3.	Stop data transfer.
4.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.5.5 	Expected Results and Log Observation
2.2.2.5.5.1 	Expected Results
The behaviour of en-gNB is align with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.2.2.5.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from en-gNB to eNB, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to eNB implementation, ie, the value of the timers used in the eNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC_Connected state without expiring DRX inactivity timer in LTE RAT as specified in 3GPP TS 36.331 [13] and 3GPP TS 36.321 [14], from the beginning of step 2 till before step 3
2.2.2.6 	Assistance Information Report polling with RLC-AM and/or RLC-UM
2.2.2.6.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.2.2.6.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.6.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.6.4 	Procedure
1.	Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
2.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.6.5 	Expected Results and Log Observation
2.2.2.6.5.1 	Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.2.2.6.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the en-gNB to the eNB include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the eNB to the en-gNB
2.2.2.7 	Radio quality assistance information with RLC-AM and/or RLC-UM
2.2.2.7.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.2.2.7.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell and en-gNB cell overlap
eNB shall be configured with the Assistance Information Type(s) to be reported in the AID message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
o	‘0’=UNKNOWN
o	‘1’=Average CQI
o	‘2’=Average HARQ Failure
o	‘3’=Average HARQ Retransmissions
o	‘4’= DL Radio Quality Index
o	‘5’= UL Radio Quality Index
o	‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.7.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.7.4 	Procedure
1.	Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the eNB becomes available.
Note: the intention of this step is to create a situation where the eNB does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
2.	Create conditions which can help the eNB gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data via LTE RAT so that eNB can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
3.	Send Downlink User Data PDU(s) from en-gNB to eNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
4.	Observe the Protocol Analyzer X2 logs and Test UE or UE emulator logs.
2.2.2.7.5 	Expected Results and Log Observation
2.2.2.7.5.1 	Expected Results
The use of the Radio quality assistance information IE is aligned with the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.2.2.7.5.2 	Log Observation
X2 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, eNB sends the Assistance Information Data message to en-gNB, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, eNB sends the Assistance Information Data message to en-gNB, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
2.2.2.8 	DL report NR PDCP PDU SN with RLC-AM
2.2.2.8.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL report NR PDCP PDU SN IE with eNB and en-gNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.7.
2.2.2.8.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 procedural flows and contents
2.2.2.8.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.2.2.8.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from en-gNB to eNB.
3.	Observe the Protocol Analyzer X2 logs.
2.2.2.8.5 	Expected Results and Log Observation
2.2.2.8.5.1 	Expected Results
The use of DL report NR PDCP PDU SN IE is aligned with the requirement specified in Section 4.1.2.7 of NR U-Plane profile specification [3].
2.2.2.8.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer show that:
After beginning of step 2:
o	eNB sends en-gNB DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	eNB sends en-gNB DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
2.3 	F1 Interoperability Test Cases
The following set of F1 IOT cases are defined in this version of the specification.
Table 2-5: IOT Test Cases for F1 implemented in accordance with the NR C-Plane [2] profile
Table 2-5b: IOT Test Cases for F1 implemented in accordance with the NR U-Plane [3] profile
The initial test conditions which are common to all F1 test cases are listed below:
Initial test conditions for scenarios with an EPC:
gNB-CU(s) and gNB-DU(s) are running in normal operating state
gNB-CU(s) and gNB-DU(s) are physically and logically connected
Core or Core emulator (EPC with EN-DC capabilities) is physically connected to the en-gNB(s)
S1 Setup procedure specified in 3GPP TS 36.413 [7] has been completed with the Core or Core emulator
EN-DC X2 setup procedure has been successfully completed between the eNB or eNB emulator and the en-gNB according to the NR C-Plane profile specification [2]
Protocol Analyzer is physically connected to the X2, F1 and S1-U link(s)
Initial test conditions for scenarios with a 5GC:
gNB-CU(s) and gNB-DU(s) are running in normal operating state
gNB-CU(s) and gNB-DU(s) are physically and logically connected
Core or Core emulator (5GC capabilities) is physically connected to the gNB(s)
NG Setup procedure specified in 3GPP TS 38.413 [15] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the F1 and NG-U link(s)
Test case specific deviations of the initial test conditions will be specified in each of the test cases.
2.3.1	F1 C-Plane IOT Test Cases
2.3.1.1 	Partial Reset (MeNB initiated)
2.3.1.1.1 	Test Purpose
The purpose of this test case is to verify that the MeNB initiated Partial Reset Procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using Reset procedure; conforming to the NR C-Plane profile specification [2] Section 4.1.4.1. This test case is on top of the X2 part of the MeNB initiated Partial Reset Procedure described in Section 2.2.1.5.
2.3.1.1.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform MeNB initiated Partial Reset procedure
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.1.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup Procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition (eg, SN terminated split bearer) procedure has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.1.4 	Procedure
1.	Perform the MeNB initiated Partial Reset Procedure over X2 Step 1 described in Section 2.2.1.5.4.
Note: the intention of this step is to perform not only the X2 part of the MeNB initiated Partial Reset Procedure but also trigger to perform the F1 signaling, that is Reset Procedure over F1 with gNB-CU and gNB-DU.
2.	Observe the Protocol Analyzer X2 and F1 link logs.
2.3.1.1.5 	Expected Results and Log Observation
2.3.1.1.5.1 	Expected Results
The MeNB initiated Partial Reset Procedure is successfully completed.
The part of the UE contexts affected by the MeNB initiated Partial Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.1.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.4.1.3/4.1.4.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.2 	Secondary Node Addition (Option 3x)
2.3.1.2.1 	Test Purpose
The purpose of this test case is to verify that a Secondary Node Addition (Option 3x) procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Setup procedures; conforming to the NR C-Plane profile specification [2] Section 5.1.1. This test case is on top of the X2 part of the Secondary Node Addition (Option 3x) procedure described in Section 2.2.1.7.
2.3.1.2.2 	Minimum Requirements
The minimum requirements described in Section 2.2.1.13.2.
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.1.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.2.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary node has not yet been added to the Test UE or UE emulator
2.3.1.2.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 (except for Note) in Section 2.2.1.7.4
2.	Perform the Secondary Node Addition (Option 3x) Procedure described in NR C-Plane profile specification [2] Section 5.1.1.3
3.	Stop data transfer as described in step 3 in Section 2.2.1.7.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.7.4
5.	Observe the Protocol Analyzer S1, X2 and F1 logs and Test UE or UE emulator logs
2.3.1.2.5 	Expected Results and Log Observation
2.3.1.2.5.1 	Expected Results
The UE Context Setup procedure over F1 is successfully completed.
The Secondary Node Addition (Option 3x) Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.2.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.1.1.3/5.1.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.2.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.2.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.3 	Secondary Node Release (MN initiated, Option 3x)
2.3.1.3.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with MN (eNB) initiated SgNB Release procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.2.1. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.3.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.2.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
eNB or eNB emulator: used to perform Secondary Node Release (MN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 and X2 procedural flows and content
2.3.1.3.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CU and en-gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Release Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Provoke a Radio Link Failure in SCG so MN receives SCG Failure Information NR message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure in both directions between the Test UE or UE emulator and the Application Test Server.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.3.5 	Expected Results and Log Observation
2.3.1.3.5.1 	Expected Results
The F1 UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Release procedure is successfully completed.
2.3.1.3.5.2 	Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.2.1.3/5.2.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 and X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
2.3.1.4 	Secondary Node Release (SN initiated, Option 3x)
2.3.1.4.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with SN (en-gNB) initiated SgNB Release procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.2.2. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.4.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.2.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
eNB or eNB emulator: used to perform Secondary Node Release (SN initiated, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 and X2 procedural flows and content
2.3.1.4.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CU and en-gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
F1 UE Context Setup procedure between en-gNB-CU and en-gNB-DU, triggered together with Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.4.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the en-gNB to start buffering user plane downlink data prior to the release of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT and the NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Release Procedure from SN (en-gNB) side.
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Block NR cell in en-gNB. One of the possible methods can be to make use of the O&M command in the en-gNB to block the NR cell.
b.	Provoke conditions in a way that the SN detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SN and the Test UE or UE emulator as such the emulated interferences can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Release Procedure in both directions between the Test UE or UE emulator and the Application Test Server.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the LTE RAT, which is calculated based on 3GPP TS 36.211 [9] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.4.5 	Expected Results and Log Observation
2.3.1.4.5.1 	Expected Results
The F1 UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Release procedure is successfully completed.
2.3.1.4.5.2 	Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.2.2.1/5.2.2.2.
If any of the following listed IEs is observed in the X2 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 and X2 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
2.3.1.5 	Secondary Node Change (MN initiated, Option 3x)
2.3.1.5.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with MN (eNB) initiated SgNB Change procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.3.1.4. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.5.2 	Minimum Requirements
DUTs: Two en-gNB-CU (S-SN-CU, T-SN-CU) and two en-gNB-DU (S-SN-DU, T-SN-DU):
DUTs shall apply the parameter condition specified in 5.3.1 of the NR C-Plane profile specification [2]
coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
eNB or eNB emulator: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 links procedural flows and content, S1-U UP content
2.3.1.5.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CUs and en-gNB-DUs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.5.4 	Procedure
1.	Perform data transfer in the both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform Secondary Node Change Procedure from MN (eNB) side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Secondary Node Change procedure.
3.	Stop the data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in the uplink direction between the Test UE or UE emulator and the Application Test Server.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Change Procedure in both directions between the Test UE or UE emulator and the Application Test Server.
One of the methods which can be used to stimulate the Split Bearer(s) usage of both the LTE and NR RATs is to transfer user plane data at data rates which are high enough for the en-gNB to start distributing user plane data to the eNB via the X2 interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.5.5 	Expected Results and Log Observation
2.3.1.5.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.5.5.2 	Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.3.1.3/5.3.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
2.3.1.6 	Secondary Node Change (SN initiated, Option 3x)
2.3.1.6.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with en-gNB-CU and en-gNB-DU from different vendors, triggered with SN (en-gNB) initiated SgNB Change procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.3.2.4. This test case complements the X2-only test case addressing the corresponding F1 aspects.
2.3.1.6.2 	Minimum Requirements
DUTs: Two en-gNB-CU (S-SN-CU, T-SN-CU) and two en-gNB-DU (S-SN-CU, T-SN-CU):
DUTs shall apply the parameter condition specified in 5.3.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN), Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Change procedure (MN initiated, Option 3x)
eNB or eNB emulator: used to perform Secondary Node Change procedure (SN initiated, Option 3x)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 links procedural flows and content, S1-U UP content
2.3.1.6.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the en-gNB-CUs and en-gNB-DUs according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the eNB cell and S-SN cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition (Option 3x) procedure between the eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source en-gNB cell (S-SN) at the start of this procedure
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.6.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform Secondary Node Change Procedure from Source en-gNB cell (S-SN) and Target en-gNB cell (T-SN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Move the Test UE or UE emulator from the coverage area of Source en-gNB cell (S-SN) towards Target en-gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source en-gNB cell (S-SN) and the Target en-gNB cell (T-SN) simultaneously. In this specific case, the Source en-gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target en-gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-TN. Observe that data transfer from the Application Test Server to the Test UE or UE emulator is ongoing after Secondary Node Change.
3.	Stop the data transfer in the downlink direction between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in the uplink direction between the Test UE or UE emulator and the Application Test Server.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Change Procedure in both directions between the Test UE or UE emulator and the Application Test Server.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs.
2.3.1.6.5 	Expected Results and Log Observation
2.3.1.6.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.6.5.2 	Log Observation
F1 and X2 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.3.2.3/5.3.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 and X2 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and X2 logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
2.3.1.7 	Inter-Master Node Handover (without SN Change, Option 3x)
2.3.1.7.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (without SN Change, Option 3x) procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedures; conforming to the NR C-Plane profile specification [2] Section 5.4.1. This test case is on top of the X2 part of the Inter-Master Node Handover (without SN Change, Option 3x) procedure described in Section 2.2.1.12.
2.3.1.7.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.4.1 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell and en-gNB cell overlap
The coverage of Target eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Inter-Master Node Handover (without SN Change, Option 3x) procedure
eNB or eNB emulator: used to perform Inter-Master Node Handover (without SN Change, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.7.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the Source eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.7.4 	Procedure
1.	Perform data transfer in the both directions as described in step 1 (except for Note) in Section 2.2.1.12.4
2.	Perform the X2 part of Inter-Master Node Handover (without SN Change, Option 3x) procedures as described in NR C-Plane profile specification [2] Section 5.4.1.3
3.	Stop data transfer as described in step 3 in Section 2.2.1.12.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.12.4.
5.	Observe the Protocol Analyzer S1, X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.7.5 	Expected Results and Log Observation
2.3.1.7.5.1 	Expected Results
The UE Context Modification procedure over F1 is successfully completed.
The Inter-Master Node Handover (without SN Change, Option 3x) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.7.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.4.1.3/5.4.1.4.
If any of the following listed IEs is observed in the F1 logs:
Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.7.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.7.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.8 	Master Node to eNB Change
2.3.1.8.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to eNB Change Procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using UE Context Modification and UE Context Release procedure, conforming the NR C-Plane profile specification [2] Section 5.5.1. This test case is on top of the X2 part of the Master Node to eNB Change Procedure described in Section 2.2.1.13.
2.3.1.8.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.5.1 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario.
eNB or eNB emulator: used to perform Master Node to eNB Change procedure
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Master Node to eNB Change procedure
Target eNB or Target eNB emulator: used to perform Master Node to eNB Change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content, and S1-U UP content
2.3.1.8.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB or target eNB emulator specified in 3GPP TS 36.423 [12] has been successfully completed
F1 setup Procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source eNB cell (S-MN) and SN cell
Secondary Node Addition (Option 3x) procedure between the Source eNB (S-MN) and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Then SCG configuration query has been completed if needed
2.3.1.8.4 	Procedure
1.	Perform the Master Node to eNB Change Procedure Steps 1 – 2 described in Section 2.2.1.13.4.
Note: the intention of this step is to perform not only the X2 part of the Master Node to eNB Change Procedure but also trigger to perform the F1 signaling, that is UE Context Modification Procedure and the UE Context Release Procedure with gNB-CU and gNB-DU.
2.	Perform the X2 part of Master Node to eNB Change Procedure Steps 3 – 4 described in Section 2.2.1.13.4.
3.	Observe the Protocol Analyzer X2 and F1 link logs, and Test UE or UE emulator logs.
2.3.1.8.5 	Expected Results and Log Observation
2.3.1.8.5.1 	Expected Results
The UE Context Modification Procedure and the UE Context Release Procedure over F1 are successfully completed.
The Master Node to eNB Change Procedure over F1 is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.8.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.5.1.3/5.5.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE””
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in Step 1 and after Step 2 and in Step 4 in Section 2.2.1.13.4:
o	All U-Plane data recorded in the F1 logs in Step 1 and after Step 2 is correctly received by the Test UE or emulated UE via NR RAT, no U-Plane data recorded in the F1 logs in Step 4
Regarding the uplink U-Plane data generated in Step 1 and after Step 2 and in Step 4 in Section 2.2.1.13.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT in Step 1 and after Step 2 is recorded in the F1 logs, no U-Plane data recorded in the F1 logs in Step 4
2.3.1.9 	PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario)
2.3.1.9.1 	Test Purpose
The purpose of this test case is to verify that a PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Setup procedure, F1 UE Context Modification procedure, and F1 UE Context Release procedure; conforming to the NR C-Plane profile specification [2] Section 5.6.15. This test case is on top of the X2 part of the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure described in Section 2.2.1.15.
2.3.1.9.2 	Minimum Requirements
DUTs: Single gNB-CU and two gNB-DUs (Source gNB-DU, Target gNB-DU):
DUTs shall apply the parameter condition specified in 5.6.15 of the NR C-Plane profile specification [2]
en-gNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario) procedure
eNB or eNB emulator: used to perform PSCell Change using SRB1 for RRC Reconfiguration – full configuration option (Inter gNB-DU scenario) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.9.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the eNB cell and the en-gNB cells
2.3.1.9.4 	Procedure
1.	Perform data transfer in both downlinks directions as described in step 1 (except for Note) in Section 2.2.1.15.4
2.	Perform the PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedures described in NR C-Plane profile specification [2] Section 5.6.15.3
3.	Stop data transfer as described in step 3 in Section 2.2.1.15.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.15.4
5.	Observe the Protocol Analyzer S1, X2 and F1 logs and Test UE or UE emulator logs
2.3.1.9.5 	Expected Results and Log Observation
2.3.1.9.5.1 	Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Setup, UE Context Modification and UE Context Release procedure over F1 is successfully completed.
The PSCell Change using SRB1 for RRC Reconfiguration – full configuration option procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.9.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.15.3/5.6.15.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and 4 in Section 2.3.1.9.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.9.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.10 	PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option (Inter gNB-DU scenario)
2.3.1.10.1 	Test Purpose
The purpose of this test case is to verify that a PSCell Change, using SRB1 for RRC Reconfiguration – delta configuration option procedure, received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Setup procedure, F1 UE Context Modification procedure and F1 UE Context Release procedure; conforming to the NR C-Plane profile specification [2] Section 5.6.16. This test case is on top of the X2 part of the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure described in Section 2.2.1.16.
2.3.1.10.2 	Minimum Requirements
DUTs: Single gNB-CU and two gNB-DUs (Source gNB-DU, Target gNB-DU):
DUTs shall apply the parameter condition specified in 5.6.16 of the NR C-Plane profile specification [2]
en-gNB has at least 2 cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform PSCell Change using SRB1 for RRC Reconfiguration - delta config option (Inter gNB-DU scenario) procedure
eNB or eNB emulator: used to perform PSCell Change using SRB1 for RRC Reconfiguration - delta config option (Inter gNB-DU scenario) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.10.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions is applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the eNB cell and the en-gNB cells
2.3.1.10.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 (except for Note) in Section 2.2.1.16.4
2.	Perform the PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedures described in NR C-Plane profile specification [2] Section 5.6.16.3
3.	Stop data transfer as described in step 3 in Section 2.2.1.16.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.16.4.
5.	Observe the Protocol Analyzer S1, X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.10.5 	Expected Results and Log Observation
2.3.1.10.5.1 	Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Setup, UE Context Modification and UE Context Release procedure over F1 is successfully completed.
The PSCell Change using SRB1 for RRC Reconfiguration – delta configuration option procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.10.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.16.3/5.6.16.4
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.10.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.10.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.11 	Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration
2.3.1.11.1 	Test Purpose
The purpose of this test case is to verify that an Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedures; conforming to the NR C-Plane profile specification [2] Section 5.6.17.
2.3.1.11.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.17 of NR C-Plane profile specification [2]
Single gNB-CU and single gNB-DU have at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure
eNB or eNB emulator: used to perform Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.11.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the eNB cell and the en-gNB cells
2.3.1.11.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 (except for Note) in Section 2.2.1.15.4
2.	Perform the Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration procedures described NR C-Plane profile specification [2] Section 5.6.17.1
3. Stop data transfer as described in step 3 in Section 2.2.1.15.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.15.4
5.	Observe the Protocol Analyzer S1, X2 and F1 logs and Test UE or UE emulator logs
2.3.1.11.5 	Expected Results and Log Observation
2.3.1.11.5.1 	Expected Results
The UL RRC Message Transfer is successfully transmitted.
The UE Context Modification procedure over F1 is successfully completed.
The Intra gNB-DU PSCell Change using SRB1 for RRC Reconfiguration Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.11.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.17.3/5.6.17.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.11.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.11.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.12 	F1 Setup for EN-DC
2.3.1.12.1 	Test Purpose
The purpose of this test case is to verify that the F1 Setup procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.5.1.
2.3.1.12.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.1.5.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.12.3 	Initial Conditions
A SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.3.1.12.4 	Procedure
1.	Initiate the F1 Setup procedure in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	O&M command in gNB-DU to enable F1 interface
2.	This step is executed optionally. The gNB-DU initiates gNB-DU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message in order to test OPT1 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1. In this step, all cells or a part of cells requested are activated. If a part of cells requested are activated in this step, the rest cells may be activated by OPT 2 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1
3.	This step is executed optionally. The gNB-CU initiates gNB-CU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message in order to test OPT2 procedure specified in NR C-Plane profile specification [2] Section 4.1.5.1.1. Since this step can be independently done from step 2, the cells to be activated in this step may be different from those of step 2.
4.	Observe the Protocol Analyzer F1 link logs
2.3.1.12.5 	Expected Results and Log Observation
2.3.1.12.5.1 	Expected Results
The F1 Setup procedure is successfully completed.
The gNB-DU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message.
The gNB-CU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message.
2.3.1.12.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.5.1.1/4.1.5.1.2.
2.3.1.13 	gNB-DU Configuration Update for EN-DC
2.3.1.13.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.6.1.
2.3.1.13.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.1.6.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.13.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.13.4 	Procedure
1.	Perform the gNB-DU Configuration Update procedure to add cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make the gNB-DU’s cell recover after the transition to its cell failure status.
2.	Perform the gNB-DU Configuration Update procedure to delete cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make gNB-DU’s cell failure status.
3.	Perform the gNB-DU Configuration Update procedure to modify cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation, then change NR PCI information of the deactivated cells. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells and change the NR PCI.
4.	Perform the gNB-DU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to activate cells.
The cell activation is successfully completed by gNB-DU Configuration Update procedure in this step. If the gNB-CU requests the gNB-DU to activate cells via GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE message, then the gNB-DU will trigger additional GNB-DU CONFIGURATION UPDATE procedure to inform the Service Status for activated cells (OPT1) specified in NR C-Plane profile specification [2] Section 4.1.6.1.1.
5.	Perform the gNB-DU Configuration Update procedure to deactivate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells.
6.	Perform the gNB-DU Configuration Update procedure to inform the Service Status in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate the Service Status of the cell from “In-Service” to "Out-Of-Service". One of the possible methods can be to make use of O&M command in the gNB-DU in order to change the Service Status from “In-Service” to " Out-Of-Service".
7.	Observe the Protocol Analyzer F1 link logs.
2.3.1.13.5 	Expected Results and Log Observation
2.3.1.13.5.1 	Expected Results
The cell addition is successfully completed by gNB-DU Configuration Update procedure in step 1.
The cell deletion is successfully completed by gNB-DU Configuration Update procedure in step 2.
The cell modification is successfully completed by gNB-DU Configuration Update procedure in step 3.
The cell activation is successfully completed by gNB-DU Configuration Update procedure in step 4. Informing the service status for additionally activated cells may be successfully completed by gNB-DU Configuration Update procedure in this step.
The cell deactivation is successfully completed by gNB-DU Configuration Update procedure in step 5.
Informing the service status is successfully completed by gNB-DU Configuration Update procedure in step 6.
2.3.1.13.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.6.1.1/4.1.6.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.14 	gNB-CU Configuration Update for EN-DC
2.3.1.14.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.7.1.
2.3.1.14.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.1.7.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.14.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.14.4 	Procedure
1.	Perform the gNB-CU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to activate cells.
2.	Perform the gNB-CU Configuration Update procedure to deactivate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate cells.
3.	Perform the gNB-CU Configuration Update procedure to add TNL association in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate TNL association addition. One of the possible methods can be to make use of O&M command in the gNB-CU in order to add TNL association.
4.	Perform the gNB-CU Configuration Update procedure to modify TNL association in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate TNL association modification. One of the possible methods can be to make use of O&M command in the gNB-CU in order to change TNL association usage.
5.	Perform the gNB-CU Configuration Update procedure to delete TNL association in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate TNL association deletion. One of the possible methods can be to make use of O&M command in the gNB-CU in order to delete TNL association.
6.	Observe the Protocol Analyzer F1 link logs.
2.3.1.14.5 	Expected Results and Log Observation
2.3.1.14.5.1 	Expected Results
The cell activation is successfully completed by gNB-CU Configuration Update procedure in step1. Informing the service status for activated cells may be successfully completed by gNB-DU Configuration Update procedure in this step.
The cell deactivation is successfully completed by gNB-CU Configuration Update procedure in step 2.
The TNL association addition is successfully completed by gNB-CU Configuration Update procedure in step 3.
The TNL association modification is successfully completed by gNB-CU Configuration Update procedure in step 4.
The TNL association deletion is successfully completed by gNB-CU Configuration Update procedure in step 5.
2.3.1.14.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.1.7.1.1/4.1.7.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.15 	F1 Setup for NR Stand-Alone
2.3.1.15.1 	Test Purpose
The purpose of this test case is to verify that the F1 Setup procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.3.1.
2.3.1.15.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.2.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.15.3 	Initial Conditions
A SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.3.1.15.4 	Procedure
1.	Initiate the F1 Setup procedure in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	O&M command in gNB-DU to enable F1 interface
2.	This step is executed optionally. The gNB-DU initiates gNB-DU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message in order to test OPT1 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1. In this step, all cells or a part of cells requested are activated. If a some of cells requested are activated in this step, the remaining cells may be activated by OPT 2 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1.
3.	This step is executed optionally. The gNB-CU initiates gNB-CU Configuration Update procedure for cell activation if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sent F1 SETUP RESPONSE message in order to test OPT2 procedure specified in NR C-Plane profile specification [2] Section 4.2.3.1.1. Since this step can be independently done from step 2, the cells to be activated in this step may be different from those of step 2.
4.	Observe the Protocol Analyzer F1 link logs
2.3.1.15.5 	Expected Results and Log Observation
2.3.1.15.5.1 	Expected Results
The F1 Setup procedure is successfully completed.
The gNB-DU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells via F1 SETUP RESPONSE message.
The gNB-CU Configuration Update procedure is successfully completed if gNB-CU requests gNB-DU to activate cells which have been reported by F1 SETUP REQUEST message sometime after it sends F1 SETUP RESPONSE message.
2.3.1.15.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.3.1.1/4.2.3.1.2.
2.3.1.16 	gNB-DU Configuration Update for NR Stand-Alone
2.3.1.16.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.4.1.
2.3.1.16.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.2.4.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.16.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.16.4 	Procedure
1.	Perform the gNB-DU Configuration Update procedure to add cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate recovery from cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make the gNB-DU’s cell recover after the transition to its cell failure status.
2.	Perform the gNB-DU Configuration Update procedure to delete cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell failure. One of the possible methods can be to make use of O&M command in the gNB-DU in order to make gNB-DU’s cell failure status.
3.	Perform the gNB-DU Configuration Update procedure to inform the Service Status in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate the Service Status of the cell from “In-Service” to "Out-Of-Service". One of the possible methods can be to make use of O&M command in the gNB-DU in order to change the Service Status from “In-Service” to " Out-Of-Service".
4.	Perform the gNB-DU Configuration Update procedure to modify cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation, then change NR PCI information of the deactivated cells. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate cells and change the NR PCI.
5.	Observe the Protocol Analyzer F1 link logs.
2.3.1.16.5 	Expected Results and Log Observation
2.3.1.16.5.1 	Expected Results
The cell addition is successfully completed by gNB-DU Configuration Update procedure in step 1.
The cell deletion is successfully completed by gNB-DU Configuration Update procedure in step 2.
Informing the service status is successfully completed by gNB-DU Configuration Update procedure in step 3.
The cell modification is successfully completed by gNB-DU Configuration Update procedure in step 4.
2.3.1.16.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.4.1.1/4.2.4.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.17 	gNB-CU Configuration Update for NR Stand-Alone
2.3.1.17.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU Configuration Update procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.5.1.
2.3.1.17.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.2.5.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.17.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.17.4 	Procedure
1.	Perform the gNB-CU Configuration Update procedure to activate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to activate cells.
2.	Perform the gNB-CU Configuration Update procedure to deactivate cells in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate cells.
3.	Perform the gNB-CU Configuration Update procedure to update of gNB-CU generated SIB information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate change the SIB information. One of the possible methods can be to make use of O&M command in the gNB-CU in order to change the SIB information.
4.	Perform the gNB-CU Configuration Update procedure to bar the cells of gNB-DU managed by the gNB-CU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cells barring. One of the possible methods can be to make use of O&M command in the gNB-CU in order to make gNB-DU’s cells barring.
5.	Observe the Protocol Analyzer F1 link logs.
2.3.1.17.5 	Expected Results and Log Observation
2.3.1.17.5.1 	Expected Results
In step 1, after the gNB-DU sent GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE, GNB-DU CONFIGURATION UPDATE and GNB-DU CONFIGURATION UPDATE ACKNOWLEDGE are observed to activate cells.
In step 2, GNB-CU CONFIGURATION UPDATE and GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE are observed to deactivate cells.
In step 3, GNB-CU CONFIGURATION UPDATE with updated SIB information is observed.
In step 4, GNB-CU CONFIGURATION UPDATE with modified Cell barring informing is observed.
2.3.1.17.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.5.1.1/4.2.5.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “GNB-CU CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.18 	Paging (CN-initiated)
2.3.1.18.1 	Test Purpose
The purpose of this test case is to verify that the Paging (CN-initiated) procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.6.1.
2.3.1.18.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 4.2.6.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.18.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.18.4 	Procedure
1.	Initiate Paging procedure from Core or Core emulator (5GC capabilities) to page a UE in RRC-IDLE state.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Initiate data transfer from Core or Core emulator (5GC capabilities) to UE in CM-IDLE state.
2.	Observe the Protocol Analyzer F1 link logs.
2.3.1.18.5 	Expected Results and Log Observation
2.3.1.18.5.1 	Expected Results
The Paging procedure is successfully completed.
In step 2, the Paging message is observed to page the UE.
2.3.1.18.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.6.1./4.2.6.2.
2.3.1.19 	UE context creation (service request)
2.3.1.19.1 	Test Purpose
The purpose of this test case is to verify that the UE initiated Service Request procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using the UE Context Setup procedure, conforming to the NR C-Plane profile specification [2] Section 6.1.1
2.3.1.19.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.19.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.19.4 	Procedure
1.	Initiate Service Request procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Initiate data transfer from a UE in CM-IDLE state Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
3.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after UE context was created.
4.	Observe the Protocol Analyzer F1 logs
2.3.1.19.5 	Expected Results and Log Observation
2.3.1.19.5.1 	Expected Results
The F1 UE Context Setup procedure is successfully completed.
The service request procedure is successfully performed, a PDU session and DRB are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.3.1.19.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.1.1.2/6.1.1.3.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated after step 1 a. and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE and the Application Test Server, respectively
2.3.1.20 	UE context creation (registration request)
2.3.1.20.1 	Test Purpose
The purpose of this test case is to verify that the UE initiated Initial Registration Request procedure can be performed successfully with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.1.2.
2.3.1.20.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.1.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.20.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has not registered to the network
2.3.1.20.4 	Procedure
1.	Initiate Initial Registration Request procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Switch on a powered-off UE
2.	Observe the Protocol Analyzer F1 logs
2.3.1.20.5 	Expected Results and Log Observation
2.3.1.20.5.1 	Expected Results
The F1 procedure as specified in the NR C-Plane profile specification [2] Section 6.1.2.2 is successfully completed.
The Initial registration procedure is successfully completed, and a new UE context is created in NG-RAN for signaling only connection.
2.3.1.20.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.1.2.2/6.1.2.3.
2.3.1.21 	UE Context Release
2.3.1.21.1	gNB-DU Initiated UE Context Release
2.3.1.21.1.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated UE Context Release Procedure is successfully performed between gNB-DU and gNB-CU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.2.1.
2.3.1.21.1.2 	Minimum Requirements
DUTs: Single gNB-DU and single gNB-CU:
DUTs shall apply the parameter condition specified in 6.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform gNB-DU initiated UE Context Release
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.21.1.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network and a PDU session has been established, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.21.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Initiate gNB-DU initiated UE Context Release procedure from UE or UE emulator.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Simulate radio link failure by increasing the attenuation of gNB cell.
3.	Observe the Protocol Analyzer F1 logs.
2.3.1.21.1.5 	Expected Results and Log Observation
2.3.1.21.1.5.1 			Expected Results
The F1 gNB-DU initiated UE Context Release procedure is performed successfully.
2.3.1.21.1.5.2 			Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.2.1.1/6.2.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the uplink and downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test server, respectively.
2.3.1.21.2 	gNB-CU Initiated UE Context Release
2.3.1.21.2.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Release Procedure is successfully performed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.2.2
2.3.1.21.2.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.2.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities and optional EPC capabilities for EPS services): used to terminate UEs (emulator) NAS protocol
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol, data transmission/reception and optional IMS services with EPS Fallback
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.21.2.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network and a PDU session has been established, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.21.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Initiate UE Context Release procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Power off the Test UE or UE emulator or
b.	Turn on flight-mode in Test UE (or UE emulator) or
c.	Delete subscriber in AMF or
d.	Initiate an IMS voice or emergency call with fallback to EPS
3.	Observe the Protocol Analyzer F1 logs
2.3.1.21.2.5 	Expected Results and Log Observation
2.3.1.21.2.5.1 			Expected Results
The F1 UE Context Release procedure is successfully completed.
The NGAP UE Context Release procedure is successfully completed, NG-AP signaling connection and associated User Plane connections are released
2.3.1.21.2.5.2 			Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.2.2.1/6.2.2.2
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test server, respectively
2.3.1.22 	gNB–CU Initiated UE Context Modification (SCell to be setup/removed)
2.3.1.22.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to setup or remove SCell(s) for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.1.
2.3.1.22.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU, PCell and SCell(s) are available and configured for Carrier Aggregation:
DUTs shall apply the parameter condition specified in 6.3.1.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of Carrier Aggregation: used to perform UE Context Modification procedure for SCell(s) setup or release.
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.22.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
Test UE or UE emulator is within the coverage area of the PCell
2.3.1.22.4 	Procedure
1.	Perform data transfer in the both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate UE Context Modification procedure for SCell(s) setup
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator under the coverage area of the SCell, while still remaining under the coverage area of the PCell, eg. by making use of variable attenuators. In this specific case, the SCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the UE Context Modification Procedure for SCell Setup, eg, after Event A1 reporting from UE.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	After expiration of at least 10 seconds, perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
6.	Initiate UE Context Modification procedure for SCell(s) removal
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator away from the coverage area of the SCell, while still remaining under the coverage area of the PCell, eg, by making use of variable attenuators. In this specific case, the SCell can start low attenuation applied which is subsequently increased to a level which can trigger the UE Context Modification Procedure for SCell Removal, eg, after Event A2 reporting from UE.
7.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
8.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
9.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.1.22.5 	Expected Results and Log Observation
2.3.1.22.5.1 	Expected Results
Data transfer is still ongoing after step 4 and after step 9.
2.3.1.22.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.1/6.3.1.1.1.
If any of the following listed IEs is observed in the F1 logs:
“SCell Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4 as well in step 5 and after step 6 and in step 8:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator
2.3.1.23 	gNB–CU Initiated UE Context Modification (DRB to be setup)
2.3.1.23.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to setup a DRB for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.2.
2.3.1.23.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.1.2/6.3.1.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB setup
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.23.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.23.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate UE Context Modification procedure for DRB setup
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Add another DRB to the UE by requesting another service, eg, Video streaming, resulting in a PDU Session Resource Setup or Modification Request
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.23.5 	Expected Results and Log Observation
2.3.1.23.5.1 	Expected Results
The F1 UE Context Modification procedure for DRB setup to UE is performed successfully.
Data transfer is possible using the newly established DRB.
2.3.1.23.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.2/6.3.1.2.1.
If any of the following listed IEs is observed in the F1 log
“DRB Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.24 	gNB–CU Initiated UE Context Modification (DRB to be released)
2.3.1.24.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure to release a DRB for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.3.
2.3.1.24.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.1.3/6.3.1.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB setup
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.24.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, at least two DRBs are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.24.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate UE Context Modification procedure for DRB release
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Remove one of at least two established DRBs from the UE by releasing one service, eg, Video streaming, resulting in a PDU Session Resource Release or Modification Request
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified
5.	Observe the Protocol Analyzer F1 logs
2.3.1.24.5 	Expected Results and Log Observation
2.3.1.24.5.1 	Expected Results
The F1 UE Context Modification procedure for DRB release to UE is performed successfully.
Data transfer is possible using the remaining DRB.
2.3.1.24.5.2 	Log Observation
F1 (and NG) logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.3/6.3.1.3.1.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively
2.3.1.25 	Reset (gNB-DU initiated) for EN-DC
2.3.1.25.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.3.
2.3.1.25.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform en-gNB initiated Partial Reset or Reset procedure
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.25.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition (eg, SN terminated split bearer) procedure has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.25.4 	Procedure
1.	 Perform the gNB-DU initiated Reset procedure over F1 to indicate the release of all allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate all cells serving UEs.
Note: After the Step1, one of the following procedures may occur:
Case1) If part of UE associations over the X2 interface are affected by the gNB-DU initiated Reset procedure over F1, then the en-gNB initiated Partial Reset procedure over X2 described in Section 2.2.1.6
Case2) If all of UE associations over the X2 interface are affected by the gNB-DU initiated Reset procedure over F1, then the en-gNB initiated Reset procedure over X2 described in Section 2.2.1.4. Then up to implementation, either PARTIAL RESET REQUIRED message over X2 or RESET REQUEST message over X2 is sent from the gNB-CU. PARTIAL RESET CONFIRM message over X2 or RESET RESPONSE message over X2 is sent from the eNB accordingly.
2.	Observe the Protocol Analyzer X2 and F1 link logs.
2.3.1.25.5 	Expected Results and Log Observation
2.3.1.25.5.1 	Expected Results
The gNB-DU initiated Reset procedure is successfully completed.
All of the UE contexts affected by the gNB-DU initiated Reset procedure are successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.25.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.2.3.1/4.1.2.3.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.26	Reset (gNB-CU initiated) for EN-DC
2.3.1.26.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU initiated Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.2.4.
2.3.1.26.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform en-gNB initiated Reset procedure
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.26.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition (eg, SN terminated split bearer) procedure has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.26.4 	Procedure
1.	 Perform the gNB-CU initiated Reset procedure over X2 to indicate the release of all allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate all cells serving UEs.
Note: After Step1, the gNB-CU performs Reset procedure over F1 to all of UE associations over the F1 interface affected by the gNB-CU initiated Reset procedure over X2.
2.	Observe the Protocol Analyzer F1 and X2 link logs.
2.3.1.26.5 	Expected Results and Log Observation
2.3.1.26.5.1 	Expected Results
The gNB-CU initiated Reset procedure is successfully completed.
All of the UE contexts affected by the gNB-CU initiated Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.26.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.2.4.1/4.1.2.4.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.27 	Partial Reset (gNB-DU initiated) for EN-DC
2.3.1.27.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated Partial Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.3.
2.3.1.27.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform en-gNB initiated Partial Reset procedure
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.27.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition (eg, SN terminated split bearer) procedure has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.27.4 	Procedure
1.	Perform the gNB-DU initiated Partial Reset procedure over F1 to indicate the release of a part of allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate a few cells serving UEs.
Note: After Step1, the gNB-CU performs Partial Reset procedure over X2 to the part of UE association over the X2 interface affected by the gNB-DU initiated Partial Reset procedure over F1.
2.	Observe the Protocol Analyzer F1 and X2 link logs.
2.3.1.27.5 	Expected Results and Log Observation
2.3.1.27.5.1 	Expected Results
The gNB-DU initiated Partial Reset procedure is successfully completed.
The part of the UE contexts affected by the gNB-DU initiated Partial Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.27.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.4.3.1/4.1.4.3.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.28 	Partial Reset (gNB-CU initiated) for EN-DC
2.3.1.28.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU initiated Partial Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.1.4.4.
2.3.1.28.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform en-gNB initiated Partial Reset procedure
Test UEs or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.28.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UEs or emulated UEs are within the coverage area of the SN cell, and Secondary Node Addition (eg, SN terminated split bearer) procedure has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.28.4 	Procedure
1.	 Perform the gNB-CU initiated Partial Reset procedure over X2 to indicate the release of a part of allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate a few cells serving UEs.
NOTE: After Step1, the gNB-CU performs Reset procedure over F1 to the part of UE association over the F1 interface affected by the gNB-CU initiated Partial Reset procedure over X2.
2.	Observe the Protocol Analyzer F1 and X2 link logs.
2.3.1.28.5 	Expected Results and Log Observation
2.3.1.28.5.1 	Expected Results
The gNB-CU initiated Partial Reset procedure is successfully completed.
The part of the UE contexts affected by the gNB-CU initiated Partial Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.28.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.1.4.4.1/4.1.4.4.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.29 	Reset (gNB-CU initiated) for NR Stand-Alone
2.3.1.29.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU initiated Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.2.3.
2.3.1.29.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.29.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.29.4 	Procedure
1.	 Perform the gNB-CU initiated Reset procedure over F1 to indicate the release of all allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate all cells serving UEs.
2.	Perform the gNB-CU initiated Reset procedure over F1 to indicate the release of a part of allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-CU in order to deactivate a few cells serving UEs.
3.	Observe the Protocol Analyzer F1 link logs.
2.3.1.29.5 	Expected Results and Log Observation
2.3.1.29.5.1 	Expected Results
The reset is successfully completed by Reset (gNB-CU initiated) procedure in step1. All of the UE contexts affected by the gNB-CU initiated Reset procedure are successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
The partial reset is successfully completed by Reset (gNB-CU initiated) procedure in step2. The part of the UE contexts affected by the gNB-CU initiated Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.29.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.2.3.1/4.2.2.3.2.1/4.2.2.3.2.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.30 	Reset (gNB-DU initiated) for NR Stand-Alone
2.3.1.30.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated Reset procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.2.4.
2.3.1.30.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.30.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.30.4 	Procedure
1.	 Perform the gNB-DU initiated Reset procedure over F1 to indicate the release of all allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate all cells serving UEs.
2.	Perform the gNB-DU initiated Reset procedure over F1 to indicate the release of a part of allocated UE contexts.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB-DU in order to deactivate a few cells serving UEs.
3.	Observe the Protocol Analyzer F1 link logs.
2.3.1.30.5 	Expected Results and Log Observation
2.3.1.30.5.1 	Expected Results
The reset is successfully completed by Reset (gNB-DU initiated) procedure in step1. All of the UE contexts affected by the gNB-DU initiated Reset procedure are successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
The partial reset is successfully completed by Reset (gNB-DU initiated) procedure in step2. The part of the UE contexts affected by the gNB-DU initiated Reset procedure is successfully released in the gNB-CU and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.3.1.30.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.2.4.1/4.2.2.4.2.1/4.2.2.4.2.2.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.31	Intra gNB-DU, Intra Cell Handover
2.3.1.31.1	Test Purpose
The purpose of this test case is to verify that Intra gNB-DU, Intra Cell Handover procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.5.1 (section 6.5.1.1 for alternative 1 or section 6.5.1.3 for alternative 2).
2.3.1.31.2	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 6.5.1 of the NR C-Plane profile specification [2].
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform Intra gNB-DU, Intra Cell Handover
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and Content
2.3.1.31.3	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.31.4	Procedure
1.	Perform data transfer in the both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform Intra gNB-DU, Intra cell handover
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Security Key update by AMF by setting "Security Key" IE in NGAP: UE CONTEXT MODIFICATION REQUEST on Core emulator
3.	Stop data transfer between the Application Test Server and Test UE or UE emulator
4.	Perform data transfer in both directions between the Application test Server and Test UE or UE emulator for 10 seconds
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.1.31.5	Expected Results and Log Observation
2.3.1.31.5.1 	Expected Results
Intra gNB-DU, Intra Cell Handover procedure is successfully completed.
Data transfer is still ongoing.
2.3.1.31.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.5.1.1/6.5.1.2 or 6.5.1.3/6.5.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.32 	Intra gNB-DU, Inter Cell Handover
2.3.1.32.1 	Test Purpose
The purpose of this test case is to verify that the Intra gNB-DU, Inter Cell Handover between gNB-CU and gNB-DU from different vendors can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.5.2 (section 6.5.2.1 for alternative 1 or section 6.5.2.3 for alternative 2)
2.3.1.32.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU,
DUTs shall apply the parameter condition specified in 6.5.2.2 of the NR C-Plane profile specification [2]
The coverage of source cell and target cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform Intra gNB-DU, Inter Cell Handover.
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.32.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Test UE or UE emulator is within the coverage area of the source Cell
2.3.1.32.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate inter cell mobility, resulting in UE Context Modification procedure with PSCell inclusion
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator from the coverage area of the serving Cell under the coverage area of the target Cell eg. by making use of variable attenuators. In this specific case, the serving cell can start with low attenuation, the target cell can start off with high attenuation applied which is subsequently changed up to a level which can trigger the UE Context Modification Procedure with PSCell inclusion eg, after Event A4 reporting from UE.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.32.5 	Expected Results and Log Observation
2.3.1.32.5.1 	Expected Results
The Intra gNB-DU, Inter Cell Handover procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.32.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.5.2.1/6.5.2.2 or 6.5.2.3/6.5.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively
2.3.1.33 	Inter gNB-DU Handover
2.3.1.33.1 	Test Purpose
The purpose of this test case is to verify that the Inter gNB-DU Handover between gNB-CU and gNB-DU from different vendors can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.5.3
2.3.1.33.2 	Minimum Requirements
DUTs: Single gNB-CU and two gNB-DU (Source gNB-DU, Target gNB-DU):
DUTs shall apply the parameter condition specified in 6.5.3.1/6.5.3.2 of the NR C-Plane profile specification [2]
The coverage of source cell and target cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform Inter gNB-DU, Inter Cell Handover
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.33.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and all gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Test UE or UE emulator is within the coverage area of the source Cell
2.3.1.33.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate inter cell mobility
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator from the coverage area of the serving Cell under the coverage area of the target Cell eg. by making use of variable attenuators. In this specific case, the serving cell can start with low attenuation, the target cell can start off with high attenuation applied which is subsequently changed up to a level which can trigger the UE Context Setup Procedure towards the target gNB-DU eg, after Event A4 reporting from UE.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.33.5 	Expected Results and Log Observation
2.3.1.33.5.1 	Expected Results
The Inter gNB-DU Handover procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.33.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.5.3.1/6.5.3.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE, MODIFICATION RESPONSE or RELEASE RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator UE and the Application Test Server, respectively
2.3.1.34	Inter RAT Handover to LTE
2.3.1.34.1 	Test Purpose
The purpose of this test case is to verify that the Inter RAT Handover to LTE procedure, triggered by the UE Context Modification Procedure (containing Mobility from NR Command) between gNB-CU and gNB-DU from different vendors, can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.8.1
2.3.1.34.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU
DUTs shall apply the parameter condition specified in 6.8.1.1/6.8.1.2 of the NR C-Plane profile specification [2]
The coverage of source en-gNB cell and target eNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform Intra gNB-DU, Inter Cell Handover.
eNB or eNB emulator: used to perform Inter RAT Handover to LTE procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 and NG procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.34.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and all gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Test UE or UE emulator is within the coverage area of the source en-gNB Cell
2.3.1.34.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate inter RAT mobility
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator from the coverage area of the serving en-gNB Cell under the coverage area of the target eNB Cell eg. by making use of variable attenuators. In this specific case, the serving cell can start with low attenuation, the target cell can start off with high attenuation applied which is subsequently changed up to a level which can trigger the Handover Required message towards the AMF and the UE Context Modification Procedure (containing Mobility from NR Command) towards the gNB-DU eg, after Event B1 reporting from UE.
3.	Stop the data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during that inter RTA handover procedure. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator and by the Application Test Server.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer F1 logs
2.3.1.34.5 	Expected Results and Log Observation
2.3.1.34.5.1 	Expected Results
The Inter RAT HO to LTE procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.34.5.2 	Log Observation
F1 and NG logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.8.1.1/6.8.1.2
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE” or “UE CONTEXT RELEASE RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and NG logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 and NG logs is correctly received by the Test UE or UE emulator via NR respectively LTE RAT
2.3.1.35	RRC Connection Re-establishment (Intra gNB-DU)
2.3.1.35.1	Test Purpose
The purpose of this test case is to verify that the RRC Connection Re-establishment (Intra gNB-DU) procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.10.1.
2.3.1.35.2	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU.
DUTs shall apply the parameter condition specified in 6.10.1 of the NR C-Plane profile specification [2].
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform the RRC connection Re-establishment (Intra gNB-DU).
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and Content.
2.3.1.35.3	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2].
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed.
2.3.1.35.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform Intra gNB-DU, Inter Cell Handover procedure from source gNB cell to target gNB cell
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	The Test UE or UE emulator sends a Measurement Report to the source gNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source gNB cell and the target gNB cell simultaneously. In this specific case, the source gNB cell can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source gNB.
3.	Perform RRC Connection Re-establishment (Intra gNB-DU) by triggering Handover failure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	Simulate radio link failure by increasing the attenuation of target gNB cell when Handover execution is in progress
4.	Stop data transfer between the Application Test Server and Test UE or UE emulator
5.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
6.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.1.35.5	Expected Results and Log Observation
2.3.1.35.5.1 	Expected Results
The RRC Connection Re-establishment (Intra gNB-DU) procedure is successfully completed and the UE is successfully connected to source gNB DU cell.
2.3.1.35.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.10.1.1/6.10.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
the test results shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 3 and in step 5
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
Regarding the downlink U-Plane data generated in step 1 and after step 3 and in step 5
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.36	RRC Connection Re-establishment (Inter gNB-DU)
2.3.1.36.1	Test Purpose
The purpose of this test case is to verify that RRC Connection Re-establishment (Inter gNB-DU) procedure can be successfully completed with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.10.2.
2.3.1.36.2	Minimum Requirements
DUTs: Single gNB-CU and Two gNB-DU (Source gNB-DU to Target gNB-DU).
DUTs shall apply the parameter condition specified in 6.10.2 of the NR C-Plane profile specification [2].
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform the RRC connection Re-establishment (Inter gNB-DU).
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and Content.
2.3.1.36.3	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2].
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed.
2.3.1.36.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform Inter gNB-DU Handover procedure from source gNB-DU to target gNB-DU
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	The Test UE or UE emulator sends a Measurement Report to the source gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source gNB-DU and the target gNB-DU simultaneously. In this specific case, the source gNB-DU can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB-DU can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source gNB-DU.
3.	 Perform RRC Connection Re-establishment (Inter gNB-DU) by triggering Handover failure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	Simulate radio link failure by increasing the attenuation of Target gNB-DU.
4.	Stop data transfer between the Application Test Server and Test UE or UE emulator
5.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
6.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.1.36.5	Expected Results and Log Observation
2.3.1.36.5.1 	Expected Results
The RRC Connection Re-establishment (Inter gNB-DU) procedure is successfully completed and the UE is successfully connected to Target gNB-DU.
2.3.1.36.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.10.2.1/6.10.2.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE Context Modification Response”
the test results shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.37 	RRC connected to RRC inactive
2.3.1.37.1 	Test Purpose
The purpose of this test case is to verify that the RRC connected to RRC inactive procedure between gNB-CU and gNB-DU from different vendors, performed with a UE Context Release procedure, can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.9.1
2.3.1.37.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU
DUTs shall apply the parameter condition specified in 6.9.1.1/6.9.1.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform RRC connected to RRC inactive procedure.
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
2.3.1.37.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and all gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.3.1.37.4 	Procedure
1.	While the UE or UE emulator is in RRC connected state, perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros
2.	Initiate RRC connected to RRC inactive procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Stop any data transfer in the uplink and downlink direction in the Test UE or UE emulator and in the Application Test Server.
b.	Wait for inactivity detection in gNB-CU. The inactivity detection is controlled by a timer with an expiration value that is dependent on the gNB-CU vendor implementation. After timer expiry, the RRC connected to RRC inactive procedure is initiated by gNB-CU with a UE Context Release Command message.
3.	Observe the Protocol Analyzer F1 logs
2.3.1.37.5 	Expected Results and Log Observation
2.3.1.37.5.1 	Expected Results
The RRC connected to RRC inactive procedure is successfully completed when the UE Context between gNB-CU and gNB-DU is released and the RRC connection between the UE or UE Emulator and the gNB-DU is suspended.
2.3.1.37.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.9.1.1/6.9.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test server, respectively
2.3.1.38 	RRC inactive to RRC connected, Intra gNB-CU
2.3.1.38.1 	Test Purpose
The purpose of this test case is to verify that the RRC inactive to RRC connected procedure between gNB-CU and gNB-DU from different vendors, performed with a UE Context Setup procedure, can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.9.2.
2.3.1.38.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU
DUTs shall apply the parameter condition specified in 6.9.2.1/6.9.2.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform RRC inactive to RRC connected procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
2.3.1.38.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and the gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Data transfer in the uplink and downlink direction towards/from the Test UE or UE emulator is omitted for a period of time. The UE or UE emulator is in RRC inactive state
2.3.1.38.4 	Procedure
1.	Initiate RRC inactive to RRC connected procedure
Two examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Perform data transfer in the uplink direction from the Test UE or UE emulator towards the Application Test Server
The RRC inactive to RRC connected procedure is initiated by gNB-CU with UE Context Setup procedure after receiving Initial UL RRC message from UE (RRC resume) via gNB-DU
b.	As an alternative, perform data transfer in the downlink direction from the Application Test Server towards the Test UE or UE emulator
Paging procedure is initiated by gNB-CU, before the procedure as described under example a. is started
2.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
3.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds before the RRC connection times out.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the RRC connection was established
4.	Observe the Protocol Analyzer F1 logs
2.3.1.38.5 	Expected Results and Log Observation
2.3.1.38.5.1 	Expected Results
The RRC inactive to RRC connected procedure is successfully completed when the UE Context between gNB-CU and gNB-DU is established and the RRC connection between the UE or UE Emulator and the gNB-DU is resumed.
2.3.1.38.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.9.2.1/6.9.2.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and in step 3:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test server, respectively.
2.3.1.39	S-NG-RAN Node Addition procedure
2.3.1.39.1	Test Purpose
The purpose of this test case is to verify that the S-NG RAN Node Addition procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Setup procedures; conforming to the NR C-Plane profile specification [2] Section 7.1.1. This test case is on top of the Xn part of the Secondary Node Addition procedure described in Section 2.4.1.3.
2.3.1.39.2	Minimum Requirements
DUTs: Two gNBs (Each gNB with Single gNB-CU and single gNB-DU):
DUTs shall apply the parameter condition specified in 7.1.1 of the NR C-Plane profile specification [2]
The coverages of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN Node Addition
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and contents
2.3.1.39.3	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Data transfer between the application test server and Test UE or UE emulator is possible
2.3.1.39.4	Procedure
1.	Perform data transfer in both directions as described in step 1 (except for Note) in Section 2.4.1.3.4
2.	Perform S-NG-RAN Node Addition procedure as described in step 2 in Section 2.4.1.3.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.3.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.3.4.
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.39.5	Expected Results and Log Observation
2.3.1.39.5.1 	Expected Results
The UE Context Setup procedure over F1 is successfully completed.
The Secondary Node Addition Procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.39.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.1.1.3/7.1.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.39.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.39.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.40 	Resource Status Reporting Initiation
2.3.1.40.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting Initiation procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.9.1.
2.3.1.40.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.40.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.40.4 	Procedure
1.	Perform the Resource Status Reporting Initiation procedure to start a measurement in gNB-CU
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB-CU in order to initiate the Resource Status Reporting Initiation procedure to start the measurement.
2.	Perform the Resource Status Reporting Initiation procedure to add cells to report for a measurement in gNB-CU
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB-CU in order to initiate the Resource Status Reporting Initiation procedure to add cells to the measurement.
3.	Perform the Resource Status Reporting Initiation procedure to stop a measurement in gNB-CU
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB-CU in order to initiate the Resource Status Reporting Initiation procedure to stop the measurement
4.	Observe the Protocol Analyzer F1 logs
2.3.1.40.5 	Expected Results and Log Observation
2.3.1.40.5.1 	Expected Results
The start of the measurement is successfully completed by performing the Resource Status Reporting Initiation procedure in step1.
The cell addition for the measurement initiated in step1 is successfully completed by performing the Resource Status Reporting Initiation procedure in step2.
The stop of the measurement is successfully completed by performing the Resource Status Reporting Initiation procedure in step3.
2.3.1.40.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.9.1.3/4.2.9.1.4.
If any of the following listed IEs is observed in the F1 logs
“Criticality Diagnostics” in “RESOURCE STATUS RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.41 	Resource Status Reporting
2.3.1.41.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting procedure with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.9.2.
2.3.1.41.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.41.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.41.4 	Procedure
1.	Perform the Resource Status Reporting procedure from the gNB-DU to report the result of on-going load measurements
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Perform the Resource Status Reporting Initiation procedure (See step 1 in 2.3.1.40.4)
Note: How to perform the specific procedures for the traffic load are out of scope of this specification.
2.	Observe the Protocol Analyzer F1 logs.
2.3.1.41.5 	Expected Results and Log Observation
2.3.1.41.5.1 	Expected Results
The Resource Status Reporting procedure is successfully completed.
2.3.1.41.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.9.2.3/4.2.9.2.4.
2.3.1.42	Inter-Master Node Handover (with SN Change, Option 3x)
2.3.1.42.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (with SN Change, Option 3x) procedure leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Setup, UE Context Modification and UE Context Release procedures, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.4.2.3. This test case is on top of the X2 part of the Inter-Master Node Handover (with SN Change, Option 3x) procedure described in Section 2.2.1.35.
2.3.1.42.2 	Minimum Requirements
DUTs: Two en-gNB-CU (S-SN-CU, T-SN-CU) and two en-gNB-DU (S-SN-DU, T-SN-DU):
DUTs shall apply the parameter condition specified in 5.4.2 of the NR C-Plane profile specification [2]
The coverage of Source eNB cell (S-MN) overlaps with Target eNB cell (T-MN) and Source en-gNB cell (S-SN)
The coverage of Target eNB cell (T-MN) overlaps with Target en-gNB cell (T-SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Inter-Master Node Handover (with SN Change, Option 3x) procedure
eNB or eNB emulator: used to perform Inter-Master Node Handover (with SN Change, Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.42.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNBs according to the NR C-Plane profile specification [2]
X2 setup procedure between the source eNB and target eNB specified in 3GPP TS 36.423 [12] has been successfully completed
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the source eNB cell and S-SN cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition (Option 3x) procedure between the source eNB and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is ongoing (via the LTE and NR RATs)
2.3.1.42.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform the X2 part of Inter-Master Node Handover (with SN Change, Option 3x) procedures as described in step 2 in Section 2.2.1.35.4
3.	Stop data transfer between the Application Test Server and Test UE or UE emulator
3.	Perform data transfer in both directions as described step 4 in Section 2.2.1.35.4
5.	Observe the Protocol Analyzer F1, S1 and X2 logs and Test UE or UE emulator logs
2.3.1.42.5 	Expected Results and Log Observation
2.3.1.42.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification, and UE Context Release procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
The Inter-Master Node Handover (with SN Change, Option 3x) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.42.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.4.2.3/5.4.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.42.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.42.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.43 	Allowed Band Combination list update (MN initiated)
2.3.1.43.1 	Test Purpose
The purpose of this test case is to verify that the Allowed Band Combination list update procedure (MN initiated) received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedure; conforming to the NR C-Plane profile specification [2] Section 5.6.2. This test case is on top of the X2 part of the Allowed Band Combination list update (MN initiated) procedure described in Section 2.2.1.30.
2.3.1.43.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.2 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform Allowed Band Combination list update procedure (MN initiated)
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Allowed Band Combination list update procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.43.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.43.4 	Procedure
1.	Perform Allowed Band Combination list update procedure (MN initiated) as described in step 1 in Section 2.2.1.30.4.
2.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.43.5 	Expected Results and Log Observation
2.3.1.43.5.1 	Expected Results
The UE Context Modification procedure over F1 is successfully completed.
The Allowed Band Combination list update procedure (MN initiated) is successfully completed.
2.3.1.43.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.2.3/5.6.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer show that:
After step 1 the updated allowedBC-ListMRDC is applied in gNB-DU
o	An example of how to observe the updated allowedBC-ListMRDC is to check F1 log. The exact method to observe the updated allowedBC-ListMRDC is out of scope of this specification.
2.3.1.44 	SCG config query (MN initiated) for EN-DC
2.3.1.44.1 	Test Purpose
The purpose of this test case is to verify that the SCG config query procedure (MN initiated) received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedure; conforming to the NR C-Plane profile specification [2] Section 5.6.4. This test case is on top of the X2 part of the SCG config query (MN initiated) procedure described in Section 2.2.1.32.
2.3.1.44.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.4 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform SCG config query procedure (MN initiated)
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform MN initiated SCG config query procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.44.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.44.4 	Procedure
1.	Perform SCG config query procedure (MN initiated) as described in step 1 in Section 2.2.1.32.4
2.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.1.44.5 	Expected Results and Log Observation
2.3.1.44.5.1 	Expected Results
The UE Context Modification procedure over F1 is successfully completed.
The SCG config query procedure (MN initiated) is successfully completed.
2.3.1.44.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.4.3/5.6.4.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer show that:
After step 1 the CellGroupConfig is applied in gNB-CU:
o	An example of how to observe the CellGroupConfig is to check F1 log. The exact method to observe the SCG configuration Query is out of scope of this specification
2.3.1.45 	gNB-DU initiated UE Context Modification (DRB to be released)
2.3.1.45.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated UE Context Modification procedure to release DRB for a UE can be performed successfully between gNB-DU and gNB-CU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.2.1.
2.3.1.45.2 	Minimum Requirements
DUTs: Single gNB-DU and single gNB-CU:
DUTs shall apply the parameter condition specified in 6.3.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform gNB-DU initiated UE Context Modification procedure for DRB release
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.45.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Sections 6.3.2.1/6.3.2.1.1, is successfully performed, at least two DRBs are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.45.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate gNB-DU initiated UE Context Modification procedure for DRB release
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Remove one of at least two established DRBs from the UE by simulating radio link failure by increasing the attenuation of gNB-DU
3.	Stop the data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.1.45.5 	Expected Results and Log Observation
2.3.1.45.5.1 	Expected Results
The F1 gNB-DU initiated UE Context Modification procedure for DRB release to UE is performed successfully.
2.3.1.45.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.2.1/6.3.2.1.1.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION CONFIRM” or “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.46	Inter RAT Handover to NR
2.3.1.46.1 	Test Purpose
The purpose of this test case is to verify that the Inter RAT Handover to NR procedure, triggered by the UE Context setup Request between gNB-CU and gNB-DU from different vendors, can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 6.8.2
2.3.1.46.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU
DUTs shall apply the parameter condition specified in 6.8.2 of the NR C-Plane profile specification [2]
The coverage of source eNB cell and target en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Inter RAT Handover to NR
eNB or eNB emulator: used to perform Inter RAT Handover to NR procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.46.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or emulated UE have registered to the LTE network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the source eNB Cell and target en-gNB Cell
Data transfer between the Application Test Server and Test UE or UE emulator is on-going (via LTE RAT)
2.3.1.46.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter RAT Handover to NR procedure.
This involves observing that the user plane data forwarded from the eNB to the en-gNB, over the X2 interface during the Inter RAT Handover to NR procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the eNB to start buffering user plane downlink data prior to the change of the eNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Initiate inter RAT mobility
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Move the Test UE or UE emulator from the coverage area of the serving eNB Cell under the coverage area of the target en-gNB Cell eg. by making use of variable attenuators. In this specific case, the source eNB cell can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Handover Request message from AMF and the UE Context Setup Request towards the gNB-DU.
3.	Stop data transfer between the Application Test Server and Test UE or UE emulator
4.	Perform data transfer in both directions between the Application test Server and Test UE or UE emulator for 10 seconds
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.1.46.5 	Expected Results and Log Observation
2.3.1.46.5.1 	Expected Results
The Inter RAT Handover to NR procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.46.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.8.2.1/6.8.2.2
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.47 	gNB-CU initiated UE Context Modification (DRX cycle activation/deactivation)
2.3.1.47.1 	Test Purpose
The purpose of this test case is to verify that the UE Context Modification procedure for DRX cycle activation/deactivation for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.4.
2.3.1.47.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.1.4 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB setup
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.47.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the Cell
2.3.1.47.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate UE Context Modification procedure for DRX activation
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	One of the possible methods can be to make use of O&M command in the gNB-CU in order to activate C-DRX for a specific UE or service
b.	Perform a new UE Context Setup procedure with UE or UE emulator for a service which is configured for C-DRX activated
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	After expiration of at least 10 seconds, perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
6.	Initiate UE Context Modification procedure for DRX deactivation
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	One of the possible methods is to make use of O&M command in the gNB-CU in order to deactivate C-DRX for a specific UE or service
b.	Add another DRB to the UE by requesting another service, which is configured for C-DRX deactivation
7.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
8.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
9.	Observe the Protocol Analyzer F1 logs
2.3.1.47.5 	Expected Results and Log Observation
2.3.1.47.5.1 	Expected Results
After step 1 the F1 UE Context Modification procedure for DRX activation to UE is performed successfully.
After step 2 the F1 UE Context Modification procedure for DRX deactivation to UE is performed successfully.
Data transfer is possible.
2.3.1.47.5.2 	Log Observation
F1 (and NG) logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1 and 6.3.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4 as well in step 5 and after step 6 and in step 8:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively
2.3.1.48	gNB-CU initiated UE Context Modification (DRB to be modified)
2.3.1.48.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU initiated UE Context Modification procedure to modify DRB for a UE can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.6.
2.3.1.48.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.1.6 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform UE Context Modification procedure for DRB modification
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.48.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a DRBs is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.48.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate UE Context Modification procedure for DRB modification.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Modify an existing ‘Non-dynamic 5QI’ for a DRB configured in Core emulator (AMF) for the UE, resulting in a PDU Session Resource Modification Request.
3.	Stop the data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.1.48.5 	Expected Results and Log Observation
2.3.1.48.5.1 	Expected Results
The F1 UE Context Modification procedure for DRB modification to UE is performed successfully.
Data transfer is possible using the modified DRB.
2.3.1.48.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.6/6.3.1.6.1.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.49 	M-NG-RAN node initiated SN modification
2.3.1.49.1 	PDU Session Addition
2.3.1.49.1.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Addition) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.1. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PDU Session Addition) procedure described in Section 2.4.1.4.1.
2.3.1.49.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Addition)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.1.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
2.3.1.49.1.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.1.4.
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Addition) procedure as described in step 2 in Section 2.4.1.4.1.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.1.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.1.4.
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.1.5 	Expected Results and Log Observation
2.3.1.49.1.5.1 			Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PDU Session Addition) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.1.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.1.3/7.2.1.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.2 	PDU Session Release
2.3.1.49.2.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Release) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.2. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PDU Session Release) procedure described in Section 2.4.1.4.2.
2.3.1.49.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
At least two PDU Sessions exist to a Test UE or UE emulator in the NW
2.3.1.49.2.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
At least two PDU Sessions exist to a Test UE or UE emulator in the NW
2.3.1.49.2.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.2.4.
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Release) procedure as described in step 2 in Section 2.4.1.4.2.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.2.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.2.4.
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.2.5 	Expected Results and Log Observation
2.3.1.49.2.5.1 			Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PDU Session Release) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.2.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.2.3/7.2.1.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.3 	PDU Session Modification
2.3.1.49.3.1 	PDU Session Modification with QoS flow addition
2.3.1.49.3.1.1 			Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.1. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure described in Section 2.4.1.4.4.1.
2.3.1.49.3.1.2 			Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.3.1.3 			Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
2.3.1.49.3.1.4 			Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.4.1.4
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure as described in step 2 in Section 2.4.1.4.4.1.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.4.1.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.4.1.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs
2.3.1.49.3.1.5 			Expected Results and Log Observation
2.3.1.49.3.1.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.3.1.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.1.3/7.2.1.3.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.3.2 	PDU Session Modification with QoS flow release
2.3.1.49.3.2.1 			Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.2. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure described in Section 2.4.1.4.4.2.
2.3.1.49.3.2.2 			Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
At least two QoS flows exist to a PDU Session
2.3.1.49.3.2.3 			Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
At least two QoS flows exist to a Test UE or UE emulator in the NW
2.3.1.49.3.2.4 			Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.4.2.4
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure as described in step 2 in Section 2.4.1.4.4.2.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.4.2.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.4.2.4
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs
2.3.1.49.3.2.5 			Expected Results and Log Observation
2.3.1.49.3.2.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.3.2.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.2.3/7.2.1.3.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.3.3 	PDU Session Modification with 5QI change
2.3.1.49.3.3.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change to modify a 5QI (and/or ARP) of the SN terminated split bearer for an existing PDU Session) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.3.
This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change) procedure described in Section 2.4.1.4.8.
2.3.1.49.3.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Addition)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.3.3.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
2.3.1.49.3.3.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.8.4.
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change) procedure as described in step 2 in Section 2.4.1.4.8.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.8.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.8.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.3.3.5 	Expected Results and Log Observation
2.3.1.49.3.3.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PDU Session Modification with 5qi change) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.3.3.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.3.3/7.2.1.3.3.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the modified 5QI is applied:
An example of how to observe the 5QI change of the SN terminated split QoS flow from an existing PDU Session is provided below in bullet a. The exact method to observe the changed 5QI is out of scope of this specification
a.	Check the following two points
o	Check that step 2 (5QI changed with IE “DRB To Be Modified List” included in the messages “UE Context Modification Request”) performs correctly
o	Check that the data is flowing using the QoS flow with the new 5QI in step 4
Regarding the downlink U-Plane data generated in step 1, after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1, after step 2 and step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.4 	Security Key change
2.3.1.49.4.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (Security Key change) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.4. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (Security Key change) procedure described in Section 2.4.1.4.3.
2.3.1.49.4.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (Security Key change)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.4.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
2.3.1.49.4.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.3.4
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with Security Key change) procedure as described in step 2 in Section 2.4.1.4.3.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.3.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.3.4
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs
2.3.1.49.4.5 	Expected Results and Log Observation
2.3.1.49.4.5.1 			Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (Security Key change) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.4.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.4.3/7.2.1.4.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in in step 1 and after step 2 and step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.49.5 	SCG Configuration Query for NR-DC
2.3.1.49.5.1 	Test Purpose
The purpose of this test case is to verify that the SCG Configuration Query procedure processing by gNB-CU in both M-gNB and S-gNB leads to correct interworking between gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedure; conforming to the NR C-Plane profile specification [2] Section 7.2.1.5. This test case is on top of the Xn part of the SCG Configuration Query procedure described in Section 2.4.1.4.5.
2.3.1.49.5.2 	Minimum Requirements
DUTs: Two gNBs (Each gNB with Single gNB-CU and single gNB-DU):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverages of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform SCG Configuration Query procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and content
2.3.1.49.5.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU in both MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
S-NG -RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.49.5.4 	Procedure
1.	Perform SCG Configuration Query procedure as described in step 1 in Section 2.4.1.4.5.4
2.	Observe the Protocol Analyzer Xn and F1 logs
2.3.1.49.5.5 	Expected Results and Log Observation
2.3.1.49.5.5.1 			Expected Results
The UE Context Modification procedure over F1 in both M-gNB and S-gNB is successfully completed.
The SCG Configuration Query procedure is successfully completed.
2.3.1.49.5.5.2 			Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.5.3/7.2.1.5.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer show that:
“After step 1 the CellGroupConfig is applied in gNB-CU of both MgNB and SgNB:
o	An example of how to observe the CellGroupConfig is to check F1 log. The exact method to observe the CellGroupConfig is out of scope of this specification.
2.3.1.49.6 	Allowed Band Combination list update
2.3.1.49.6.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure with gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedure; conforming to the NR C-Plane profile specification [2] Section 7.2.1.6. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure described in Section 2.4.1.4.6.
2.3.1.49.6.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (Allowed Band Combination list update)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.6.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.49.6.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.6.4.
2.	Perform M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure as described in step 2 in Section 2.4.1.4.6.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.6.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.6.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.6.5 	Expected Results and Log Observation
2.3.1.49.6.5.1 			Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.6.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.6.3/7.2.1.6.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated allowedBC-ListMRDC is applied in SgNB-DU:
An example of how to observe the updated allowedBC-ListMRDC is to check F1 log. The exact method to observe the updated allowedBC-ListMRDC is out of scope of this specification.
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs.
2.3.1.49.7 	PCell Change (Intra-MN)
2.3.1.49.7.1	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure with gNB-CU and gNB-DU from different vendors using on F1 UE Context Modification procedure; conforming to the NR C-Plane profile specification [2] Section 7.2.1.7. This test case is on top of the Xn part of the M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure described in Section 2.4.1.4.7.
2.3.1.49.7.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
MgNB cell (MN) has at least 2 cells configured and in operation
The coverage of Intra-MgNB primary cell (MN) and SgNB cell (SN) overlap
The coverage of Intra-MgNB serving cell and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PCell Change (Intra-MN))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.7.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure has between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.49.7.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.4.7.4.
2.	Perform M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure as described in step 2 in Section 2.4.1.4.7.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.4.7.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.4.7.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.7.5 	Expected Results and Log Observation
2.3.1.49.7.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.7.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.7.3/7.2.1.7.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs.
2.3.1.49.8 	Measurement Gap Coordination Procedure (MN initiated)
2.3.1.49.8.1 	Test Purpose
The purpose of this test case is to verify that the MgNB initiated measurement gap coordination procedure with gNB-CU and gNB-DU from different vendors using the F1 UE Context Modification procedure is conforming to the NR C-Plane profile specification [2] Section 7.2.1.8. This test case is on top of the Xn part of the MgNB node initiated SN modification (Measurement Gap Coordination Procedure (MN initiated)) procedure described in Section 2.4.1.21.
2.3.1.49.8.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU resembling an MN, SgNB-CU and SgNB-DU resembling an SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to trigger the measurement report procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.49.8.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2], for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.49.8.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.21.4.
2.	Perform MgNB node initiated SN modification (Measurement Gap Coordination (MN-initiated)) procedure as described in step 2 in Section 2.4.1.21.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.21.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.21.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.49.8.5 	Expected Results and Log Observation
2.3.1.49.8.5.1 			Expected Results
The UE Context Modification procedures are successfully completed.
The MgNB node initiated SN modification (Measurement Gap Coordination Procedure (MN initiated)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.49.8.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.8.3/7.2.1.8.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via SgNB and MgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via SgNB and MgNB is recorded in the F1 logs.
2.3.1.50 	NG-RAN Node Configuration Update
2.3.1.50.1 	Test Purpose
The purpose of this test case is to verify that the NG-RAN Node Configuration Update procedure, to update application-level configuration data between two NG-RAN nodes, can successfully be completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 4.2.8.1. This test case complements the Xn-only test case (2.4.1.16) addressing the corresponding F1 aspects.
2.3.1.50.2 	Minimum Requirements
DUTs: gNB-CU, and gNB-DU
DUTs shall apply the parameter condition specified in 4.2.8.1of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
gNB or gNB emulator
Protocol Analyzer: used to record and observe F1 and Xn procedural flows and content
2.3.1.50.3 	Initial Conditions
Refer to Section 2.3 and 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and the gNB-DU according to the NR C-Plane profile specification [2]
Xn Setup procedure has been successfully completed between the gNB-CU and gNB or gNB emulator according to the NR C-Plane profile specification [2]
2.3.1.50.4 	Procedure
1.	Perform NG-RAN Node Configuration Update procedure as described in Section 2.4.1.16.4 step 1 to step 4 in the corresponding Xn only test case
2.	Observe the Protocol Analyzer F1 and Xn logs
2.3.1.50.5 	Expected Results and Log Observation
2.3.1.50.5.1 	Expected Results
The F1 gNB-DU Configuration Update procedure, respectively the F1 gNB-CU Configuration Update procedure are successfully completed each time after step 1 – step 4.
The NG-RAN Node Configuration Update procedure on Xn is successfully completed each time after step 1 – step 4.
2.3.1.50.5.2 	Log Observation
F1 and Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.8.1.3 and 4.2.8.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “NG-RAN NODE CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks.
2.3.1.51 	Write-Replace Warning
2.3.1.51.1 	Test Purpose
The purpose of this test case is to verify that the Write-Replace Warning procedure between gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.7.1.
2.3.1.51.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform Write-Replace Warning (System Information and Short Message)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.51.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.51.4 	Procedure
1.	Initiate Write-Replace Warning procedure from Core or Core emulator (5GC capabilities).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Write-Replace Warning by AMF by setting “Warning Area List” IE to broadcast in part of cells of gNB-DU to at least one cell in NGAP: WRITE-REPLACE WARNING REQUEST on Core emulator.
b.	Perform Write-Replace Warning by AMF by not setting “Warning Area List” IE to broadcast in all cells of gNB-DU in NGAP: WRITE-REPLACE WARNING REQUEST on Core emulator.
2.	Observe the Protocol Analyzer F1 link logs.
2.3.1.51.5 	Expected Results and Log Observation
2.3.1.51.5.1 	Expected Results
The Write-Replace Warning procedure is successfully completed.
2.3.1.51.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 4.2.7.1.1/4.2.7.1.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “WRITE-REPLACE WARNING RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.52 	System Information Delivery for NR Stand-Alone
2.3.1.52.1 	Test Purpose
The purpose of this test case is to verify that the System Information Delivery procedure between gNB-CU and gNB-DU from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 6.11.1.
2.3.1.52.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.11.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Protocol Analyzer: used to record and observe F1 procedural flows and content
Test UE or UE emulator capable of supporting NR and NR-DC: used to receive broadcast information
2.3.1.52.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.52.4 	Procedure
1.	Perform the System Information Delivery procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB-CU to change any Other SI (SIB2 – SIB9), eg, SIB Type2: Cell re-selection information common for intra-frequency, inter-frequency and/or inter-RAT cell re-selection. Depending on DUT implementation cell lock/unlock may be required.
2.3.1.52.5	Expected Results and Log Observations
2.3.1.52.5.1	Expected Results
The System Information Delivery procedure is successfully completed.
Other SI messages are mapped to BCCH logical channel and either periodically broadcast on DL-SCH or broadcast on-demand on DL-SCH (ie, upon request from UEs in RRC_IDLE or RRC_INACTIVE) or sent with dedicated RRC messages on DL-SCH to UEs in RRC_CONNECTED.
2.3.1.52.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.11.1.1/6.11.1.2.
2.3.1.53 	S-NG-RAN node initiated SN modification with MN involvement
2.3.1.53.1 	UL Configuration Update
2.3.1.53.1.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.2.6. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update) procedure described in Section 2.4.1.5.3.
2.3.1.53.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.53.1.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.3.1.53.1.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.5.3.4.
2.	Perform UL Configuration Update procedure (SN initiated) as described in step 2 in Section 2.4.1.5.3.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.3.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.3.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.1.5 	Expected Results and Log Observation
2.3.1.53.1.5.1 			Expected Results
The UE Context Modification procedure is successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.1.5.2 			Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.6.3/7.2.2.6.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.53.2 	PSCell change, Intra gNB-DU
2.3.1.53.2.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) procedure with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 7.2.2.4. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) procedure described in Section 2.4.1.5.4.
2.3.1.53.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 7.2.2.4 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
SgNB-DU has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.53.2.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.53.2.4 	Procedure
1.	Perform data transfer in both downlinks directions as described in step 1 in Section 2.4.1.5.4.4
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) as described in step 2 in Section 2.4.1.5.4.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.4.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.4.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.2.5 	Expected Results and Log Observation
2.3.1.53.2.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.2.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.4.3/7.2.2.4.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs.
2.3.1.53.3 	PSCell change, Inter gNB-DU
2.3.1.53.3.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) procedure with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 7.2.2.5. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) procedure described in Section 2.4.1.5.5.
2.3.1.53.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and two SgNB-DUs (Source gNB-DU, Target gNB-DU)):
DUTs shall apply the parameter condition specified in 7.2.2.5 of the NR C-Plane profile specification [2]
The cells of the source and target SgNB-DUs overlap as well as the cell(s) of the MgNB-DU
SgNB has at least 2 Cells configured to Source SgNB-DU and Target SgNB-DU and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.53.3.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.53.3.4 	Procedure
1.	Perform data transfer in both downlinks directions as described in step 1 in Section 2.4.1.5.5.4
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) as described in step 2 in Section 2.4.1.5.5.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.5.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.5.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.3.5 	Expected Results and Log Observation
2.3.1.53.3.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release procedure are successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.3.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.5.3/7.2.2.5.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs.
2.3.1.53.4 	Security Key change
2.3.1.53.4.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure with gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 7.2.2.3. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure described in Section 2.4.1.5.2.
2.3.1.53.4.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.2.3 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.53.4.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.53.4.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.5.2.4.
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change) as described in step 2 in Section 2.4.1.5.2.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.2.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.2.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.4.5 Expected Results and Log Observation
2.3.1.53.4.5.1 Expected Results
The UE Context Modification procedure and UE Context Release procedure are successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.4.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.3.3/7.2.2.3.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“DRB Failed to be Modified List” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in Test UE or UE emulator:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.53.5 	CellGroupConfig change (SN-DU initiated)
2.3.1.53.5.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure with gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 7.2.2.8. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure described in Section 2.4.1.5.7.
2.3.1.53.5.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.2.8 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.53.5.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.53.5.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.5.7.4.
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) as described in step 2 in Section 2.4.1.5.7.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.7.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.7.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.5.5 Expected Results and Log Observation
2.3.1.53.5.5.1 Expected Results
The UE Context Modification procedure is successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.5.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.8.3/7.2.2.8.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.53.6 	Measurement Gap Coordination Procedure (SN initiated)
2.3.1.53.6.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 7.2.2.7. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure described in Section 2.4.1.5.6.
2.3.1.53.6.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 7.2.2.7 of the NR C-Plane profile specification [2]
The coverage of MgNB and SgNB cells overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to trigger the UE measurement transfer procedure using Measurement Report message and perform S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.53.6.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
The Test UE or UE emulator is within the coverage area of the MgNB and of the SgNB cells
The Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed
The S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the application test server and test UE or UE emulator is possible
2.3.1.53.6.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.5.6.4.
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure as described in step 2 in Section 2.4.1.5.6.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.5.6.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.5.6.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.53.6.5 	Expected Results and Log Observation
2.3.1.53.6.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.53.6.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.7.3/7.2.2.7.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.54	Master Node to gNB Change
2.3.1.54.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to gNB Change Procedure leads to a correct interworking between gNB-CU and gNB-DU from different vendors using UE Context Modification and UE Context Release procedure, conforming to the NR C-Plane profile specification [2] Section 7.6.1. This test case is on top of the Xn part of the Master Node to gNB Change Procedure described in Section 2.4.1.12.
2.3.1.54.2 	Minimum Requirements
DUTs: Three gNBs (Each gNB with single gNB-CU and single gNB-DU):
DUTs shall apply the parameter condition specified in 7.6.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (S-MN), SgNB cell (S-SN) and T-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Master Node to gNB Change procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol, and to support Path Switch, Bearer Modification and Secondary RAT Data Usage Report
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and content
2.3.1.54.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for MgNB, SgNB and T-gNB
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.3.1.54.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform the Master Node to gNB Change Procedure as described in step 2 in Section 2.4.1.12.4.
Note: the intention of this step is to perform not only the Xn part of the Master Node to gNB Change Procedure but also trigger to perform the F1 signaling, that is UE Context Modification Procedure and the UE Context Release Procedure with gNB-CU and gNB-DU.
3.	Stop data transfer as described in step 3 in Section 2.4.1.12.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.12.4.
5.	Observe the Protocol Analyzer NG, Xn and F1 logs, and Test UE or UE emulator logs.
2.3.1.54.5 	Expected Results and Log Observation
2.3.1.54.5.1 	Expected Results
The UE Context Setup Procedure, UE Context Modification Procedure and the UE Context Release Procedure over F1 are successfully completed.
The Master Node to gNB Change Procedure over F1 is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.54.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.6.1.3/7.6.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.54.4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB or T-gNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4 in Section 2.3.1.54.4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB or T-gNB is recorded in the F1 logs
2.3.1.55	Inter-Master Node Handover Without SN Change for NR-DC
2.3.1.55.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (Without SN Change) Procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors using F1 UE Context Modification and UE Context Release procedures can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.7.1. This test case is on top of the Xn part of Inter-Master Node Handover (Without SN Change) Procedure as described in Section 2.4.1.14.
2.3.1.55.2 	Minimum Requirements
DUTs:  Three gNB CUs (S-MN-CU, SN-CU and T-MN-CU) and three gNB DUs (S-MN-DU, SN-DU and T-MN-DU):
DUTs shall apply the parameter condition specified in 7.7.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (S-MN) and SgNB cell (SN) overlap
The coverage of T-gNB cell (T-MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Inter-Master Node Handover (Without SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 link procedural flows and content, and NG-U UP contents
2.3.1.55.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for MgNB, SgNB and T-gNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell (S-MN) and SgNB cell (SN)
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB (S-MN) and SgNB (SN) has been successfully completed according to NR C-Plane profile specification
2.3.1.55.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform the Xn part of Inter-Master Node Handover (without SN Change) Procedure as described in step 2 of Section 2.4.1.14.4
3.	Stop data transfer as described in step 3 in Section 2.4.1.14.4
4.	Perform data transfer in both directions as described in step 4 of Section 2.4.1.14.4
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs
2.3.1.55.5 	Expected Results and Log Observation
2.3.1.55.5.1 	Expected Results
The UE Context Setup Procedure, UE Context Modification Procedure and the UE Context Release Procedure over F1 are successfully completed.
The Inter-Master Node Handover (Without SN Change) Procedure over F1 is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.55.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.7.1.3/7.7.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB or T-gNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB or T-gNB is recorded in the F1 logs
2.3.1.56	SN Initiated SN Change for NR-DC
2.3.1.56.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with gNB-CU and gNB-DU from different vendors, triggered with S-NG-RAN initiated Secondary Node Change procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.8.1. This test case is on top of the Xn part of the Secondary Node Change (SN initiated) procedure as described in Section 2.4.1.15.
2.3.1.56.2 	Minimum Requirements
DUTs: Three gNB CUs (MN-CU, S-SN-CU and T-SN-CU) and three gNB DUs (MN-DU, S-SN-DU and T-SN-DU):
DUTs shall apply the parameter condition specified in 7.8.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN), SgNB cell (S-SN) and T-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR-DC: used to perform Secondary Node Change procedure (SN initiated)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 links procedural flows and content, NG-U UP contents
2.3.1.56.3 	Initial Conditions
Refer to Section 2.3 for F1 related the standard list of initial conditions. Besides refer to Section 2.4 for Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CUs and gNB-DUs according to the NR C-Plane profile specification [2] for MgNB, SgNB and T-gNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition procedure between the MN and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source gNB (S-SN) at the start of this procedure
Data transfer between the application test server and Test UE or UE emulator is possible (via NR RATs)
2.3.1.56.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform Secondary Node Change Procedure from Source gNB cell (S-SN) to Target gNB cell (T-SN) as described in step 2 of Section 2.4.1.15.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.15.4.
4.	Perform data transfer in both directions as described in step 4 Section 2.4.1.15.4.
5.	Observe the Protocol Analyzer F1, NG and Xn logs and Test UE or UE emulator logs.
2.3.1.56.5 	Expected Results and Log Observation
2.3.1.56.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.56.5.2 	Log Observation
F1 and Xn logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.8.1.3/7.8.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB or T-gNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB or T-gNB is recorded in the F1 logs
2.3.1.57	MN initiated SN Change
2.3.1.57.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release Procedure with gNB-CU and gNB-DU from different vendors, triggered with M-NG-RAN initiated Secondary Node Change procedure, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.8.2. This test case is on top of the Xn part of the MN initiated SN Change procedure described in Section 2.4.1.18.
2.3.1.57.2 	Minimum Requirements
DUTs: Three gNB-CUs (MN-CU, S-SN-CU, T-SN-CU) and three gNB-DUs (MN-DU, S-SN-DU, T-SN-DU):
DUTs shall apply the parameter condition specified in 7.8.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN), SgNB cell (S-SN) and T-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR-DC: used to perform Secondary Node Change procedure (MN initiated)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 links procedural flows and content, NG-U UP content
2.3.1.57.3 	Initial Conditions
Refer to Section 2.3 for F1 related the standard list of initial conditions. Besides refer to Section 2.4 for Xn related list of initial conditions. The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CUs and gNB-DUs according to the NR C-Plane profile specification [2] for MgNB, SgNB and T-gNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition procedure between the MN and S-SN has been successfully completed according to NR C-Plane profile specification [2]
Secondary Node is Source gNB (S-SN) at the start of this procedure
Data transfer between the application test server and Test UE or UE emulator is possible (via NR RAT’s)
2.3.1.57.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator as described in step 1 of Section 2.4.1.18.4.
2.	Perform Secondary Node Change Procedure from Source gNB cell (S-SN) to Target gNB cell (T-SN) as described in step 2 of Section 2.4.1.18.4.
3.	Stop data transfer as described in step 3 of Section 2.4.1.18.4..
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds as described in step 4 of Section 2.4.1.18.4.
5.	Observe the Protocol Analyzer F1, NG and Xn logs and Test UE or UE emulator logs.
2.3.1.57.5 	Expected Results and Log Observation
2.3.1.57.5.1	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release Procedure are successfully completed.
The Secondary Node Change procedure is successfully completed.
Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.57.5.2	Log Observation
F1 and Xn logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.8.2.3/7.8.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB or T-gNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB or T-gNB is recorded in the F1 logs
2.3.1.58	Full Reconfiguration (SN initiated)
2.3.1.58.1 	Test Purpose
The purpose of this test case is to verify that the Full Reconfiguration procedure (SN initiated) received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 5.6.22.
2.3.1.58.2 Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.22 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator used to perform en-gNB initiated Full Reconfiguration procedure
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Full Reconfiguration procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.58.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.58.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.33.4.
2.	Perform Full Reconfiguration procedure (SN initiated) as described in step 2 in Section 2.2.1.33.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.33.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.33.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.58.5 Expected Results and Log Observation
2.3.1.58.5.1 Expected Results
The UE Context Modification procedure is successfully completed.
The Full Reconfiguration procedure (SN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.58.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.22.3/5.6.22.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.59	Change of QCI (MN initiated)
2.3.1.59.1 	Test Purpose
The purpose of this test case is to verify that the eNB node initiated modify QCI (and/or ARP) of the SN terminated split bearer procedure with eNB and en-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 5.6.23.
This test case is on top of the X2 part of the Change of QCI (MN initiated) procedure described in Section 2.2.1.38.
2.3.1.59.2 	Minimum Requirements
DUTs: Single eNB and single en-gNB.
DUTs shall apply parameter condition specified in 5.6.23 of the NR C-Plane profile specification [2]
The coverage of eNB cell (MN) overlaps with en-gNB cell (SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and EN-DC: used to perform MN initiated Secondary Node Modification
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UE (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and content
2.3.1.59.3 	Initial Conditions
Refer to Section 2.2 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.59.4 	Procedures
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using an E-RAB from an existing LTE bearer
2.	Perform change of QCI (MN initiated) procedure as described in step 2 in Section 2.2.1.38.4
3.	Stop data transfer as described in step 3 in Section 2.2.1.38.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.384
5.	Observe the Protocol Analyzer F1 and Test UE or UE emulator logs
2.3.1.59.5 	Expected Results and Log Observation
2.3.1.59.5.1 Expected Results
The change of QCI procedure (MN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.59.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.23.3/5.6.23.4.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the U-Plane data transmission.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “SGNB MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the C-Plane:
o	Check that step 2 QCI in the IE “E-UTRAN QoS” in the IE “DRB To Be Modified List” included in the message “UE CONTEXT MODIFICATION REQUEST” performs correctly
Regarding the downlink U-Plane data generated in step1, after step 2 and in step 4:
o	Check that the data is flowing using the new QCI in step 4
Regarding the uplink U-Plane data generated in step1, after step 2 and in step 4:
o	Check that the data is flowing using the new QCI in step 4
2.3.1.60	Security Key change (MN initiated) for EN-DC
2.3.1.60.1 	Test Purpose
The purpose of this test case is to verify that the Security Key change procedure (MN initiated) for EN-DC received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 5.6.5.
2.3.1.60.2 Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.5 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator used to perform Security Key change (MN initiated) procedure
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform Security Key change procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.60.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.60.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.18.4.
2.	Perform Security Key change procedure (MN initiated) as described in step 2 in Section 2.2.1.18.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.18.4.
4.	Perform data transfer in both directions as describe in step 4 in Section 2.2.1.18.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.60.5 Expected Results and Log Observation
2.3.1.60.5.1 Expected Results
The UE Context Modification procedure is successfully completed.
The Security Key change procedure (MN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.60.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.5.3/5.6.5.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in UE:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification.
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.61	UL Configuration Update Procedure (SN initiated)
2.3.1.61.1 	Test Purpose
The purpose of this test case is to verify that the UL Configuration Update procedure (SN initiated) received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 5.6.9.
2.3.1.61.2 Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.9 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator used to perform en-gNB initiated UL Configuration Update procedure
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform UL Configuration Update procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.61.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 Setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.61.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.22.4.
2.	Perform UL Configuration Update procedure (SN initiated) as described in step 2 in Section 2.2.1.22.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.22.4.
4.	Perform data transfer in both directions as describe in step 4 in Section 2.2.1.22.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.61.5 Expected Results and Log Observation
2.3.1.61.5.1 Expected Results
The UE Context Modification procedure is successfully completed.
The UL Configuration Update procedure (SN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.61.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.9.3/5.6.9.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.62	Void
2.3.1.63	RRC connection re-establishment (inter gNB-CU)
2.3.1.63.1 	Test Purpose
The purpose of this test case is to verify that the RRC connection re-establishment procedure between gNB-CU and gNB-DU from different vendors, can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 6.10.4. This test case is on top of the Xn part of the RRC connection re-establishment (inter gNB-CU) procedure described in Section 2.4.1.19.
2.3.1.63.2 	Minimum Requirements
DUTs: Two gNBs, each with a single gNB-CU and single gNB-DU. A Target gNB (TgNB-CU and TgNB-DU) and Source gNB (SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 6.10.4 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform RRC connection re-establishment
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 link procedural flows and content, as well as NG-U UP content
2.3.1.63.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions and to Section 2.4 the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the TgNB and SgNB according to the NR C-Plane profile specification [2]
The F1 Setup procedure has been successfully completed between the TgNB-CU and TgNB-DU as well as between SgNB-CU and SgNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of SgNB-DU cell
Data transfer between the application test server and Test UE or UE emulator is possible
2.3.1.63.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform the RRC connection re-establishment procedure as described in step 2 and 3 in Section 2.4.1.19.4.
Note: the intention of this step is to perform not only the Xn part of the RRC connection re-establishment Procedure but also trigger to perform the F1 signaling, that is UE UL/DL RRC Message Transfer procedure, UE Context Setup Procedure and UE Context Modification Procedure between SgNB-CU and SgNB-DU and between TgNB-CU and TgNB-DU.
3.	Stop data transfer between the Application Test Server and Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
5.	Observe the Protocol Analyzer NG, Xn  and F1 logs and Test UE or UE emulator logs
2.3.1.63.5 	Expected Results and Log Observation
2.3.1.63.5.1 	Expected Results
The UE UL/DL RRC Message Transfer procedure, UE Context Setup Procedure and UE Context Modification Procedure over F1 are successfully completed.
The RRC connection re-establishment procedure over F1 is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.63.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.10.4.3 and 6.10.4.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data recorded in the NG and F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.64	gNB-CU initiated UE Context Modification (UE AMBR (for UL) modification)
2.3.1.64.1 	Test Purpose
The purpose of this test case is to verify that the gNB-CU initiated UE Context Modification (UE AMBR (for UL) modification) procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.1.7.
2.3.1.64.2 Minimum Requirements
DUTs: single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in Section 6.3.1.7 of the NR C-Plane profile specification [2].
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform UE Context Modification procedure for UE AMBR (for UL) modification.
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side.
Protocol Analyzer: used to record and observe F1 procedural flows and contents.
2.3.1.64.3 Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 setup procedure has been successfully completed between gNB-CU and gNB-DU according to the NR C-Plane profile specification [2].
Test UE or UE emulator has registered to the network, ie, the registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed.
Test UE or UE emulator is within the coverage area of the PCell.
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a DRBs is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.3.1.64.4 Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform the gNB-CU initiated UE context modification procedure for UE AMBR (for UL) modification.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Trigger from Core or Core emulator (5GC capabilities) to send a new UE AMBR for UL for this Test UE or UE emulator.
3.	Stop the data transfer in both directions between Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified. For example, in this test case the UE UL transmission rate should be less than or equal to UE AMBR given by AMF.
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.1.64.5 Expected Results and Log Observation
2.3.1.64.5.1 Expected Results
The F1 UE Context Modification Procedure for UE AMBR (for UL) modification is performed successfully.
Data transfer is possible using the new UE AMBR in UL.
The uplink data transmitted by UE is limited by the UE AMBR given by AMF.
2.3.1.64.5.2 Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.1.7/6.3.1.7.1.
If any of the following listed IEs is observed in F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.65	Inter gNB Handover for SA
2.3.1.65.1 	Test Purpose
The purpose of this test case is to verify that the Inter gNB Handover for SA procedure received by gNB-CU leads to correct interworking between gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 6.4.1.
2.3.1.65.2 Minimum Requirements
DUTs: Two gNBs (Each gNB with Single gNB-CU and single gNB-DU):
DUTs shall apply the parameter condition specified in 6.4.1 of the NR C-Plane profile specification [2]
The coverage of SgNB cell and TgNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform Inter gNB Handover procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.65.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the SgNB and TgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both SgNB and TgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.65.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.2.4.
2.	Perform Inter gNB Handover procedure as described in step 2 in Section 2.4.1.2.4.
3.	Stop data transfer as described in step 3 in Section 2.4.1.2.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.2.4.
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.65.5 Expected Results and Log Observation
2.3.1.65.5.1 Expected Results
The UE Context Modification, UE Context Setup, and UE Context Release procedure is successfully completed.
The Inter gNB Handover procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.65.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.4.1.3/6.4.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via SgNB or TgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via SgNB or TgNB is recorded in the F1 logs
2.3.1.66	S-NG-RAN node Initiated SN modification without MN involvement
2.3.1.66.1 	SRB3 supported
2.3.1.66.1.1	Intra gNB-DU PSCell Change using SRB3
2.3.1.66.1.1.1	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.3.2.1. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) procedure described in Section 2.4.1.6.2.1.
2.3.1.66.1.1.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.3 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cells overlap.
SgNB has at least 2 Cells configured and in operation.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side.
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content.
2.3.1.66.1.1.3 Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB.
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed.
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell.
Data transfer between the Application Test Server and Test UE or UE emulator is possible.
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification.
2.3.1.66.1.1.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.6.2.1.4
2.	Perform the Intra gNB-DU PSCell Change using SRB3 procedure as described in step 2 in Section 2.4.1.6.2.1.4.
3.	Stop the data transfer between the Application Test server and Test UE or UE emulator.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.6.2.1.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.66.1.1.5	 Expected Results and Log Observation
2.3.1.66.1.1.5.1	 Expected Results
The UE Context Modification procedure is successfully completed.
The S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.66.1.1.5.2	 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.2.1.3/7.2.3.2.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs.
2.3.1.66.1.2 	Inter gNB-DU PSCell Change using SRB3
2.3.1.66.1.2.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)) procedure with gNB-CU and gNB-DU from different vendors using F1 UE Context Setup and UE Context Modification procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.3.2.2. This test case is on top of the Xn part of the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)) procedure described in Section 2.4.1.6.2.2.
2.3.1.66.1.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN), (SgNB-CU, Source SgNB-DU and Target SgNB-DU – SN):
DUTs shall apply the parameter condition specified in 7.2.3/7.2.3.2 of the NR C-Plane profile specification [2]
SgNB has at least 2 Cells configured to Source SgNB-DU and Target SgNB-DU and in operation
The cells of the source and target SgNB-DUs overlap as well as the cell(s) of the MgNB-DU
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 procedural flows and content
2.3.1.66.1.2.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.3.1.66.1.2.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.6.2.2.4
2.	Perform the Inter gNB-DU PSCell Change using SRB3 procedure as described in step 2 in Section 2.4.1.6.2.2.4
3.	Stop the data transfer between the Application Test server and Test UE or UE emulator
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.6.2.2.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs
2.3.1.66.1.2.5 	Expected Results and Log Observation
2.3.1.66.1.2.5.1 	Expected Results
The F1 UE Context Setup, UE Context Modification and UE Context Release procedure are successfully completed.
The S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)) procedure is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.66.1.2.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.2.2.3/7.2.3.2.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.67 	M-NG-RAN node initiated S-NG-RAN Node Release without keeping UE
2.3.1.67.1 Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 7.3.1. This test case is on top of the Xn part of the M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure described in Section 2.4.1.7.
2.3.1.67.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 7.3.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.67.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.67.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.7.4.
2.	Perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE as described in step 2 in Section 2.4.1.7.4.
3.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.67.5 Expected Results and Log Observation
2.3.1.67.5.1 Expected Results
The UE Context Modification procedure and UE Context Release procedure are successfully completed.
The M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.67.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.1.3/7.3.1.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.68 	M-NG-RAN node initiated S-NG-RAN Node Release with keeping UE
2.3.1.68.1 Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 7.3.2. This test case is on top of the Xn part of the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure described in Section 2.4.1.8.
2.3.1.68.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 7.3.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.68.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.68.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.4.1.8.4.
2.	Perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE as described in step 2 in Section 2.4.1.8.4.
3.	Stop the data transfer between the Application Test server and Test UE or UE emulator.
4.	Perform data transfer in both directions as described in step 4 in Section 2.4.1.8.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.68.5 Expected Results and Log Observation
2.3.1.68.5.1 Expected Results
The UE Context Modification procedure and UE Context Release procedure are successfully completed.
The M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.68.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.2.3/7.3.2.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.69 	S-NG-RAN node initiated S-NG-RAN Node Release
2.3.1.69.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated S-NG-RAN node Release procedure with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 7.3.3. This test case is on top of the Xn part of the S-NG-RAN node initiated S-NG-RAN node Release procedure described in Section 2.4.1.9.
2.3.1.69.2 Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU, SgNB-CU and SgNB-DU):
DUTs shall apply the parameter condition specified in 7.3.3 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated S-NG-RAN node Release
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.3.1.69.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.3.1.69.4 Procedure
There are two options for this procedure, as shown in Figure 7.3.3.1-1 in the NR C-Plane profile specification [2].
OPT 1 (with keeping UE case) is below:
1.	Perform data transfer in both directions as described in step 1 of OPT 1 in Section 2.4.1.9.4.
2.	Perform S-NG-RAN node initiated S-NG-RAN node Release as described in step 2 of OPT 1 in Section 2.4.1.9.4.
3.	Stop the data transfer between the Application Test server and Test UE or UE emulator.
4.	Perform data transfer in both directions as described in step 4 of OPT 1 in Section 2.4.1.9.4
5.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
OPT 2 (without keeping UE case) is below:
1.	Perform data transfer in both directions as described in step 1 of OPT 2 in Section 2.4.1.9.4.
2.	Perform S-NG-RAN node initiated S-NG-RAN node Release as described in step 2 of OPT 2 in Section 2.4.1.9.4.
3.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.69.5 Expected Results and Log Observation
2.3.1.69.5.1 Expected Results
The UE Context Modification procedure and UE Context Release procedure are successfully completed.
The S-NG-RAN node initiated S-NG-RAN node Release procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.69.5.2 Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.3.3/7.3.3.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
OPT 1 (with keeping UE case) is below:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1 and after 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
OPT 2 (without keeping UE case) is below:
Regarding the downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via MgNB or SgNB.
Regarding the uplink U-Plane data generated in step 1:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the F1 logs
2.3.1.70 	PDU Session Establishment
2.3.1.70.1 	Test Purpose
The purpose of this test case is to verify that the establishment of an additional PDU Session using the F1 UE Context Modification procedure can be performed successfully between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] Section 6.3.3.1
2.3.1.70.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.3.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to perform an additional PDU Session Establishment procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.70.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a PDU Session with at least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.70.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate UE Context Modification procedure for DRB setup by establishment of an additional PDU session
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Add another PDU Session with at least one DRB by requesting another service, eg, Video streaming, resulting in a PDU Session Resource Setup
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.70.5 	Expected Results and Log Observation
2.3.1.70.5.1 	Expected Results
The PDU Session Establishment procedure is completed successfully.
The F1 UE Context Modification procedure for DRB setup to UE is performed successfully, and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible using the newly established DRB.
2.3.1.70.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Section 6.3.3.1.1/6.3.3.1.2.
If any of the following listed IEs is observed in the F1 log
“DRB Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.71 	RRC Inactive to RRC Connected, Inter gNB-CU
2.3.1.71.1 	Test Purpose
The purpose of this test case is to verify that the state change procedure from RRC inactive to RRC connected between two pairs of gNB-CUs and gNB-DUs from different vendors, can be successfully completed, performed with the UE Context Setup procedure and with the UE Context Modification procedure, conforming to the NR C-Plane profile specification [2] Section 6.9.3. This TC expands the TC specified in 2.4.1.20 with the F1 interface conformance.
2.3.1.71.2 	Minimum Requirements
DUTs: A Receiving gNB and a Last Serving gNB, each with a single gNB-CU and a gNB-DU from different vendors:
DUTs shall apply the parameter condition specified in 6.9.3 of the NR C-Plane profile specification [2]
The coverages of the two gNBs cells overlap each other.
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to trigger the RRC state transition procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe both F1 and Xn procedural flows and content
2.3.1.71.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU of both the Receiving gNB and the Last Serving gNB, according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Data transfer in the uplink and downlink direction towards/ and from the Test UE or UE emulator is omitted for a period of time. The UE or UE emulator is in RRC inactive state.
The UE or UE emulator is moved from the cell of the Last Serving gNB to the cell of the Receiving gNB. That can be done eg, by increasing the attenuation of the Last Serving gNB cell and by lowering the attenuation of the Receiving gNB cell.
2.3.1.71.4 	Procedure
1.	Perform RRC state change procedure as specified in section 2.4.1.20
2.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
3.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds before the RRC connection times out.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the RRC connection was established
4.	Observe the Protocol Analyzer F1 and Xn logs and Test UE or UE emulator logs
2.3.1.71.5 	Expected Results and Log Observation
2.3.1.71.5.1 	Expected Results
The RRC Inactive to RRC Connected state change procedure with the UE Context Modification and the UE Context Setup procedures between gNB-CUs and gNB-DUs of the Receiving gNB and of the Last Serving gNB, respectively, are completed successfully. Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.3.1.71.5.2 	Log Observation
F1 and Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.9.3.3/6.9.3.4.
If any of the following listed IEs is observed in the F1 log
“SRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“DRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“SCell failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”,
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”,
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and step 3:
o	All U-Plane data which is recorded in the F1 logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and step 3:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the F1 logs
2.3.1.72 	Measurement ID Coordination (MN initiated)
2.3.1.72.1 	Test Purpose
The purpose of this test case is to verify that the Measurement ID Coordination (MN initiated) using the F1 UE Context Modification procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 5.6.24. This test case is on top of the X2 part of the Measurement ID Coordination (MN initiated) procedure as described in section 2.2.1.39.
2.3.1.72.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.24 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform Measurement ID Coordination (MN initiated) procedure
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement ID Coordination procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.72.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.72.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.39.4.
2.	Perform Measurement ID Coordination procedure (MN initiated) as described in step 2 in Section 2.2.1.39.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.39.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.39.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.72.5 	Expected Results and Log observation
2.3.1.72.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The Measurement ID Coordination procedure (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.72.5.2 	Log observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.24.3/5.6.24.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.73 	New QoS Flow with Explicit NAS Signalling
2.3.1.73.1 	Test Purpose
The purpose of this test case is to verify that the addition of new QoS flow with explicit NAS signalling using the F1 UE Context Modification procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 6.3.3.2.
2.3.1.73.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.3.2 of NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform the addition of new QoS flow with explicit NAS signalling procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both F1 procedural flows and content
2.3.1.73.3 	Initial Conditions
Refer to Section 2.3 for F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, a DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.73.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Initiate UE Context Modification procedure for establishing a new DRB to add a new QoS flow
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Add another DRB to UE to add a new QoS flow by requesting another service, eg, Video streaming, resulting in a PDU Session Resource Modification
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.73.5 	Expected Results and Log Observation
2.3.1.73.5.1 	Expected Results
The addition of new QoS flow with explicit NAS signalling procedure is completed successfully.
The F1 UE Context Modification procedure for DRB setup to UE is performed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible using the newly established DRB.
2.3.1.73.5.2 	Log observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.3.3.2.1/6.3.3.2.2.
If any of the following listed IEs is observed in the F1 logs:
“DRB Failed To Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 (through existing DRBs) and after step 2 and in step 4 (through existing and new DRBs):
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.74 	PCell change (Intra MN) (MN initiated)
2.3.1.74.1 	Test Purpose
The purpose of this test case is to verify that the PCell change (Intra MN) (MN initiated) procedure with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 5.6.1. This test case is on top of the X2 part of the PCell change (Intra MN) (MN initiated) procedure described in Section 2.2.1.14.
2.3.1.74.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.1 of the NR C-Plane profile specification [2]
eNB has at least 2 Cells configured and in operation
The coverage of Intra-eNB source cell and en-gNB cell overlap
The coverage of Intra-eNB target cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform PCell change (Intra MN) (MN initiated) procedure
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform PCell change (Intra MN) (MN initiated) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.74.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.74.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.14.4.
2.	Perform PCell change (Intra MN) (MN initiated) procedure as described in step 2 in Section 2.2.1.14.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.14.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.14.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.74.5 	Expected Results and Log Observation
2.3.1.74.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The PCell change (Intra MN) (MN initiated) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.74.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.1.3/5.6.1.4.
If any of the following listed IEs is observed in the F1 logs:
“DRB Failed to be Modified List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.75 	DRB ID change/Security Key change (SN initiated)
2.3.1.75.1 	Test Purpose
The purpose of this test case is to verify that the SN (en-gNB) initiated DRB ID change/Security Key change  procedure  with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 5.6.21. This test case is on top of the X2 part of the SN (en-gNB) initiated DRB ID change procedure described in Section 2.2.1.40.
2.3.1.75.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.21 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform SN (en-gNB) initiated DRB ID change/Security Key change procedure
Test UE or UE emulator which is capable of supporting for both LTE and NR: used to perform SN (en-gNB) initiated DRB ID change/Security Key change procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc.) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.75.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.75.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.40.4.
2.	Perform SN initiated DRB ID change/Security Key change procedure as described in step 2 in Section 2.2.1.40.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.40.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.40.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.75.5 	Expected Results and Log Observation
2.3.1.75.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The SN initiated DRB ID change/Security Key change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.75.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.21.3/5.6.21.4.
If any of the following listed IEs is observed in the F1 logs:
“DRB Failed to be Setup List” in “UE CONTEXT MODIFICATION RESPONSE”
“DRB Failed to be Modified List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.76 	Measurement ID Coordination (SN initiated)
2.3.1.76.1 	Test Purpose
The purpose of this test case is to verify that the Measurement ID Coordination (SN initiated) using the F1 UE Context Modification procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 5.6.25. This test case is on top of the X2 part of the Measurement ID Coordination (SN initiated) procedure as described in section 2.2.1.41.
2.3.1.76.2 	Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.25 of NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform Measurement ID Coordination (SN initiated) procedure
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement ID Coordination procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.76.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and service request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.76.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.41.4.
2.	Perform Measurement ID Coordination procedure (SN initiated) as described in step 2 in Section 2.2.1.41.4.
3.	Stop data transfer as described in step 3 in Section 2.2.1.41.4.
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.41.4.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.1.76.5 	Expected Results and Log observation
2.3.1.76.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The Measurement ID Coordination procedure (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.76.5.2 	Log observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.25.3/5.6.25.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.77 	Release of QoS Flow with Explicit Signalling
2.3.1.77.1 	Test Purpose
The purpose of this test case is to verify that the release of QoS flow with explicit signalling using the F1 UE Context Modification procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 6.3.3.3.
2.3.1.77.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.3.3.3 of NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform the release of QoS flow with explicit signalling procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both F1 procedural flows and content
2.3.1.77.3 	Initial Conditions
Refer to Section 2.3 for F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
Test UE or UE emulator is within the coverage area of the PCell
The service request procedure, as specified in NR C-Plane profile specification [2] Section 6.1.1, is successfully performed, at least two DRBs with one QoS flow each are established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible
2.3.1.77.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate UE Context Modification procedure for releasing an existing DRB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Remove one of at least two established DRBs from UE to release an existing QoS flow, by releasing one service, eg, Video streaming, resulting in a PDU Session Resource Modification.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs
2.3.1.77.5 	Expected Results and Log Observation
2.3.1.77.5.1 	Expected Results
The release of QoS flow with explicit signalling procedure is completed successfully.
The F1 UE Context Modification procedure for DRB release to UE is performed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible using the remaining DRB.
2.3.1.77.5.2 	Log observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.3.3.3.1/6.3.3.3.2.
If any of the following listed IEs is observed in the F1 logs:
“DRB Failed to be Modified List” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.78 	PDU session establishment after signalling-only connection
2.3.1.78.1 	Test Purpose
The purpose of this test case is to verify that the PDU session establishment after signalling-only connection using the F1 UE Context Setup and UE Context Modification procedure can be successfully completed between gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 6.12.
2.3.1.78.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.12 of NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform the PDU session establishment after signalling-only connection procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both F1 procedural flows and content
2.3.1.78.3 	Initial Conditions
Refer to Section 2.3 for F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.2 has been successfully completed
2.3.1.78.4 	Procedure
1.	Initiate PDU session establishment procedure from UE or UE emulator.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Perform UL activity from UE side by streaming video, browsing internet, etc.
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was created.
3.	Observe the Protocol Analyzer F1 logs.
2.3.1.78.5 	Expected Results and Log Observation
2.3.1.78.5.1 	Expected Results
The F1 procedure as specified in the NR C-Plane profile specification [2] Section 6.12.1 to create a PDU session after signalling-only connection is successfully completed.
2.3.1.78.5.2 	Log observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.12.1/6.12.2.
If any of the following listed IEs is observed in the F1 logs:
“SRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“DRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 2:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.3.1.79 	Inter-Master Node Handover with SN Change for NR-DC
2.3.1.79.1 	Test Purpose
The purpose of this test case is to verify that the F1 UE Context Setup, UE Context Modification and UE Context Release procedures with gNB-CU and gNB-DU from different vendors, triggered with an Inter-Master Node Handover (with SN Change) procedure can be successfully completed, conforming to the NR C-Plane profile specification [2] section 7.7.2. This test case is on top of the Xn part of Inter-Master Node Handover (with SN Change) procedure as described in section 2.4.1.23.
2.3.1.79.2 	Minimum Requirements
DUTs:  Four gNB CUs (S-MN-CU, S-SN-CU, T-SN-CU and T-MN-CU) and Four gNB DUs (S-MN-DU, S-SN-DU, T-SN-DU and T-MN-DU):
DUTs shall apply the parameter condition specified in 7.7.2 of the NR C-Plane profile specification [2]
The coverage of Source Master gNB cell (S-MN) overlaps with Target Master gNB cell (T-MN) and Source Secondary gNB cell (S-SN)
The coverage of Target Master gNB cell (T-MN) overlaps with Target Secondary gNB cell (T-SN)
The coverage of Source Secondary gNB cell (S-SN) do not overlap with Target Secondary gNB cell (T-SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Inter-Master Node Handover (with SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn and F1 link procedural flows and content, and NG-U UP contents
2.3.1.79.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the S-MN, T-MN, S-SN and T-SN according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for S-MN, T-MN, S-SN and T-SN
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source Master gNB cell (S-MN) and Source Secondary gNB cell (S-SN)
Data transfer between the application test server and Test UE or UE emulator is possible
F1 UE Context Setup procedure between S-SN-CU and S-SN-DU, triggered with Secondary Node Addition procedure between the S-MN and S-SN has been successfully completed according to NR C-Plane profile specification [2]
2.3.1.79.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Perform the Xn part of Inter-Master Node Handover (with SN Change) procedure as described in step 2 of Section 2.4.1.23.4.
Note: the intention of this step is to perform not only the Xn part of the Inter-Master Node Handover (with SN change) procedure but also trigger to perform the F1 signaling, that is UE Context Setup, UE Context Modification and UE Context Release procedures with gNB-CUs and gNB-DUs.
3.	Stop data transfer as described in step 3 in Section 2.4.1.23.4.
4.	Perform data transfer in both directions as described in step 4 of Section 2.4.1.23.4.
5.	Observe the Protocol Analyzer NG, Xn and F1 logs and Test UE or UE emulator logs.
2.3.1.79.5 	Expected Results and Log Observation
2.3.1.79.5.1 	Expected Results
The UE Context Setup procedure, UE Context Modification procedure and the UE Context Release procedure over F1 are successfully completed.
The Inter-Master Node Handover (with SN Change) procedure over F1 is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.79.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.7.2.3/7.7.2.4.
If any of the following listed IEs is observed in the F1 logs:
“SRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“DRB failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“SCell failed to setup list” in “UE CONTEXT SETUP RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT SETUP RESPONSE”,
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via S-MN or T-MN or S-SN or T-SN
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via S-MN or T-MN or S-SN or T-SN  is recorded in the F1 logs
2.3.1.80 	gNB-DU initiated UE Context Modification (DRB to be modified)
2.3.1.80.1 	Test Purpose
The purpose of this test case is to verify that the gNB-DU initiated UE Context Modification procedure to modify DRB for a UE can be performed successfully between gNB-DU and gNB-CU from different vendors, conforming to the NR C-Plane profile specification [2] section 6.3.2.2.
2.3.1.80.2 	Minimum Requirements
DUTs: Single gNB-DU and single gNB-CU, PCell and SCell(s) are available and configured for PDCP Carrier Aggregation duplication:
DUTs shall apply the parameter condition specified in 6.3.2.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of PDCP Carrier Aggregation duplication: used to perform UE Context Modification procedure for DRB modification
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.80.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Test UE or UE emulator is within the coverage area of the PCell and SCell
2.3.1.80.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
2.	Initiate gNB-DU initiated UE Context Modification procedure for DRB modification
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator,  PCell and SCell. In this specific case, the PCell and SCell can start off with low attenuation applied which is subsequently increased to a level which can trigger the PDCP CA duplication procedure with the PCell and SCell.
3.	Stop the data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the UE context was modified.
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.1.80.5 	Expected Results and Log Observation
2.3.1.80.5.1 	Expected Results
The F1 gNB-DU initiated UE Context Modification procedure for DRB modification to UE is performed successfully.
2.3.1.80.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.3.2.2/6.3.2.2.1.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION CONFIRM”
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs.
2.3.1.81 	Addition of SN terminated split bearer (MN initiated)
2.3.1.81.1 Test Purpose
The purpose of this test case is to verify that the Addition of SN terminated split bearer (MN initiated) procedure with gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 5.6.10. This test case is on top of the X2 part of the Addition of SN terminated split bearer (MN initiated) procedure described in Section 2.2.1.23.
2.3.1.81.2 Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.10 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
eNB or eNB emulator: used to perform Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.81.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.81.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.23.4
2.	Perform Secondary Node Modification with addition of SN terminated split bearer procedure (MN initiated) as described in step 2 in Section 2.2.1.23.4
3.	Stop data transfer as described in step 3 in Section 2.2.1.23.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.23.4
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.1.81.5 Expected Results and Log Observation
2.3.1.81.5.1 Expected Results
The UE Context Modification procedures are successfully completed.
The Secondary Node Modification procedure (MN initiated) with addition of SN terminated split bearer procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.81.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.10.3/5.6.10.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.82 	Removal of SN terminated split bearer (MN initiated)
2.3.1.82.1 Test Purpose
The purpose of this test case is to verify that the Removal of SN terminated split bearer (MN initiated) procedure with gNB-CU and gNB-DU from different vendors, confirming to the NR C-Plane profile specification [2] Section 5.6.11. This test case is on top of the X2 part of the Addition of SN terminated split bearer (MN initiated) procedure described in Section 2.2.1.24.
2.3.1.82.2 Minimum Requirements
DUTs: Single en-gNB-CU and single en-gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.11 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Secondary Node Addition procedure and Secondary Node Modification procedure (MN initiated)
eNB or eNB emulator: used to perform Secondary Node Modification procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents and S1-U UP contents
2.3.1.82.3 Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB (MN) and en-gNB (SN) according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure, which including at least two SN terminated split bearers between the eNB and en-gNB, has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
2.3.1.82.4 Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.24.4
2.	Perform Secondary Node Modification with removal of SN terminated split bearer procedure (MN initiated) as described in step 2 in Section 2.2.1.24.4
3.	Stop data transfer as described in step 3 in Section 2.2.1.24.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.24.4
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.1.82.5 Expected Results and Log Observation
2.3.1.82.5.1 Expected Results
The UE Context Modification procedures are successfully completed.
The Secondary Node Modification procedure (MN initiated) with removal of SN terminated split bearer procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.82.5.2 Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.11.3/5.6.11.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.83 	Registration update without Follow-on request
2.3.1.83.1 	Test Purpose
The purpose of this test case is to verify that the UE Registration Update without Follow-on procedure can be performed successfully with gNB-CU and gNB-DU from different vendors, conforming to the NR C-Plane profile specification [2] section 6.1.3.2
2.3.1.83.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 6.1.3.2 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe F1 procedural flows and content
2.3.1.83.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
The F1 Setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Initial Registration procedure specified in NR C-Plane profile specification [2] Section 6.1.3.2 has been successfully completed
2.3.1.83.4 	Procedure
1.	Initiate Registration update without Follow-on request Initial Registration Request procedure from UE or UE emulator
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification
a.	Let the registration timer in the UE (emulator) expire with no user plane traffic activity, to test the Registration Update without Follow-on procedure
2.	Observe the Protocol Analyzer F1 logs
2.3.1.83.5 	Expected Results and Log Observation
2.3.1.83.5.1 	Expected Results
The F1 procedure as specified in the NR C-Plane profile specification [2] Section 6.1.32.2.1 is successfully completed.
2.3.1.83.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 6.1.3.2.1/6.1.3.2.2.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT RELEASE COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
2.3.1.84 	Measurement Gap Coordination Procedure (MN initiated)
2.3.1.84.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination procedure (MN initiated) with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 5.6.6. This test case is on top of the X2 part of the Measurement Gap Coordination procedure (MN initiated) described in Section 2.2.1.19.
2.3.1.84.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.6 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform Measurement Gap Coordination procedure (MN initiated)
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination procedure (MN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.84.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.84.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.19.4
2.	Perform Measurement Gap Coordination procedure (MN initiated) as described in step 2 in Section 2.2.1.19.4
3.	Stop data transfer as described in step 3 in Section 2.2.1.19.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.19.4
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.1.84.5 	Expected Results and Log Observation
2.3.1.84.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The Measurement Gap Coordination procedure (MN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.84.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.6.3/5.6.6.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.1.85 	Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
2.3.1.85.1 	Test Purpose
The purpose of this test case is to verify that the Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) with gNB-CU and gNB-DU from different vendors by applying the UE Context Modification procedure on the F1 interface is conforming to the NR C-plane profile specification [2] section 5.6.7. This test case is on top of the X2 part of the Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) described in Section 2.2.1.20.
2.3.1.85.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply the parameter condition specified in 5.6.7 of the NR C-Plane profile specification [2]
The coverage of eNB cell and en-gNB cell overlap
Testing tools which are required for this test scenario:
eNB or eNB emulator: used to perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
Test UE or UE emulator which is capable of supporting both LTE and NR: used to perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated)
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both X2 and F1 procedural flows and content
2.3.1.85.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the Application Test Server and Test UE or UE emulator is possible (via the LTE and NR RATs)
2.3.1.85.4 	Procedure
1.	Perform data transfer in both directions as described in step 1 in Section 2.2.1.20.4
2.	Perform Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) as described in step 2 in Section 2.2.1.20.4
3.	Stop data transfer as described in step 3 in Section 2.2.1.20.4
4.	Perform data transfer in both directions as described in step 4 in Section 2.2.1.20.4
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.1.85.5 	Expected Results and Log Observation
2.3.1.85.5.1 	Expected Results
The UE Context Modification procedure is successfully completed.
The Measurement Gap Coordination for per FR1 or per UE gap Procedure (SN initiated) is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.3.1.85.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 5.6.7.3/5.6.7.4.
If any of the following listed IEs is observed in the F1 logs:
“Criticality Diagnostics” in “UE CONTEXT MODIFICATION RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
F1 logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the F1 logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the F1 logs
2.3.2 	F1 U-Plane IOT Test Cases
2.3.2.1 	Node behaviour of the corresponding node for EN-DC with RLC-AM and/or RLC-UM
2.3.2.1.1 	Test Purpose
The purpose of this test case is to verify that the behaviour of the corresponding node procedure for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
Note: The test cases for the behaviour of the corresponding node sending DDDS when events lost packet detection and stop scheduling for the data bearer occur are included in the chapter 2.3.2.7.
2.3.2.1.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.1.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the MN (eNB) cell and SN (en-gNB) cell
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been successfully completed
Secondary Node Addition (Option 3x) procedure between the eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
Data transmission has not been performed via the NR RAT, eg, keeping Option 3x with NR radio quality low enough
Note: This test case is used to verify that the eNB does not discard any of its buffered packets in events such as Radio Link Outage over the LTE RAT unless it receives discard indication from the higher layers or from the en-gNB hosting NR PDCP, such as the buffer discard indication from the en-gNB. This initial condition ensures that en-gNB does not send the buffer discard indication to the eNB.
2.3.2.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to gNB-DU vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Trigger radio link outage on the gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the gNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the gNB cell. In this specific case, the gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
3.	Trigger radio link resume on the gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
4.	Stop data transfer from the Application Test Server to the Test UE or UE emulator.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.2.1.5 	Expected Results and Log Observation
2.3.2.1.5.1 	Expected Results
The behaviour of gNB-DU is aligned with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.3.2.1.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
gNB-DU sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to gNB-CU after step 2
gNB-DU sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to gNB-CU after step 3
Note: these are to confirm if the Radio Link Outage operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from gNB-DU in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from gNB-DU before triggering Radio Link Outage in step 1
2.3.2.2 	Node behaviour of the corresponding node for SA with RLC-AM and/or RLC-UM
2.3.2.2.1 	Test Purpose
The purpose of this test case is to verify that the behaviour of the corresponding node procedure for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
Note: The test cases for the behaviour of the corresponding node sending DDDS when events lost packet detection and stop scheduling for the data bearer occur are included in the chapter 2.3.2.8.
2.3.2.2.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.2.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.2.4 	Procedure
1.	Perform data transfer in both directions the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to gNB-DU vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Trigger radio link outage on the gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
3.	Trigger radio link resume on the gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the eNB cell. In this specific case, the eNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
4.	Stop data transfer from the Application Test Server to the Test UE or UE emulator.
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.2.5 	Expected Results and Log Observation
2.3.2.1.5.1 	Expected Results
The behaviour of gNB-DU is aligned with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.3.2.2.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
gNB-DU sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to gNB-CU after step 2
gNB-DU sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to gNB-DU after step 3
Note: these are to confirm if the Radio Link Outage operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from gNB-DU in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from gNB-DU before triggering Radio Link Outage in step 1
2.3.2.3 	Node behaviour of the corresponding node for NR-DC with RLC-AM and/or RLC-UM
2.3.2.3.1 	Test Purpose
The purpose of this test case is to verify that the behaviour of the corresponding node procedure for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
Note: The test cases for the behaviour of the corresponding node sending DDDS when events lost packet detection and stop scheduling for the data bearer occur are included in the chapter 2.3.2.9.
2.3.2.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.3.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transmission has not been performed via the MgNB, eg, keeping SN terminated split bearer with NR radio quality low enough
Note: This test case is used to verify that the MgNB does not discard any of its buffered packets in events such as Radio Link Outage over the MgNB unless it receives discard indication from the higher layers or from the SgNB hosting NR PDCP, such as the buffer discard indication from the SgNB. This initial condition ensures that the SgNB does not send the buffer discard indication to the MgNB.
2.3.2.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to MgNB node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Trigger radio link outage on the MgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
3.	Trigger radio link resume on the MgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
4.	Stop data transfer from the Application Test Server to the Test UE or UE emulator.
5.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to MgNB node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
6.	Trigger radio link outage on the SgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the SgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
7.	Trigger radio link resume on the SgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the SgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
8.	Stop data transfer from the Application Test Server to the Test UE or UE emulator.
9.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.2.3.5 	Expected Results and Log Observation
2.3.2.3.5.1 	Expected Results
The behaviour of the corresponding node is aligned with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.3.2.3.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
MgNB-DU sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to the MgNB-CU after step 2
MgNB-DU sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to the MgNB-CU after step 3
Note: these are to confirm if the Radio Link Outage of MgNB operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from MgNB-DU in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from MgNB-DU before triggering Radio Link Outage in step 1
After the end of step 2 and before the start of step 3, MgNB does NOT receive any data which is transmitted from SgNB in step 1
After step 3, MgNB receives all the data which is transmitted from SgNB before triggering Radio Link Outage in step 1
SgNB-DU sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to the SgNB-CU after step 6
SgNB-DU sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to the SgNB-CU after step 7
Note: these are to confirm if the Radio Link Outage of SgNB operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 6 and before the start of step 7, Test UE or UE emulator does NOT receive any data which is transmitted from SgNB-DU in step 5
After step 7, Test UE or UE emulator receives all the data which is transmitted from SgNB-DU before triggering Radio Link Outage in step 5
2.3.2.4 	General for Elements for the NR user plane protocols for EN-DC with RLC-AM and/or RLC-UM
2.3.2.4.1 	Test Purpose
The purpose of this test case is to verify that the general behaviour for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.3.2.4.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) cell and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the X2 link
2.3.2.4.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
EN-DC X2 setup procedure has been successfully completed between the MN (eNB) and SN (en-gNB) according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Data transmission has not been performed via the MgNB
Note: the intention of this is to make a condition where any of the optional fields in DDDS has no available value.
2.3.2.4.4 	Procedure
1.	Trigger Secondary Node Addition procedure
Note: the intention of this step is to have the gNB-DU send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
3.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the gNB-CU to gNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
4.	Trigger the gNB-CU to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to gNB-DU
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
5.	Trigger radio link outage condition in the gNB-DU at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the en-gNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the en-gNB cell. In this specific case, the en-gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
6.	Stop scheduling in the gNB-DU
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
7.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs
2.3.2.4.5 	Expected Results and Log Observation
2.3.2.4.5.1 	Expected Results
The behaviour of gNB-CU and gNB-DU is aligned with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.3.2.4.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs captured during step 1 have the following IEs with the value ‘0’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
o	Final Frame Indication IE
o	Lost Packet Report IE
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
o	Cause Report IE
One or more DDDSs captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
2.3.2.5 	General for Elements for the NR user plane protocols for SA with RLC-AM and/or RLC-UM
2.3.2.5.1 	Test Purpose
The purpose of this test case is to verify that the general behaviour for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.3.2.5.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the F1 link
2.3.2.5.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.5.4 	Procedure
1.	Initiate Service Request procedure from UE or UE emulator
Note: the intention of this step is to have the gNB-DU send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Initiate data transfer from a UE in CM-IDLE state
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
3.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the gNB-CU to gNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
4.	Trigger the gNB-CU to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to gNB-DU
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
5.	Trigger radio link outage condition in the gNB-DU at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the gNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the gNB cell. In this specific case, the gNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
6.	Stop scheduling in the gNB-DU
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
7.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs
2.3.2.5.5 	Expected Results and Log Observation
2.3.2.5.5.1 	Expected Results
The behaviour of gNB-CU and gNB-DU is aligned with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.3.2.5.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs captured during step 1 have the following IEs with the value ‘0’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
o	Final Frame Indication IE
o	Lost Packet Report IE
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
o	Cause Report IE
One or more DDDSs captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
2.3.2.6 	General for Elements for the NR user plane protocols for NR-DC with RLC-AM and/or RLC-UM
2.3.2.6.1 	Test Purpose
The purpose of this test case is to verify that the general behaviour for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.3.2.6.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the Xn link
2.3.2.6.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transmission has not been performed via the MgNB
Note: the intention of this is to make a condition where any of the optional fields in DDDS has no available value.
2.3.2.6.4 	Procedure
1.	Trigger S-NG-RAN Node Addition procedure
Note: the intention of this step is to have the SgNB-DU send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
3.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the SgNB-CU to SgNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
4.	Trigger the SgNB-CU to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to SgNB-DU
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
5.	Trigger radio link outage condition in the SgNB-DU at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the SgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
6.	Stop scheduling in the SgNB-DU
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
7.	Trigger radio link resume on the SgNB-DU.
8.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the MgNB-CU to MgNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
9.	Trigger the MgNB-CU to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to SgNB-DU
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
10.	Trigger radio link outage condition in the MgNB-DU at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
11.	Stop scheduling in the MgNB-DU
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
12.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs
2.3.2.6.5 	Expected Results and Log Observation
2.3.2.6.5.1 	Expected Results
The behaviour of gNB-CU and gNB-DU is aligned with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.3.2.6.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs of SgNB-CU captured during step 1 have the following IEs with the value ‘0’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
o	Final Frame Indication IE
o	Lost Packet Report IE
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
o	Cause Report IE
One or more DDDSs of SgNB-CU captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs of SgNB-CU captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs of SgNB-CU captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs of SgNB-CU captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs of SgNB-CU captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
One or more DDDSs of MgNB-CU captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs of MgNB-CU captured after the beginning of the step 8 have Lost Packet Report IE with the value ‘1’
One or more DDDSs of MgNB-CU captured after the beginning of the step 9 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs of MgNB-CU captured after the beginning of the step 10 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs of MgNB-CU captured after the beginning of the step 11 have Final Frame Indication IE with the value ‘1’
2.3.2.7 	Report Polling for EN-DC with RLC-AM and/or RLC-UM
2.3.2.7.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.3.2.7.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the F1 link
2.3.2.7.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.7.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from gNB-CU to gNB-DU at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	gNB-CU transmits some data packets to gNB-DU (ie, step 1)
3.	Drop some packets sent from gNB-CU to gNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in gNB-DU.
4.	Trigger radio link outage condition in the gNB-DU.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the gNB-DU cell. In this specific case, the gNB-DU cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
5.	Trigger radio link resume condition on gNB-DU.
6.	Stop scheduling in the gNB-DU.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
7.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.7.5 	Expected Results and Log Observation
2.3.2.7.5.1 	Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.3.2.7.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
o	gNB-CU sends gNB-DU one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	gNB-CU sends gNB-DU DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, gNB-DU sends gNB-CU DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, gNB-DU sends gNB-CU DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, gNB-DU sends gNB-CU DDDS including Final Frame Indication IE with the value ‘1’, and then gNB-DU does not send gNB-CU DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
2.3.2.8 	Report Polling for SA with RLC-AM and/or RLC-UM
2.3.2.8.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.3.2.8.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the F1 link
2.3.2.8.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.8.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from gNB-CU to gNB-DU at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	gNB-CU transmits some data packets to gNB-DU (ie, step 1)
3.	Drop some packets sent from gNB-CU to gNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in gNB-DU.
4.	Trigger radio link outage condition in the gNB-DU.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the gNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the gNB-DU cell. In this specific case, the gNB-DU cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
5.	Trigger radio link resume condition on gNB-DU.
6.	Stop scheduling in the gNB-DU.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in gNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
7.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.8.5 	Expected Results and Log Observation
2.3.2.8.5.1 	Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.3.2.8.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
o	gNB-CU sends gNB-DU one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	gNB-CU sends gNB-DU DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, gNB-DU sends gNB-CU DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, gNB-DU sends gNB-CU DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, gNB-DU sends gNB-CU DDDS including Final Frame Indication IE with the value ‘1’, and then gNB-DU does not send gNB-CU DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
2.3.2.9 	Report Polling for NR-DC with RLC-AM and/or RLC-UM
2.3.2.9.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.3.2.9.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the F1 link
2.3.2.9.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the F1 link between the gNB-CU and gNB-DU
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.9.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from MgNB-CU to MgNB-DU at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	MgNB-CU transmits some data packets to MgNB-DU (ie, step 1)
3.	Drop some packets sent from MgNB-CU to MgNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in MgNB-DU.
4.	Trigger radio link outage condition in the MgNB-DU.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in MgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the MgNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB-DU cell. In this specific case, the gNB-DU cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
5.	Trigger radio link resume condition on MgNB-DU.
6.	Stop scheduling in the MgNB-DU.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in MgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
7.	Restart scheduling in the MgNB-DU
8.	Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from SgNB-CU to SgNB-DU at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	SgNB-CU transmits some data packets to SgNB-DU (ie, step 1)
9.	Drop some packets sent from SgNB-CU to SgNB-DU via F1 link by using the Network Impairment Emulator inserted in-line in the F1 link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in SgNB-DU.
10.	Trigger radio link outage condition in the SgNB-DU.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in SgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the SgNB-DU. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB-DU cell. In this specific case, the SgNB-DU cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
11.	Trigger radio link resume condition on SgNB-DU.
12.	Stop scheduling in the SgNB-DU.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in SgNB-DU.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
13.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.9.5 	Expected Results and Log Observation
2.3.2.9.5.1 	Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.3.2.9.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
o	MgNB-CU sends MgNB-DU one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	MgNB-CU sends gNB-DU DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, MgNB-DU sends MgNB-CU DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, MgNB-DU sends MgNB-CU DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, MgNB-DU sends MgNB-CU DDDS including Final Frame Indication IE with the value ‘1’, and then MgNB-DU does not send MgNB-CU DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
After the beginning of step 9:
o	SgNB-CU sends MgNB-DU one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	SgNB-CU sends MgNB-DU DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 10, MgNB-DU sends MgNB-CU DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 11, SgNB-DU sends SgNB-CU DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 13, gNB-DU sends SgNB-CU DDDS including Final Frame Indication IE with the value ‘1’, and then SgNB-DU does not send SgNB-CU DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
2.3.2.10 	Buffer discard indication for EN-DC with RLC-AM and/or RLC-UM
2.3.2.10.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE for EN-DC case with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.3.2.10.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) cell and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.10.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the MN (eNB) and SN (en-gNB) according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.10.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	gNB-CU to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from gNB-CU to gNB-DU to discard NR PDCP PDUs. It is up to gNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the gNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the gNB-CU receives acknowledgement of the transmitted data from the gNB-DU
3.	gNB-CU to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from gNB-CU to gNB-DU to discard NR PDCP PDUs. It is up to gNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the gNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the gNB-CU receives acknowledgement of the transmitted data from the gNB-DU
4.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.2.10.5 	Expected Results and Log Observation
2.3.2.10.5.1 	Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.3.2.10.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	gNB-CU DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
o	DL discard NR PDCP PDU SN present
2.3.2.11 	Buffer discard indication for SA with RLC-AM and/or RLC-UM
2.3.2.11.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE for SA case with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.3.2.11.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.11.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.11.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	gNB-CU to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from gNB-CU to gNB-DU to discard NR PDCP PDUs. It is up to gNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the gNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the gNB-CU receives acknowledgement of the transmitted data from the gNB-DU
3.	gNB-CU to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from gNB-CU to gNB-DU to discard NR PDCP PDUs. It is up to gNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the gNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the gNB-CU receives acknowledgement of the transmitted data from the gNB-DU
4.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.2.11.5 	Expected Results and Log Observation
2.32.2.11.5.1 	Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.3.2.11.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	gNB-CU DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	DL discard NR PDCP PDU SN present
2.3.2.12 	Buffer discard indication for NR-DC with RLC-AM and/or RLC-UM
2.3.2.12.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE for NR-DC case with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.3.2.12.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.12.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.12.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	MgNB-CU to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from MgNB-CU to MgNB-DU to discard NR PDCP PDUs. It is up to MgNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the MgNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the MgNB-CU receives acknowledgement of the transmitted data from the MgNB-DU
3.	MgNB-CU to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from MgNB-CU to MgNB-DU to discard NR PDCP PDUs. It is up to MgNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the MgNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the MgNB-CU receives acknowledgement of the transmitted data from the MgNB-DU
4.	SgNB-CU to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from MgNB-CU to SgNB-DU to discard NR PDCP PDUs. It is up to SgNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the SgNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the SgNB-CU receives acknowledgement of the transmitted data from the SgNB-DU
5.	SgNB-CU to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from SgNB-CU to gNB-DU to discard NR PDCP PDUs. It is up to SgNB-CU implementation when to initiate this step. Specific test procedure needs to be considered taking into account the SgNB-CU implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the SgNB-CU receives acknowledgement of the transmitted data from the SgNB-DU
6.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.2.12.5 	Expected Results and Log Observation
2.3.2.12.5.1 	Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.3.2.12.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs of MgNB, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	gNB-CU DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs of MgNB, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	DL discard NR PDCP PDU SN present
NR PDCP PDUs of SgNB, which are indicated to be discarded in the DL User Data message in step 4, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	gNB-CU DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs of SgNB, which are indicated to be discarded in the DL User Data message in step 5, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	discard NR PDCP PDU SN present
2.3.2.13 	User data existence flag for EN-DC with RLC-AM and/or RLC-UM
2.3.2.13.1 	Test Purpose
The purpose of this test case is to verify gNB-CU’s notification to the gNB-DU of the existence of user data, but without using the User data existence flag IE, with gNB-DU and gNB-CU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the gNB-DU does not support the User data existence flag IE eg, in the case when the gNB-DU is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.3.2.13.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) cell and en-gNB cell (SN) overlap
gNB-CU shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to gNB-CU implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.13.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.13.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator via X2. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in eNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc).
2.	Decrease the amount of user data to be transmitted in both directions between the Application Test Server and the Test UE or UE emulator so that the user data can be transmitted via LTE RAT only. With this condition perform data transmission for appropriate time over drx-InactivityTimer.
Note: the intention of this step is to create a situation where the en-gNB sends actual user data to the eNB even when the amount of user data is small enough to be sent via the LTE RAT only. In this test scenario, the LTE RAT radio condition need not be ideal but shall be good enough to ensure that all user data can be transmitted through the LTE RAT only.
3.	Stop data transfer.
4.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator log
2.3.2.13.5 	Expected Results and Log Observation
2.3.2.13.5.1 	Expected Results
The behaviour of gNB-CU is aligned with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.3.2.13.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from gNB-CU to gNB-DU, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to gNB implementation, ie, the value of the timers used in the gNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC Connected state without expiring DRX inactivity timer as specified in 3GPP TS 36.331 [13] and 3GPP TS 36.321 [14], from the beginning of step 2 till before step 3
2.3.2.14 	User data existence flag for SA with RLC-AM and/or RLC-UM
2.3.2.14.1 	Test Purpose
The purpose of this test case is to verify gNB-CU’s notification to the gNB-DU of the existence of user data, but without using the User data existence flag IE, with gNB-DU and gNB-CU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the gNB-DU does not support the User data existence flag IE eg, in the case when the gNB-DU is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.3.2.14.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
gNB-CU shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to gNB-CU implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.14.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.14.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in gNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc).
2.	Stop data transfer for appropriate time over drx-InactivityTimer.
3.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator log
2.3.2.14.5 	Expected Results and Log Observation
2.3.2.14.5.1 	Expected Results
The behaviour of gNB-CU is aligned with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.3.2.14.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from gNB-CU to gNB-DU, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to gNB implementation, ie, the value of the timers used in the gNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC Connected state without expiring DRX inactivity timer as specified in 3GPP TS 38.331 [17] and 3GPP TS 38.321 [18], from the beginning of step 2 till before step 3
2.3.2.15 	User data existence flag for NR-DC with RLC-AM and/or RLC-UM
2.3.2.15.1 	Test Purpose
The purpose of this test case is to verify gNB-CU’s notification to the gNB-DU of the existence of user data, but without using the User data existence flag IE, with gNB-DU and gNB-CU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the gNB-DU does not support the User data existence flag IE eg, in the case when the gNB-DU is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.3.2.15.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
gNB-CU shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to gNB-CU implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.15.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.15.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator via Xn. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in MgNB and SgNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc).
2.	Decrease the amount of user data to be transmitted in both directions between the Application Test Server and the Test UE or UE emulator so that the user data can be transmitted via SgNB only. With this condition perform data transmission for appropriate time over drx-InactivityTimer of MgNB.
Note: the intention of this step is to create a situation where the SgNB sends actual user data to the MgNB even when the amount of user data is small enough to be sent via the SgNB only. In this test scenario, the SgNB radio condition need not be ideal but shall be good enough to ensure that all user data can be transmitted through the SgNB only.
3.	Increase the amount of user data to be transmitted from the Application Test Server to the Test UE or UE emulator (return to the amount of normal user data)
4.	Decrease the amount of user data to be transmitted in both directions between the Application Test Server and the Test UE or UE emulator so that the user data can be transmitted via MgNB only. With this condition perform data transmission for appropriate time over drx-InactivityTimer of SgNB.
Note: the intention of this step is to create a situation where the MgNB sends actual user data to the SgNB even when the amount of user data is small enough to be sent via the MgNB only. In this test scenario, the MgNB radio condition need not be ideal but shall be good enough to ensure that all user data can be transmitted through the MgNB only.
5.	Stop data transfer.
6.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator log
2.3.2.15.5 	Expected Results and Log Observation
2.3.2.15.5.1 	Expected Results
The behaviour of gNB-CU and gNB-DU is aligned with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.3.2.15.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from MgNB-CU to MgNB-DU, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to MgNB implementation, ie, the value of the timers used in the MgNB.
NR PDCP PDU is sent from SgNB-CU to SgNB-DU, which is frequently enough NOT to expire the timers described in the note in step 3
Note: The required frequency is up to SgNB implementation, ie, the value of the timers used in the SgNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC Connected state without expiring DRX inactivity timer as specified in 3GPP TS 38.331 [xx] and 3GPP TS 38.321 [xx], from the beginning of step 2 till before step 5
2.3.2.16 	Assistance Information Report polling for EN-DC with RLC-AM and/or RLC-UM
2.3.2.16.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.3.2.16.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.16.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.16.4 	Procedure
1.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to gNB-DU node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.2.16.5 	Expected Results and Log Observation
2.3.2.16.5.1 	Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.3.2.16.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the gNB-CU to the gNB-DU include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the gNB-DU to the gNB-CU
2.3.2.17 	Assistance Information Report polling for SA with RLC-AM and/or RLC-UM
2.3.2.17.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.3.2.17.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.17.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.17.4 	Procedure
1.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Initiate Service Request procedure from UE or UE emulator
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to gNB-DU node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.17.5 	Expected Results and Log Observation
2.3.2.17.5.1 	Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.3.2.17.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the gNB-CU to the gNB-DU include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the gNB-DU to the gNB-CU
2.3.2.18 	Assistance Information Report polling for NR-DC with RLC-AM and/or RLC-UM
2.3.2.18.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.3.2.18.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.18.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.18.4 	Procedure
1.	Send Downlink User Data PDU(s) from SgNB-CU to SgNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Send the Downlink User Data PDU(s) immediately after completing the S-NG-RAN NODE ADDITION procedure
2.	Send Downlink User Data PDU(s) from MgNB-CU to MgNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB-DU and SgNB-DU to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to MgNB-DU and SgNB-DU node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.2.18.5 	Expected Results and Log Observation
2.3.2.18.5.1 	Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.3.2.18.5.2 	Log Observation
Xn and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the SgNB-CU to the SgNB-DU include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the SgNB-DU to the SgNB-CU
In step 2, one or more Downlink User Data PDU(s) sent by the MgNB-CU to the MgNB-DU include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the MgNB-DU to the MgNB-CU
2.3.2.19 	Radio quality assistance information for EN-DC with RLC-AM and/or RLC-UM
2.3.2.19.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.3.2.19.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
gNB-DU shall be configured with the Assistance Information Type(s) to be reported in the AID message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
o	‘0’=UNKNOWN
o	‘1’=Average CQI
o	‘2’=Average HARQ Failure
o	‘3’=Average HARQ Retransmissions
o	‘4’= DL Radio Quality Index
o	‘5’= UL Radio Quality Index
o	‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.19.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the eNB and en-gNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.19.4 	Procedure
1.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the gNB-DU becomes available.
Note: the intention of this step is to create a situation where the gNB-DU does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Create conditions which can help the gNB-DU gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data so that gNB-DU can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
4.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
5.	Observe the Protocol Analyzer X2 and F1 logs and Test UE or UE emulator logs.
2.3.2.19.5 	Expected Results and Log Observation
2.3.2.19.5.1 	Expected Results
The use of the Radio quality assistance information IE is aligned with the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.3.2.19.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, gNB-DU sends the Assistance Information Data message to gNB-CU, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, gNB-DU sends the Assistance Information Data message to gNB-CU, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
2.3.2.20 	Radio quality assistance information for SA with RLC-AM and/or RLC-UM
2.3.2.20.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.3.2.20.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
gNB-DU shall be configured with the Assistance Information Type(s) to be reported in the AID message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
o	‘0’=UNKNOWN
o	‘1’=Average CQI
o	‘2’=Average HARQ Failure
o	‘3’=Average HARQ Retransmissions
o	‘4’= DL Radio Quality Index
o	‘5’= UL Radio Quality Index
o	‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.20.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.20.4 	Procedure
1.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the gNB-DU becomes available.
Note: the intention of this step is to create a situation where the gNB-DU does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Initiate Service Request procedure from UE or UE emulator
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for gNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Create conditions which can help the gNB-DU gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data so that gNB-DU can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
4.	Send Downlink User Data PDU(s) from gNB-CU to gNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
5.	Observe the Protocol Analyzer F1 logs and Test UE or UE emulator logs.
2.3.2.20.5 	Expected Results and Log Observation
2.3.2.20.5.1 	Expected Results
The use of the Radio quality assistance information IE is aligned with the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.3.2.20.5.2 	Log Observation
F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, gNB-DU sends the Assistance Information Data message to gNB-CU, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, gNB-DU sends the Assistance Information Data message to gNB-CU, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
2.3.2.21 	Radio quality assistance information for NR-DC with RLC-AM and/or RLC-UM
2.3.2.21.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.3.2.21.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) cell and SgNB cell (SN) overlap
gNB-DU shall be configured with the Assistance Information Type(s) to be reported in the AID message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
o	‘0’=UNKNOWN
o	‘1’=Average CQI
o	‘2’=Average HARQ Failure
o	‘3’=Average HARQ Retransmissions
o	‘4’= DL Radio Quality Index
o	‘5’= UL Radio Quality Index
o	‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.21.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.21.4 	Procedure
1.	Send Downlink User Data PDU(s) from SgNB-CU to SgNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the SgNB-DU becomes available.
Note: the intention of this step is to create a situation where the SgNB-DU does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send the Downlink User Data PDU(s) immediately after completing the Secondary Node Addition (Option 3x) procedure
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for SgNB-DU to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Create conditions which can help the SgNB-DU gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data so that SgNB-DU can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
4.	Send Downlink User Data PDU(s) from SgNB-CU to SgNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
5.	Create conditions which can help the MgNB-DU gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data so that MgNB-DU can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
6.	Send Downlink User Data PDU(s) from MgNB-CU to MgNB-DU with Assistance Information Report polling Flag IE whose value is set to ‘1’.
7.	Observe the Protocol Analyzer Xn and F1 logs and Test UE or UE emulator logs.
2.3.2.21.5 	Expected Results and Log Observation
2.3.2.21.5.1 	Expected Results
The use of the Radio quality assistance information IE is aligned with the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.3.2.21.5.2 	Log Observation
X2 and F1 logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, SgNB-DU sends the Assistance Information Data message to SgNB-CU, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, SgNB-DU sends the Assistance Information Data message to SgNB-CU, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
After step 5, MgNB-DU sends the Assistance Information Data message to MgNB-CU, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
2.3.2.22 	DL report NR PDCP PDU SN for EN-DC with RLC-AM
2.3.2.22.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL report NR PDCP PDU SN IE for EN-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.7.
2.3.2.22.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of eNB cell (MN) and en-gNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting both LTE and NR: used to terminate NAS/AS protocol and data transmission/reception
eNB or eNB emulator: used to perform Secondary Node Addition (Option 3x) procedure
Core or Core emulator (EPC with EN-DC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe X2 and F1 procedural flows and contents
2.3.2.22.3 	Initial Conditions
Refer to Section 2.3 for the F1 related list of initial conditions. Besides, refer to Section 2.2 for the X2 related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
EN-DC X2 setup procedure has been successfully completed between the MN (eNB) and SN (en-gNB) according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Attach procedure and Service Request procedure specified in 3GPP TS 23.401 [8] has been completed
Test UE or UE emulator is within the coverage area of the eNB cell and en-gNB cell
Secondary Node Addition (Option 3x) procedure between eNB and en-gNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.22.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from gNB-CU to gNB-DU.
3.	Observe the Protocol Analyzer X2 and F1 logs.
2.3.2.22.5 	Expected Results and Log Observation
2.3.2.22.5.1 	Expected Results
The use of DL report NR PDCP PDU SN IE is aligned with the requirement specified in Section 4.1.2.7 of NR U-Plane profile specification [3].
2.3.2.22.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer show that:
After beginning of step 2:
o	gNB-DU sends gNB-CU DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	gNB-DU sends gNB-CU DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
2.3.2.23 	DL report NR PDCP PDU SN for SA with RLC-AM
2.3.2.23.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL report NR PDCP PDU SN IE for SA with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.7.
2.3.2.23.2 	Minimum Requirements
DUTs: Single gNB-CU and single gNB-DU:
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe F1 procedural flows and contents
2.3.2.23.3 	Initial Conditions
Refer to Section 2.3 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
2.3.2.23.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from gNB-CU to gNB-DU.
3.	Observe the Protocol Analyzer F1 logs.
2.3.2.23.5 	Expected Results and Log Observation
2.3.2.23.5.1 	Expected Results
The use of DL report NR PDCP PDU SN IE is aligned with the requirement specified in Section 4.1.2.7 of NR U-Plane profile specification [3].
2.3.2.23.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer show that:
After beginning of step 2:
o	gNB-DU sends gNB-CU DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	gNB-DU sends gNB-CU DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
2.3.2.24 	DL report NR PDCP PDU SN for NR-DC with RLC-AM
2.3.2.24.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL report NR PDCP PDU SN IE for NR-DC with gNB-CU and gNB-DU from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.7.
2.3.2.24.2 	Minimum Requirements
DUTs: Two gNBs (MgNB-CU and MgNB-DU – MN, SgNB-CU and SgNB-DU – SN):
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn and F1 procedural flows and contents
2.3.2.24.3 	Initial Conditions
Refer to Section 2.3 for the F1 related standard list of initial conditions. Besides, refer to Section 2.4 for the Xn related list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
F1 setup procedure has been successfully completed between the gNB-CU and gNB-DU according to the NR C-Plane profile specification [2] for both MgNB and SgNB
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.3.2.24.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from MgNB-CU to MgNB-DU.
3.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from SgNB-CU to SgNB-DU.
4.	Observe the Protocol Analyzer Xn and F1 logs.
2.3.2.24.5 	Expected Results and Log Observation
2.3.2.24.5.1 	Expected Results
The use of DL report NR PDCP PDU SN IE is aligned with the requirement specified in Section 4.1.2.7 of NR U-Plane profile specification [3].
2.3.2.24.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer show that:
After beginning of step 2:
o	MgNB-DU sends MgNB-CU DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	MgNB-DU sends MgNB-CU DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
After beginning of step 3:
o	SgNB-DU sends SgNB-CU DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	SgNB-DU sends SgNB-CU DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
2.4 	Xn Interoperability Test Cases
The following set of Xn IOT cases are defined in this version of the specification.
Table 2-6: IOT Test Cases for Xn implemented in accordance with the NR C-Plane [2] profile
Table 2-7: IOT Test Cases for Xn implemented in accordance with the NR U-Plane [3] profile
The initial test conditions which are common to all Xn test cases are listed below while the test case specific deviations of the initial test conditions will be specified in each of the test cases:
The gNBs are running in normal operating state
The gNBs are physically and logically connected
Core or Core emulator (5GC capabilities) is physically connected to the gNB(s)
NG Setup procedure specified in 3GPP TS 38.413 [15] has been completed with the Core or Core emulator
Protocol Analyzer is physically connected to the Xn link(s)
2.4.1 	Xn C-Plane IOT Test Cases
2.4.1.1 	Xn Setup
2.4.1.1.1 	Test Purpose
The purpose of this test case is to verify that the Xn Setup procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.1.
2.4.1.1.2 	Minimum Requirements
DUTs: Two gNBs:
DUTs shall apply the parameter condition specified in 4.2.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.1.3 	Initial Conditions
An SCTP association is successfully established between the two SCTP endpoints 
(SCTP initiation procedure has taken place before or is taking place with execution of this test case)
2.4.1.1.4 	Procedure
1.	Initiate the Xn Setup procedure in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	O&M command in gNB1 to enable Xn interface
2.	Observe the Protocol Analyzer Xn logs
2.4.1.1.5 	Expected Results and Log Observation
2.4.1.1.5.1 	Expected Results
The Xn Setup procedure is successfully completed.
2.4.1.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.1.1/4.2.1.2.
2.4.1.2 	Inter gNB Handover
2.4.1.2.1 	Test Purpose
The purpose of this test case is to verify that the Inter gNB Handover procedure with source gNB and target gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 6.4.1.
2.4.1.2.2 	Minimum Requirements
DUTs: Two gNBs (Source gNB and Target gNB):
DUTs shall apply the parameter condition specified in 6.4.1 of the NR C-Plane profile specification [2]
The coverage of source gNB cell and target gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform Inter gNB Handover
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the source gNB and target gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator is within the coverage area of the source gNB cell
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Data transfer between the Application Test Server and Test UE or UE emulator is possible
2.4.1.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter gNB Handover procedure. This involves observing that the user plane data forwarded from the source gNB to the target gNB over the Xn interface during the Inter gNB Handover procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source gNB to start buffering user plane downlink data prior to the Inter gNB Handover.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Inter gNB Handover Procedure from Source gNB cell to Target gNB cell
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Move the Test UE or UE emulator from the coverage area of source gNB cell towards target gNB cell. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the source gNB cell and the target gNB cell simultaneously. In this specific case, the source gNB cell can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Inter gNB Handover.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Inter gNB Handover Procedure.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10], 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.2.5 	Expected Results and Log Observation
2.4.1.2.5.1 	Expected Results
The Inter gNB Handover procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.4.1.1/6.4.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “HANDOVER REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via the source gNB cell and target gNB cell.
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from source gNB to target gNB after step 2) is correctly received by the Test UE or UE emulator. No U-Plane data recorded in the Xn in step 4.
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE via the target gNB cell is recorded in the NG logs
2.4.1.3 	S-NG-RAN Node Addition
2.4.1.3.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN Node Addition procedure with two gNBs, hereafter MgNB and SgNB respectively, from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.1.1.
2.4.1.3.2 	Minimum Requirements
DUTs: MgNB and SgNB:
DUTs shall apply the parameter condition specified in 7.1.1 of the NR C-Plane profile specification [2]
The coverages of MgNB cell and SgNB cell overlap each other.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN Node Addition
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.3.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
2.4.1.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator via MgNB
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the S-NG-RAN Node Addition procedure. This involves observing that the user plane data forwarded from the MgNB to the SgNB over the Xn interface during the S-NG-RAN Node Addition procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the MgNB to start buffering user plane downlink data prior to the addition of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
2.	Perform S-NG-RAN Node Addition procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the S-NG-RAN Node Addition procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during SN terminated Split Bearer(s) operation in NR-DC. This involves observing that the user plane data transferred over the Xn in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
One of the methods which can be used to stimulate the SN terminated Split Bearer(s) usage of both MgNB and SgNB is to transfer user plane data at data rates high enough for the SgNB to start distributing user plane data to the gNB via the Xn interface.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in both MgNB and SgNB, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.3.5 	Expected Results and Log Observation
2.4.1.3.5.1 	Expected Results
The S-NG-RAN Node Addition procedure is successfully completed.
2.4.1.3.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.1.1.1/7.1.1.2.
If any of the following listed IEs is observed in the Xn logs:
“QoS Flows Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“PDU Session Resource Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via the MgNB or the SgNB
o	All U-Plane data recorded in the Xn logs which are:
o	Forwarded to the Test UE or UE emulator from the MgNB towards the SgNB via their corresponding established DL Forwarding GTP Tunnels, is correctly received by the Test UE or UE emulator
o	Transmitted to the Test UE or UE emulator from the SgNB to the MgNB, via the established MgNB DL GTP Tunnels, is correctly received by the Test UE or UE emulator via MgNB
Note: this test verification process does not impose a requirement for the SgNB to transmit the user plane data which it has received from the MgNB (as part of the downlink data forwarding procedure) to the Test UE or UE emulator via the MgNB, but rather it is to verify the correct operation of the transmit operation via MgNB when it is used by the SgNB.
Regarding the downlink U-Plane data generated in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via MgNB or SgNB
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data transferred from SgNB to MgNB) is correctly received by the Test UE or UE emulator via MgNB
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB or SgNB is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or UE emulator via MgNB (ie, all U-Plane data to be transferred from MgNB to SgNB) is recorded in the Xn logs
2.4.1.4 	M-NG-RAN node initiated SN modification
2.4.1.4.1 	PDU Session Addition
2.4.1.4.1.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Addition) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.1.
2.4.1.4.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Addition)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.4.1.4.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using existing PDU Session
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Addition)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Add the PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to add the PDU Session
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using new PDU Session
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Addition).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.1.5 	Expected Results and Log Observation
2.4.1.4.1.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Addition) procedure is successfully completed.
2.4.1.4.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.1.1/7.2.1.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the added PDU Session is applied:
o	An example of how to observe the PDU Session Addition is to check UE emulator and Core emulator log. The exact method to observe the added PDU Session is out of scope of this specification
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.4.2 	PDU Session Release
2.4.1.4.2.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Release) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.2.
2.4.1.4.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.1.1.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
At least two PDU Session exists to a Test UE or UE emulator in the NW
2.4.1.4.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
At least two PDU Sessions exists to a Test UE or UE emulator in the NW
2.4.1.4.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using two PDU Sessions
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Release)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Release one of PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to release the PDU Session
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using remaining PDU Session
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Release).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.2.5 	Expected Results and Log Observation
2.4.1.4.2.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Release) procedure is successfully completed.
2.4.1.4.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.2.1/7.2.1.2.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the Released PDU Session is not applied:
o	An example of how to observe the PDU Session Release is to check the following three points. The exact method to observe the released PDU Session is out of scope of this specification
o	Check that data is flowing the two PDU Sessions before step 2
o	Check that step 2 (PDU Session Release procedure) performs correctly
o	Check that the data is flowing using the remaining PDU Session in step 4
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.4.3 	Security Key change
2.4.1.4.3.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (Security Key change) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.4.
2.4.1.4.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1.4 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (Security Key change)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.3.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.4.1.4.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Perform M-NG-RAN node initiated SN modification (Security Key change)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Intra-gNB-CU handover (M-NG-RAN node initiated) procedure
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (Security Key change).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.3.5 	Expected Results and Log Observation
2.4.1.4.3.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (Security Key change) procedure is successfully completed.
2.4.1.4.3.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.4.1/7.2.1.4.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in Test UE or UE emulator:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs, but is not recorded in Xn logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE.
o	All U-Plane data recorded in the X2 logs is correctly received by the Test UE or emulated UE via LTE RAT
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.4.4 	PDU Session Modification
2.4.1.4.4.1 	PDU Session Modification with QoS flow addition
2.4.1.4.4.1.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.1.
2.4.1.4.4.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition)
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.4.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case.
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.4.1.4.4.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Add the QoS flow. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to add the QoS flow
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Modification with QoS addition).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.4.1.5 	Expected Results and Log Observation
2.4.1.4.4.1.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow addition) procedure is successfully completed.
2.4.1.4.4.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.1.1/7.2.1.3.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
The test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the added QoS flow is applied:
o	An example of how to observe the QoS flow addition is to check the following two points. The exact method to observe the added QoS flow is out of scope of this specification
o	Check that step 2 (QoS flow addition procedure) performs correctly
o	Check that the data is flowing using the two QoS flows in step 4
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.4.4.2 	PDU Session Modification with QoS flow release
2.4.1.4.4.2.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.2.
2.4.1.4.4.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release)
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
At least two QoS flows exists to a PDU Session
2.4.1.4.4.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile
At least two QoS flows exists to a Test UE or UE emulator in the NW
2.4.1.4.4.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using two QoS flows
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Release the QoS flow. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to release the QoS flow
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using remaining QoS flow
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Modification with QoS release).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.4.2.5 	Expected Results and Log Observation
2.4.1.4.4.2.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Modification with QoS flow release) procedure is successfully completed.
2.4.1.4.4.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.2.1/7.2.1.3.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the Released QoS flow is not applied:
o	An example of how to observe the QoS flow release is to check the following three points. The exact method to observe the released QoS flow is out of scope of this specification
o	Check that data is flowing the two QoS flows before step 2
o	Check that step 2 (QoS flow release procedure) performs correctly
o	Check that the data is flowing using the remaining QoS flow in step 4
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.4.5 	SCG Configuration Query
2.4.1.4.5.1 	Test Purpose
The purpose of this test case is to verify that the SCG Configuration Query procedure with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.2.1.5.
2.4.1.4.5.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverages of MgNB cell and SgNB cell overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform SCG Configuration Query procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.4.5.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.4.5.4 	Procedure
1.	Perform SCG Configuration Query procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Inter-Master Node handover without Secondary Node change procedure (See step 1 in 2.4.1.14.4).
This test method requires the addition of the following to the initial conditions:
o	gNB emulator: used to perform Inter-Master Node handover without Secondary Node change procedure
2.	Observe the Protocol Analyzer Xn logs
2.4.1.4.5.5 	Expected Results and Log Observation
2.4.1.4.5.5.1 	Expected Results
The SCG Configuration Query procedure is successfully completed.
2.4.1.4.5.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.5.1/7.2.1.5.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn logs recorded in the Protocol Analyzer show that:
“After step 1 the scg-CellGroupConfig and/or scg-RB-Config is applied in MgNB:
o	An example of how to observe the scg-CellGroupConfig and/or scg-RB-Config is to check Xn log. The exact method to observe the scg-CellGroupConfig and/or scg-RB-Config is out of scope of this specification.
2.4.1.4.6 	Allowed Band Combination list update
2.4.1.4.6.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.2.1.6.
2.4.1.4.6.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (Allowed Band Combination list update)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.6.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.4.6.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (Allowed Band Combination list update).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The condition by which MgNB update an allowedBC-ListMRDC to the SgNB depends on the MgNB implementation. Still, we can create a situation where Allowed Band Combination list update occurs. One of the possible methods programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB SCell. In this specific case, the retained multiple NR SCells are deleted and the MgNB causes Band Combination list to be updated.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (Allowed Band Combination list update).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.4.6.5 	Expected Results and Log Observation
2.4.1.4.6.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (Allowed Band Combination list update) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.4.6.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.6.1/7.2.1.6.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated allowedBC-ListMRDC is applied in SgNB:
o	An example of how to observe the updated allowedBC-ListMRDC is to check Xn log. The exact method to observe the updated allowedBC-ListMRDC is out of scope of this specification.
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.4.7 	PCell Change (Intra-MN)
2.4.1.4.7.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.2.1.7.
2.4.1.4.7.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
MgNB cell (MN) has at least 2 cells configured and in operation
The coverage of Intra-MgNB primary cell (MN) and SgNB cell (SN) overlap
The coverage of Intra-MgNB serving cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PCell Change (Intra-MN))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.7.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure has between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.4.7.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) on the MgNB side.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB primary cell and the serving cell simultaneously. In this specific case, the MgNB primary cell can start off with low attenuation applied which is subsequently increased. At the same time, the serving cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the handover from the primary cell to the serving cell.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.4.7.5 	Expected Results and Log Observation
2.4.1.4.7.5.1 	Expected Results
The M-NG-RAN node initiated SN modification (PCell Change (Intra-MN)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.4.7.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.7.1/7.2.1.7.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.4.8 	PDU Session Modification with 5QI change
2.4.1.4.8.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change to modify a 5QI (and/or ARP) of the SN terminated split QoS flow from an existing PDU Session) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.1.3.3.
2.4.1.4.8.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated SN modification (PDU Session Modification)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.4.8.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.4.8.4 	Procedures
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using an SN terminated split QoS flow from an existing PDU Session
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Change the 5QI of the QoS flow used in step 1.
One of the possible methods can be to trigger from Core or Core emulator (5GC capabilities) in order to change the 5QI of the SN terminated split QoS flow of an existing PDU Session (eg, PCF initiated SM Policy Association Modification upon Application Function request)
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in	 both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using SN terminated split QoS flow with changed 5QI
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated SN modification (PDU Session Modification with 5qi change).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.4.8.5 	Expected Results and Log Observation
2.4.1.4.8.5.1 Expected Results
The M-NG-RAN node initiated SN modification (PDU Session Modification with 5QI change) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.4.8.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.3.3.1/7.2.1.3.3.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the modified 5QI is applied:
An example of how to observe the 5QI change of the SN terminated split QoS flow from an existing PDU Session is listed below. The exact method to observe the changed 5QI is out of scope of this specification
Check the following two points
o	Check that step 2 (5QI change with IE “QoS Flows To Be Modified List” included in message “S-Node Modification Request”) performs correctly
o	Check that the data is flowing using the QoS flow with the new 5QI in step 4
Regarding the downlink U-Plane data generated in step1, after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step1, after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5 	S-NG-RAN node initiated SN modification with MN involvement
2.4.1.5.1 	PDU Session Release
2.4.1.5.1.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.2.2.
2.4.1.5.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
At least two PDU Sessions exists to a Test UE or UE emulator in the NW.
2.4.1.5.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
At least two PDU Sessions exists to a Test UE or UE emulator in the NW
2.4.1.5.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator using two PDU Sessions
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform S-NG-RAN node initiated SN modification (PDU Session Release)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Release one of PDU Session. One of the possible methods can be to trigger from Test UE or UE emulator or Core or Core emulator (5GC capabilities) in order to release the PDU Session
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using remaining PDU Session.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.5.1.5 	Expected Results and Log Observation
2.4.1.5.1.5.1 	Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (PDU Session Release) procedure is successfully completed.
2.4.1.5.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.2.1/7.2.2.2.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the Released PDU Session is not applied:
o	An example of how to observe the PDU Session Release is to check the following three points. The exact method to observe the released PDU Session is out of scope of this specification
	Check that data is flowing the two PDU Sessions before step 2
	Check that step 2 (PDU Session Release procedure) performs correctly
	Check that the data is flowing using the remaining PDU Session in step 4
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5.2 	Security Key change
2.4.1.5.2.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.2.3.
2.4.1.5.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.3 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.5.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (Security Key change)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform Intra-gNB-CU handover (M-NG-RAN node initiated) procedure
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds using new PDU Session
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (Security Key change).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.5.2.5 	Expected Results and Log Observation
2.4.1.5.2.5.1 	Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (Security Key change) procedure is successfully completed.
2.4.1.5.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.3.1/7.2.2.3.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
After step 2 the updated security key is applied in Test UE or UE emulator:
o	An example of how to observe the updated security key is to check the UE emulator log. The exact method to observe the updated security key is out of scope of this specification
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs, but is not recorded in Xn logs, is correctly received in the PDCP layer or higher layer by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5.3 	UL Configuration Update
2.4.1.5.3.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update) procedure with MN and SN from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.2.6.
2.4.1.5.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.5.3.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform UL Configuration Update procedure (SN initiated).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Use programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. One method is to degrade the radio quality of the SgNB cell and use an O&M command on the SN side to change the UL configuration IE from “shared”, indicating the UL scheduling is performed at both SgNB and MgNB, to “only”, indicating the UL scheduling is performed at the SgNB.
DC-based PDCP duplication may be optionally activated or deactivated based on the radio quality of the SgNB cell; degrading the radio quality can activate it, while improving it can deactivate it.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.5.3.5 	Expected Results and Log Observation
2.4.1.5.3.5.1 	Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (UL Configuration Update) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.5.3.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.6.1/7.2.2.6.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.5.4 	PSCell change, Intra gNB-DU
2.4.1.5.4.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) procedure with MgNB and SgNB from different vendors can be successfully completed, confirming to the NR C-Plane profile specification [2] Section 7.2.2.4.
2.4.1.5.4.2	 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.4 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
SgNB-DU has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.4.1.5.4.3	 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.4.4	 Procedure
1.	Perform data transfer in both directions between the Application Test Server and the UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source PSCell and the Target PSCell simultaneously. In this specific case, the Source PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the Target PSCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the PSCell change.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.5.4.5	 Expected Results and Log Observation
2.4.1.5.4.5.1	 Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Intra gNB-DU) procedure is successfully completed.
2.4.1.5.4.5.2	 Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.4.1/7.2.2.4.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5.5 	PSCell change, Inter gNB-DU
2.4.1.5.5.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) procedure with MgNB and SgNB from different vendors can be successfully completed, confirming to the NR C-Plane profile specification [2] Section 7.2.2.5.
2.4.1.5.5.2 	Minimum Requirements
DUTs: Two gNBs (MgNB, SgNB):
DUTs shall apply the parameter condition specified in 7.2.2.5 of the NR C-Plane profile specification [2]
The coverage of MgNB cell and SgNB cell overlap
SgNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.4.1.5.5.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.5.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source PSCell and the Target PSCell in SgNB simultaneously. In this specific case, the Source PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the Target PSCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the PSCell change.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.5.5.5 	Expected Results and Log Observation
2.4.1.5.5.5.1 	Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (PSCell change, Inter gNB-DU) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.5.5.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.5.1/7.2.2.5.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5.6 	Measurement Gap Coordination Procedure (SN initiated)
2.4.1.5.6.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.2.7.
2.4.1.5.6.2 	Minimum Requirements
DUTs: Master gNB (MgNB) and Secondary gNB (SgNB):
DUTs shall apply the parameter condition specified in 7.2.2.7 of the NR C-Plane profile specification [2]
The coverage of MgNB and SgNB cells overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to trigger the UE measurement transfer procedure using Measurement Report message and perform S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe Xn procedural flows and content, and NG-U UP content
2.4.1.5.6.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
The Test UE or UE emulator is within the coverage area of the MgNB and of the SgNB cells
The test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed.
The S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the application test server and test UE or UE emulator is possible
2.4.1.5.6.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure. It is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	An SgNB receives a UE measurement transfer as specified in 7.5.1 of NR C-Plane profile specification [2].
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure.
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.5.6.5 	Expected Results and Log Observation
2.4.1.5.6.5.1 	Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (Measurement gap coordination) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.5.6.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.7.1/7.2.2.7.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.5.7 	CellGroupConfig change (SN-DU initiated)
2.4.1.5.7.1 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure with MgNB and SgNB from different vendors, confirming to the NR C-Plane profile specification [2] Section 7.2.2.8.
2.4.1.5.7.2 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.2.8 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
2.4.1.5.7.3 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.5.7.4 Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Perform S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Perform waveform switching when the UE is in an area with poor coverage in the SCG
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.5.7.5 Expected Results and Log Observation
2.4.1.5.7.5.1 Expected Results
The S-NG-RAN node initiated SN modification with MN involvement (CellGroupConfig change (SN-DU initiated)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible
2.4.1.5.67.5.2 Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.2.8.1/7.2.2.8.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs.
2.4.1.6 	S-NG-RAN node initiated SN modification without MN involvement
2.4.1.6.1 	SRB3 not supported
2.4.1.6.1.1 	SN Modification – SCell(s) Addition / Release
2.4.1.6.1.1.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SCell(s) Addition / Release)) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.3.1.1.
2.4.1.6.1.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.2.3.1.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell(s) Addition / Release))
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.6.1.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.6.1.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Addition))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SN cell. In this specific case, the candidate SCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SCell Addition using the Measurement results.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Addition)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
5.	Perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Release))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SN SCell. In this specific case, the candidate SCell can start off with low attenuation applied which is subsequently increased to a level which can trigger the SCell Release using the Measurement results. The Measurement report is sent by MN via RRC Transfer procedure. It is defined in the 5.7.1 of the NR C-Plane profile specification [2].
6.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
7.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 not supported (SN Modification – SCell Release)).
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
8.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.6.1.1.5 	Expected Results and Log Observation
2.4.1.6.1.1.5.1 	Expected Results
The S-NG-RAN node initiated SN modofication without MN involvement (SRB3 not supported (SCell(s) Addition / Release)) procedure is successfully completed. All the data generated is correctly received by Test UE or UE emulator after the addition and release procedures.
2.4.1.6.1.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.1.1.1/7.2.3.1.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane date generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG log is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
Regarding the downlink U-Plane date generated after step 5 and in step 7:
o	All U-Plane data recorded in the NG log is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated after step 5 and in step 7:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.6.2	 SRB3 supported
2.4.1.6.2.1	 Intra gNB-DU PSCell Change using SRB3
2.4.1.6.2.1.1	 Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) procedure with MN and SN from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.3.2.1.
2.4.1.6.2.1.2	 Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in Sections 7.2.3/7.2.3.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cells (SN) overlap.
SgNB has at least 2 Cells configured and in operation.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)).
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol.
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side.
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content.
2.4.1.6.2.1.3	 Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions is applicable for this specific test case.
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed.
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell.
Data transfer between the application test server and Test UE or UE emulator is possible.
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2].
2.4.1.6.2.1.4	 Procedure
1.	Perform the data transfer in both directions between the Application Test Server and Test UE or UE emulator.
2.	Perform the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	There should be at least two SgNB cells within the coverage of a cell under MgNB. The first cell under SgNB which is PSCell and the second cell under SgNB which is not PSCell. If the tester manually degrades the radio quality of the first SgNB cell this can be the trigger of the PSCell Change procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first SgNB cell. In this specific case, the first SgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Intra gNB-DU PSCell Change procedure.
3.	Stop data transfer between the Application Test Server and Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) in both directions between the Test UE or UE emulator and the Application Test Server.
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.6.2.1.5	 Expected Results and Log Observation
2.4.1.6.2.1.5.1	 Expected Results
The S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Intra gNB-DU PSCell Change using SRB3)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.6.2.1.5.2	 Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.2.1.1/7.2.3.2.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG log is correctly received by the Test UE or UE emulator.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs.
2.4.1.6.2.2 	Inter gNB-DU PSCell Change using SRB3
2.4.1.6.2.2.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)) procedure with MgNB and SgNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.2.3.2.2.
2.4.1.6.2.2.2 	Minimum Requirements
DUTs:  Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in Sections 7.2.3/7.2.3.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cells (SN) overlap
SgNB has at least 2 Cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)).
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.6.2.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cells
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.6.2.2.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform the S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3))
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the source PSCell and the target PSCell in SgNB simultaneously. In this specific case, the source PSCell can start off with low attenuation applied which is subsequently increased. At the same time, the target PSCell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Inter gNB-DU PSCell Change procedure
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)). This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test)
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.6.2.2.5 	Expected Results and Log Observation
2.4.1.6.2.2.5.1 	Expected Results
The S-NG-RAN node initiated SN modification without MN involvement (SRB3 supported (Inter gNB-DU PSCell Change using SRB3)) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.6.2.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.3.2.2.1/7.2.3.2.2.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE MODIFICATION CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.7 	M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
2.4.1.7.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.3.1.
2.4.1.7.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.7.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.7.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform M-NG-RAN node initiated S-NG-RAN node Release without keeping UE
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in 5GC or MN side to trigger UE context release
3.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.7.5 	Expected Results and Log observation
2.4.1.7.5.1 	Expected Results
The M-NG-RAN node initiated S-NG-RAN node Release without keeping UE procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.7.5.2 	Log observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.1.1/7.3.1.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.8 	M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
2.4.1.8.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.3.2.
2.4.1.8.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.8.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.8.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform M-NG-RAN node initiated S-NG-RAN node Release with keeping UE
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Provoke a Radio Link Failure in SCG, so MgNB receives SCGFailureInformation message from the UE. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the SgNB cell. In this specific case, the SgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the Radio link failure scenario.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful M-NG-RAN node initiated S-NG-RAN node Release with keeping UE.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.8.5 	Expected Results and Log observation
2.4.1.8.5.1 	Expected Results
The M-NG-RAN node initiated S-NG-RAN node Release with keeping UE procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.8.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.2.1/7.3.2.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from SgNB to MgNB in step 1, form SgNB to MgNB after step 2) is correctly received by the Test UE or UE emulator. No U-Plane data recorded in the Xn in step 4.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.9 	S-NG-RAN node initiated S-NG-RAN node Release
2.4.1.9.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN node initiated S-NG-RAN node Release procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.3.3.
2.4.1.9.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.3.3 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform S-NG-RAN node initiated S-NG-RAN node Release
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.9.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.1.9.4 	Procedure
There are two options for this procedure, as shown in Figure 7.3.3.1-1 in the NR C-Plane profile specification [2].
OPT 1 (with keeping UE case) is below:
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the S-NG-RAN node initiated S-NG-RAN node Release procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the S-NG-RAN node initiated S-NG-RAN node Release procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform S-NG-RAN node initiated S-NG-RAN node Release
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Block cell in SgNB. One of the possible methods can be to make use of the O&M command in the SgNB to block the cell
b.	Provoke conditions in a way that the SgNB detects that the RLC exceeds its maximum downlink retransmission. One of the possible methods can be to vary the channel conditions between the SgNB and the Test UE or UE emulator so that the emulated interference can be significant enough to increase RLC retransmissions to exceed the maximum downlink retransmission level
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 second.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful S-NG-RAN node initiated S-NG-RAN node Release.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
OPT 2 (without keeping UE case) is below:
Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
Perform S-NG-RAN node initiated S-NG-RAN node Release
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in 5GC or MN side to trigger UE context release
Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.9.5 	Expected Results and Log observation
2.4.1.9.5.1 	Expected Results
The S-NG-RAN node initiated S-NG-RAN node Release procedure is successfully completed. All the data generated is correctly received by UE after release procedure.
2.4.1.9.5.2 	Log observation
Xn logs recorded in the Protocol Analyzer and the Test UE or UE emulator are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.3.3.1/7.3.3.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “S-NODE RELEASE CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from SgNB to MgNB) is correctly received by the Test UE or UE emulator
In OPT1, NG logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 3:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 3:
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the NG logs
2.4.1.10 	Resource Status Reporting Initiation
2.4.1.10.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting Initiation procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.9.1.
2.4.1.10.2 	Minimum Requirements
DUTs: Two gNBs:
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.10.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case
Xn Setup procedure has been successfully completed between the gNB1 and gNB2 according to the NR C-Plane profile specification [2]
2.4.1.10.4 	Procedure
1.	Perform the Resource Status Reporting Initiation procedure to start a measurement in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can beis to make use of O&M command in the gNB1 in order to initiate the Resource Status Reporting Initiation procedure to start the measurement
2.	Perform the Resource Status Reporting Initiation procedure to add cells to report for a measurement in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB1 in order to initiate the Resource Status Reporting Initiation procedure to add cells to the measurement
3.	Perform the Resource Status Reporting Initiation procedure to stop a measurement in gNB1.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	One of the possible methods can be to make use of O&M command in the gNB1 in order to initiate the Resource Status Reporting Initiation procedure to stop the measurement
4.	Observe the Protocol Analyzer Xn logs
2.4.1.10.5 	Expected Results and Log Observation
2.4.1.10.5.1 	Expected Results
The start of the measurement is successfully completed by performing the Resource Status Reporting Initiation procedure in step1.
The cell addition for the measurement initiated in step1 is successfully completed by performing the Resource Status Reporting Initiation procedure in step2.
The stop of the measurement is successfully completed by performing the Resource Status Reporting Initiation procedure in step3.
2.4.1.10.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.9.1.1/4.2.9.1.2.
If any of the following listed IEs is observed in the Xn logs
“Criticality Diagnostics” in “RESOURCE STATUS RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
2.4.1.11 	Resource Status Reporting
2.4.1.11.1 	Test Purpose
The purpose of this test case is to verify that the Resource Status Reporting procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.9.2.
2.4.1.11.2 	Minimum Requirements
DUTs: Two gNBs:
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.11.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the gNB1 and gNB2 according to the NR C-Plane profile specification [2]
2.4.1.11.4 	Procedure
1.	Perform the Resource Status Reporting procedure from the gNB2 to report the result of on-going load measurements
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Perform the Resource Status Reporting Initiation procedure (See step 1 in 2.4.1.10.4)
Note: How to perform the specific procedures for the traffic load are out of scope of this specification.
2.	Observe the Protocol Analyzer Xn logs
2.4.1.11.5 	Expected Results and Log Observation
2.4.1.11.5.1 	Expected Results
The Resource Status Reporting procedure is successfully completed.
2.4.1.11.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.9.2.1/4.2.9.2.2.
2.4.1.12 	Master Node to gNB Change
2.4.1.12.1 	Test Purpose
The purpose of this test case is to verify that the Master Node to gNB Change procedure with MgNB, SgNB and T-gNB from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 7.6.1.
2.4.1.12.2 	Minimum Requirements
DUTs: Three gNBs (MgNB – S-MN, SgNB – S-SN, T-gNB):
DUTs shall apply the parameter condition specified in 7.6.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (S-MN), SgNB cell (S-SN) and T-gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Master Node to gNB Change
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.12.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
2.4.1.12.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Master Node to gNB Change procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the Master Node to gNB Change procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform the Master Node to gNB Change
A few examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The handover to T-gNB is decided by the Master Node based on the Measurement Report sent from the Test UE or UE emulator. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and Master Node cell and the T-gNB cell simultaneously. In this specific case, the Master Node cell can start off with low attenuation applied which is subsequently increased. At the same time, the T-gNB cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the Master Node to gNB Change procedure.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Master Node to gNB Change. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.12.5 	Expected Results and Log Observation
2.4.1.12.5.1 	Expected Results
The Master Node to gNB Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.12.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.6.1.1/7.6.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “HADOVER REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from SgNB to MgNB in step 1, from SgNB to MgNB after step 2, from MgNB to T-gNB after step 2) is correctly received by the Test UE or UE emulator. No U-Plane data recorded in the Xn logs in step 4.
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.13 	Reset
2.4.1.13.1 	Test Purpose
The purpose of this test case is to verify that the Reset procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 4.2.2.
2.4.1.13.2 	Minimum Requirements
DUTs: Two gNBs
The coverage of gNB1 cell and gNB2 cells overlap
Testing tools which are required for this test scenario:
Test UEs or UE emulator which is capable of supporting NR: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.13.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the gNB1 and gNB2 according to the NR C-Plane profile specification [2]
Multiple Test UEs or emulated UEs have registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the gNB1 cell and gNB2 cell
Data transfer between the Application Test Server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the gNB1 and gNB2 been successfully completed
2.4.1.13.4 	Procedure
1.	Perform the gNB1 initiated Reset procedure over Xn to indicate the release of all allocated UE contexts
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB1 in order to deactivate all cells serving UEs
2.	Perform the gNB1 initiated Reset procedure over Xn to indicate the release of a part of allocated UE contexts
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB1 in order to deactivate few cells serving UEs
3.	Observe the Protocol Analyzer Xn link logs
2.4.1.13.5 	Expected Results and Log Observation
2.4.1.13.5.1 	Expected Results
The reset is successfully completed by the gNB1 initiated Reset procedure in step 1. All of the UE contexts affected by the gNB1 initiated Reset procedure is successfully released in the gNB2 and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
The partial reset is successfully completed by the gNB1 initiated Reset procedure in step 2. The part of the UE contexts affected by the gNB1 initiated Reset procedure is successfully released in the gNB2 and data transfer between the Application Test Server and the Test UE or UE emulator has ended.
2.4.1.13.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.2.1/4.2.2.2.1/4.2.2.2.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “RESET ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.4.1.14	Inter-Master Node Handover (Without SN Change)
2.4.1.14.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (Without SN Change) procedure with three gNBs from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.7.1.
2.4.1.14.2 	Minimum Requirements
DUTs:  Three gNBs (Source gNB (S-MN), Secondary gNB (SN), Target gNB (T-MN)):
DUTs shall apply the parameter condition specified in 7.7.1 of the NR C-Plane profile specification [2]
The coverage of Source gNB cell and Secondary gNB cell overlap
The coverage of Target gNB cell and Secondary gNB cell overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Inter-Master Node Handover (Without SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.14.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the S-MN, SN and T-MN according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source gNB cell (S-MN) and Secondary gNB cell (SN)
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the Source gNB (S-MN) and Secondary gNB (SN) has been successfully completed according to NR C-Plane profile specification
2.4.1.14.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter-Master Node Handover procedure.
This involves observing that the user plane data forwarded from the source en-gNB to the target en-gNB, over the Xn interface during the Inter-Master Node Handover procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source en-gNB to start buffering user plane downlink data prior to the change of the en-gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in both the LTE RAT and NR RAT, which is calculated based on 3GPP TS 36.211 [9], 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Inter-Master Node Handover (without SN Change) procedure from source gNB (S-MN) to target gNB (T-MN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The Test UE or UE emulator sends a Measurement Report to the source gNB (S-MN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and source gNB (S-MN) and the target gNB (T-MN) simultaneously. In this specific case, the source gNB (S-MN) cell can start off with low attenuation applied which is subsequently increased. At the same time, the target gNB (T-MN) cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the source gNB (S-MN).
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Inter-Master Node Hanover (Without SN Change) procedure. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.14.5 	Expected Results and Log Observation
2.4.1.14.5.1 	Expected Results
The Inter-Master Node Handover (Without SN Change) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.14.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.7.1.1/7.7.1.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“PDU Session Resources Not Admitted List” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “SGNB RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “SGNB RECONFIGURATION COMPLETE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from S-MN to T-MN) is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the Xn logs (ie, all U-Plane data forwarded from T-MN to S-MN) is recorded in the Xn logs
2.4.1.15	Secondary Node Change (SN initiated)
2.4.1.15.1 	Test Purpose
The purpose of this test case is to verify that the S-NG-RAN initiated Secondary Node Change procedure with MgNB, SgNB and T-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.8.1.
2.4.1.15.2 	Minimum Requirements
DUTs: Three gNBs (Master gNB (MN), Source gNB (S-SN), Target gNB (T-SN)):
DUTs shall apply the parameter condition specified in 7.8.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN), SgNB cell (S-SN) and T-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR-DC: used to perform Secondary Node Change procedure (SN initiated)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn links procedural flows and content, NG-U UP content
2.4.1.15.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
Secondary Node is Source gNB (S-SN) at the start of this procedure
Data transfer between the application test server and Test UE or UE emulator is possible (via NR RAT’s)
2.4.1.15.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change procedure (SN initiated). This involves observing that the user plane data forwarded from the Source gNB (S-SN) to the Master gNB (MN) and from the Master gNB (MN) to the Target gNB (T-SN) over the Xn interface during the Secondary Node Change procedure (SN initiated) can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the Source gNB to start buffering user plane downlink data prior to the release of the Source gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Change Procedure from Source gNB cell (S-SN) to Target gNB cell (T-SN)
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Move the Test UE or UE emulator from the coverage area of Source gNB cell (S-SN) towards Target gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source gNB cell (S-SN) and the Target gNB cell (T-SN) simultaneously. In this specific case, the Source gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-SN.
3.	Stop data transfer between the Application Test Server to the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Change procedure (SN initiated). This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.15.5 	Expected Results and Log Observation
2.4.1.15.5.1 	Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.15.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.8.1.1/7.8.1.2.
If any of the following listed IEs is observed in the Xn logs
“PDU Session Resources Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE CHANGE CONFIRM”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from Source gNB to MgNB to Target gNB after step 2 and from Target gNB to MgNB in step 4) is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the Xn logs (ie, all U-Plane data forwarded from MgNB to Source gNB after step 2 and from MgNB to Target gNB in step 4)
2.4.1.16 	NG-RAN Node Configuration Update
2.4.1.16.1 	Test Purpose
The purpose of this test case is to verify that the NG-RAN Node Configuration Update procedure, used to update application-level configuration data, between two NG-RAN over the Xn-C interface, with gNB1 and gNB2 from different vendors can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 4.2.8.1
2.4.1.16.2 	Minimum Requirements
DUTs: Two gNBs:
DUTs shall apply the parameter condition specified in 4.2.8.1 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.16.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the gNB1 and gNB2 according to the NR C-Plane profile specification [2]
2.4.1.16.4 	Procedure
1.	Initiate NG-RAN Node Configuration Update procedure to add cell(s) in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell activation. One of the possible methods can be to make use of O&M command in the gNB1 in order to activate cells.
2.	Initiate NG-RAN Node Configuration Update procedure to modify cell(s) in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell modification. One of the possible methods can be to make use of O&M command in the gNB1 in order to modify cells, eg, change DL Transmission Bandwidth.
3.	Initiate NG-RAN Node Configuration Update procedure to delete cell(s) in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stimulate cell deletion. One of the possible methods can be to make use of O&M command in the gNB1 in order to delete cells.
4.	Initiate NG-RAN Node Configuration Update procedure to deactivate cell(s) in gNB1
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Stimulate cell deactivation. One of the possible methods can be to make use of O&M command in the gNB1 in order to deactivate cells.
5.	Observe the Protocol Analyzer Xn logs.
2.4.1.16.5 	Expected Results and Log Observation
2.4.1.16.5.1 	Expected Results
The NG-RAN Node Configuration Update procedure is successfully completed each time after step 1 – step 4.
2.4.1.16.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 4.2.8.1.1/4.2.8.1.2
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “NG-RAN NODE CONFIGURATION UPDATE ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
2.4.1.17	UE measurement transfer
2.4.1.17.1 	Test Purpose
The purpose of this test case is to verify that the UE measurement transfer procedure with MN (MgNB) and SN (SgNB) from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.5.1.
2.4.1.17.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply the parameter condition specified in 7.5.1 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN), SgNB cell (SN) overlap
SN has at least 2 cells configured and in operation
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform UE measurement transfer procedure using MeasurementReport message
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and content
2.4.1.17.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and one of SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the application test server and Test UE or UE emulator is possible (via NR RATs)
2.4.1.17.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly during the UE measurement transfer procedure. This involves observing that the user plane data transferred over the Xn in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform UE measurement transfer procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
The condition by which UE sends a MeasurementReport message to the MN depends on the configuration done by MN. Still, we can create a situation where UE measurement transfer occurs. There should be at least two SN cells within the coverage of a cell under MN. The first cell under SN which is PSCell and the second cell under SN which is not PSCell. If the tester manually degrades the radio quality of the first SN cell this can be the trigger of the UE measurement transfer procedure.
One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the first SN cell. In this specific case, the first SN cell can start off with low attenuation applied which is subsequently increased to a level which can trigger the UE measurement transfer procedure.
3.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.1.17.5 	Expected Results and Log Observation
2.4.1.17.5.1 	Expected Results
The UE measurement transfer procedure is successfully completed.
2.4.1.17.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.5.1.1/7.5.1.2.
NG logs recorded in the Protocol Analyzer and the Test UE or UE emulator show that:
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator via NR RAT
Regarding the downlink U-Plane data generated in step 1:
All U-Plane data transmitted by the Test UE or UE emulator via NR RAT is recorded in the NG logs
2.4.1.18	MN initiated SN Change
2.4.1.18.1 	Test Purpose
The purpose of this test case is to verify that the M-NG-RAN initiated Secondary Node Change procedure with MgNB, SgNB and T-gNB from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] Section 7.8.2.
2.4.1.18.2 	Minimum Requirements
DUTs: Three gNBs (Master gNB (MN), Source gNB (S-SN), Target gNB (T-SN)):
DUTs shall apply the parameter condition specified in 7.8.2 of the NR C-Plane profile specification [2]
The coverage of MgNB cell (MN), SgNB cell (S-SN) and T-gNB cell (T-SN) overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR-DC: used to perform Secondary Node Change procedure (MN initiated)
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn links procedural flows and content, NG-U UP content
2.4.1.18.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB, SgNB and T-gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification
Secondary Node is Source gNB (S-SN) at the start of this procedure
Data transfer between the application test server and Test UE or UE emulator is possible
2.4.1.18.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Secondary Node Change procedure (MN initiated). This involves observing that the user plane data forwarded from the Source gNB (S-SN) to the Master gNB (MN) and from the Master gNB (MN) to the Target gNB (T-SN) over the Xn interface during the Secondary Node Change procedure (MN initiated) can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the Source gNB to start buffering user plane downlink data prior to the release of the Source gNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Secondary Node Change Procedure from Source gNB cell (S-SN) to Target gNB cell (T-SN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
Move the Test UE or UE emulator from the coverage area of Source gNB cell (S-SN) towards Target gNB cell (T-SN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the Source gNB cell (S-SN) and the Target gNB cell (T-SN) simultaneously. In this specific case, the Source gNB cell (S-SN) can start off with low attenuation applied which is subsequently increased. At the same time, the Target gNB cell (T-SN) can start off with high attenuation applied which is subsequently lowered to a level which can trigger the SN change procedure from S-SN to T-SN.
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Secondary Node Change procedure (MN initiated). This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.18.5 	Expected Results and Log Observation
2.4.1.18.5.1 	Expected Results
The Secondary Node Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.18.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flow specified in the NR C-Plane profile specification [2] Sections 7.8.2.1/7.8.2.2.
If any of the following listed IEs is observed in the Xn logs
“PDU Session Resources Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“QoS Flows Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected by the M-NG-RAN node” in “S-NODE RECONFIGURATION COMPLETE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from Source gNB to MgNB to Target gNB after step 2 and from Target gNB to MgNB in step 5) is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the Xn logs (ie, all U-Plane data forwarded from MgNB to Source gNB after step 2 and from MgNB to Target gNB in step 5)
2.4.1.19	RRC connection re-establishment (inter gNB-CU)
2.4.1.19.1 	Test Purpose
The purpose of this test case is to verify that the RRC connection re-establishment procedure with two gNBs, hereafter Target gNB and Source gNB respectively, from different vendors can be successfully completed, conforming to the NR C-Plane profile specification [2] Section 6.10.4.
2.4.1.19.2 	Minimum Requirements
DUTs: Target gNB and Source gNB (TgNB and SgNB):
DUTs shall apply the parameter condition specified in 6.10.4 of the NR C-Plane profile specification [2]
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform RRC connection re-establishment
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.19.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the source gNB and target gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of SgNB cell
Data transfer between the application test server and Test UE or UE emulator is possible
2.4.1.19.4	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
2.	Perform Inter gNB Handover procedure from SgNB to TgNB
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	The Test UE or UE emulator sends a Measurement Report to the SgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and SgNB and the TgNB simultaneously. In this specific case, the SgNB can start off with low attenuation applied which is subsequently increased. At the same time, the TgNB can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the SgNB.
3.	Perform RRC Connection Re-establishment by triggering handover failure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	Simulate radio link failure by increasing the attenuation of the TgNB.
4.	Stop data transfer between the Application Test Server and Test UE or UE emulator
5.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
6.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.19.5 	Expected Results and Log Observation
2.4.1.19.5.1 	Expected Results
The RRC connection re-establishment procedure is successfully completed.
2.4.1.19.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.10.4.1 and 6.10.4.2.
If any of the following listed IEs is observed in the Xn logs:
“Criticality Diagnostics” in “RETRIEVE UE CONTEXT RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the uplink and downlink U-Plane data generated in step 1 and after step 3 and in step 5:
o	All U-Plane data recorded in the NG and Xn logs is correctly received by the Test UE or UE emulator and the Application Test Server, respectively.
2.4.1.20 	RRC Inactive to RRC Connected, Inter gNB-CU
2.4.1.20.1 	Test Purpose
The purpose of this test case is to verify that the state change procedure from RRC inactive to RRC connected between two gNBs from different vendors can successfully be completed by performing the Retrieve UE Context procedure, conforming to the NR C-Plane profile specification [2] Section 6.9.3.
2.4.1.20.2 	Minimum Requirements
DUTs: Receiving gNB and Last Serving gNB:
DUTs shall apply the parameter condition specified in 6.9.3 of the NR C-Plane profile specification [2]
The coverages of Receiving gNB and Last Serving gNB cells overlap each other.
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to trigger the RRC state transition procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe Xn procedural flows and content, and NG-U UP content
2.4.1.20.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the Receiving gNB and Last Serving gNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed. At least one DRB is established and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Data transfer in the uplink and downlink direction towards/from the Test UE or UE emulator is omitted for a period of time. The UE or UE emulator is in RRC inactive state.
The UE or UE emulator is moved from the cell of the Last Serving gNB to the cell of the Receiving gNB. That can be done eg, by increasing the attenuation of the Last Serving gNB cell and by lowering the attenuation of the Receiving gNB cell.
2.4.1.20.4 	Procedure
1.	Initiate RRC inactive to RRC connected procedure
Two examples of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification.
a.	Perform data transfer in the uplink direction from the Test UE or UE emulator towards the Application Test Server
The RRC inactive to RRC connected procedure is initiated by the UE sending a RRCResumeRequest to the Receiving gNB.
b.	Perform data transfer in the downlink direction from the Application Test Server towards the Test UE or UE emulator
Paging procedure is initiated by the Receiving gNB and the UE triggers RRC inactive to RRC connected by sending a RRCResumeRequest to the Receiving gNB.
2.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
3.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds before the RRC connection times out.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the RRC connection was established
4.	Observe the Protocol Analyzer Xn logs
2.4.1.20.5 	Expected Results and Log Observation
2.4.1.20.5.1 	Expected Results
The RRC Inactive to RRC Connected state change procedure between two gNBs is completed successfully, performed with Retrieve UE Context procedure., Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.4.1.20.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 6.9.3.1/6.9.3.2.
If any of the following listed IEs is observed in the Xn log
“Criticality Diagnostics” in “RETRIEVE UE CONTEXT RESPONSE”
the test result shall be determined to be ‘successful with remarks’.
NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and step 3:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE
Regarding the uplink U-Plane data generated in step 1 and step 3:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
2.4.1.21 	Measurement Gap Coordination Procedure (MN initiated)
2.4.1.21.1 	Test Purpose
The purpose of this test case is to verify that the MgNB initiated measurement gap coordination procedure between two gNBs from different vendors can successfully be completed by performing the S-Node Modification procedure, conforming to the NR C-Plane profile specification [2] Section 7.2.1.8.
2.4.1.21.2 	Minimum Requirements
DUTs: Master gNB (MgNB) and Secondary gNB (SgNB):
DUTs shall apply the parameter condition specified in 7.2.1 of the NR C-Plane profile specification [2]
The coverage of Master gNB and Secondary gNB cells overlap.
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to trigger the measurement report procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe Xn procedural flows and content, and NG-U UP content
2.4.1.21.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
The Test UE or UE emulator is within the coverage area of the MgNB and of the SgNB cells
The test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed.
The S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the application test server and test UE or UE emulator is possible
2.4.1.21.4 	Procedure
1.Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the  Measurement Gap Coordination procedure. This involves observing that the user plane data forwarded from the SgNB to the MgNB over the Xn interface during the Measurement Gap Coordination procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates high enough for the SgNB to start buffering user plane downlink data prior to the release of the SgNB.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform the measurement gap coordination procedure
An example of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The MgNB receives a measurement report from the test UE or UE emulator
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the RRC reconfiguration was completed
5.	Observe the Protocol Analyzer Xn, NG logs and the Test UE or UE emulator logs
2.4.1.21.5 	Expected Results and Log Observation
2.4.1.21.5.1 	Expected Results
The measurement gap coordination procedure between two gNBs is completed successfully, performed with the S-Node Modification procedure. Data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
2.4.1.21.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.2.1.8.1/7.2.1.8.2.
If any of the following listed IEs is observed in the Xn log
“Criticality Diagnostics” in “S-NODE MODIFICATION REQUEST ACKNOWLEDGE”
the test result shall be determined to be ‘successful with remarks’.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink and uplink U-Plane data generated in step 1, during step 2 and in step 4:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE and the application server, respectively
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane transferred between SgNB to MgNB is correctly received by the Test UE or UE emulator and the application server, respectively.
2.4.1.22 	SN initiated Activity Notification
2.4.1.22.1 	Test Purpose
The purpose of this test case is to verify that the SgNB initiated S-Node Activity Notification procedure between two gNBs from different vendors can successfully be completed, conforming to the NR C-Plane profile specification [2] Section 7.9.1.
2.4.1.22.2 	Minimum Requirements
DUTs: Master gNB (MgNB) and Secondary gNB (SgNB):
DUTs shall apply the parameter condition specified in 7.9.1 of the NR C-Plane profile specification [2]
The coverage of Master gNB and Secondary gNB cells overlap.
Testing tools which are required for this test scenario:
Test UE or UE emulator: used to start and stop user data transfer and initiate the Activity Notification procedure
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the core network, ie, 5GC side
Protocol Analyzer: used to record and observe Xn procedural flows and content, and NG-U UP content
2.4.1.22.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
The Test UE or UE emulator is within the coverage area of the MgNB and of the SgNB cells
The test UE or UE emulator has registered to the network, ie, Registration procedure and the Service Request procedure specified in NR C-Plane profile specification [2] Section 6.1.1 has been successfully completed.
The S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transfer between the application test server and test UE or UE emulator is possible
2.4.1.22.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform the activity notification procedure – inactivity indication
An example of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The UE or UE emulator stops user traffic to/from the Application Test Server until the activity supervision timer in the SgNB expires
Possible procedures as a result of this step are:
i.	MgNB releases the SgNB node by means of the S-Node Release procedure
ii.	MgNB does not take any action
iii.	MgNB suspends SCG resources by means of the S-Node Modification procedure
3.	Perform the activity notification procedure – re-activated indication
Step 3 is applicable only when in step 2 the procedure results are ii or iii.
An example of how this procedure can be performed (or triggered) are listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The UE or UE emulator resumes user traffic to/from the Application Test Server for at least 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly after the Activity Notification with re-activation is completed
4.	Observe the Protocol Analyzer Xn, NG logs and the Test UE or UE emulator logs
2.4.1.22.5 	Expected Results and Log Observation
2.4.1.22.5.1 	Expected Results
The Activity Notification procedure between two gNBs is completed successfully and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is possible.
Procedure step 2 and optionally step 3 (see section 2.4.1.22.4) may result in one of the below listed outcomes. Any of the outcomes is considered to be a successful TC completion. However, step 3 may not be applicable, as specified in section 2.4.1.22.4, in which case the TC is considered to be successful if step 2 only is executed.
step 2:
a.	MgNB releases the SgNB node by means of the S-Node Release procedure
b.	MgNB does not take any action
c.	MgNB suspends SCG resources by means of the S-Node Modification procedure
step 3:
a.	MgNB does not take any action when step 2 resulted in outcome b.
b.	MgNB resumes SCG resources by means of the S-Node Modification procedure, when step 2 resulted in outcome c.
2.4.1.22.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.9.1.
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink and uplink U-Plane data generated in step 1, and in step 3:
o	All U-Plane data which is recorded in the NG logs is correctly received by the Test UE or emulated UE and the application server, respectively
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane transferred between SgNB and MgNB) is correctly received by the Test UE or UE emulator and the application server, respectively.
2.4.1.23 	Inter-Master Node Handover (with SN Change)
2.4.1.23.1 	Test Purpose
The purpose of this test case is to verify that an Inter-Master Node Handover (with SN Change) procedure with four gNBs from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] section 7.7.2.
2.4.1.23.2 	Minimum Requirements
DUTs:  Four gNBs (Source Master gNB (S-MN), Target Master gNB (T-MN), Source Secondary gNB (S-SN), Target Secondary gNB (T-SN)):
DUTs shall apply the parameter condition specified in 7.7.2 of the NR C-Plane profile specification [2]
The coverage of Source Master gNB cell (S-MN) overlaps with Target Master gNB cell (T-MN) and Source Secondary gNB cell (S-SN)
The coverage of Target Master gNB cell (T-MN) overlaps with Target Secondary gNB cell (T-SN)
The coverage of Source Secondary gNB cell (S-SN) do not overlap with Target Secondary gNB cell (T-SN)
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Inter-Master Node Handover (with SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.23.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the S-MN, T-MN, S-SN and T-SN according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the Source Master gNB cell (S-MN) and Source Secondary gNB cell (S-SN)
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the Source Master gNB (S-MN) and Source Secondary gNB (S-SN) has been successfully completed according to NR C-Plane profile specification
2.4.1.23.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
Note: it is a requirement for this test case to validate that the user plane downlink data forwarding function operates correctly during the Inter-Master Node Handover procedure.
This involves observing that the user plane data forwarded from the source gNB to the target gNB, over the Xn interface during the Inter-Master Node Handover procedure can be received successfully by the Test UE or UE emulator without seeing any packet losses.
One of the methods which can be used to stimulate the user plane downlink data forwarding function is to transfer user plane data at data rates which are high enough for the source gNB to start buffering user plane downlink data prior to the Inter-Master Node Handover.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane downlink data forwarding function (for example, it could correspond to the maximum Layer 1 Radio data rate in NR RAT, which is calculated based on 3GPP TS 38.211 [10] and 3GPP TS 38.214 [11] using the RAN parameters used in this test).
2.	Perform Inter-Master Node Handover (with SN Change) procedure from Source Master gNB (S-MN) to Target Master gNB (T-MN).
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	The Test UE or UE emulator sends a Measurement Report to the Source Master gNB (S-MN). One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and Source Master gNB (S-MN) and the Target Master gNB (T-MN) simultaneously. In this specific case, the Source Master gNB (S-MN) cell can start off with low attenuation applied which is subsequently increased. At the same time, the Target Master gNB (T-MN) cell can start off with high attenuation applied which is subsequently lowered to a level which can trigger the measurement report to be sent to the Source Master gNB (S-MN).
The Target Master gNB (T-MN) decides to change the Secondary Node if the S-SN cell do not overlap with T-SN cell. Therefore, the T-MN sends the S-Node Addition Request to Target Secondary gNB (T-SN).
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator	.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Inter-Master Node Handover (with SN Change) procedure. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.23.5 	Expected Results and Log Observation
2.4.1.23.5.1 	Expected Results
The Inter-Master Node Handover (with SN Change) procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.23.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.7.2.1/7.7.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“PDU Session Resources Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“PDU Session Resources Not Admitted List” in “HANDOVER REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “HANDOVER REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “S-NODE RECONFIGURATION COMPLETE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from S-MN to T-MN) is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the Xn logs (ie, all U-Plane data forwarded from T-MN to S-MN) is recorded in the Xn logs
2.4.1.24 	Intra Master Node, intra gNB-DU intra Cell handover with Secondary Node change
2.4.1.24.1 	Test Purpose
The purpose of this test case is to verify that an Intra-Master Node Intra cell Handover procedure with SN change  between gNBs from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] section 7.10.1.
2.4.1.24.2 	Minimum Requirements
DUTs:  Two gNBs (Master gNB (MN), Secondary gNB (SN)):
Note: to execute this test case there may be two SN DUTs used, a source SN and a target SN. When one SN DUT only is used, that single SN is serving both as source and target SN.
DUTs shall apply the parameter condition specified in 7.10.1 of the NR C-Plane profile specification [2]
The coverage of the primary cell of the MN and the cell of the SN overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Intra-Master Node Handover (with SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.24.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MN and SN according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the Master gNB cell (MN) and Secondary gNB cell (SN)
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the Master gNB (MN) and Secondary gNB (SN) has been successfully completed according to NR C-Plane profile specification
2.4.1.24.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros)
2.	Perform the MN intra-DU handover with SN Change procedure
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT
a.	Establish and release many DRBs consecutively to use-up DRB-IDs until the max number of DRB-IDs per security key is reached (the exact max number is implementation dependent). When the max number is reached a new security key is assigned by performing and intra-cell HO
The Master gNB (MN) decides to change the SN Secondary Node even if the primary MN cell overlaps with the cell of the SN
Note: When one SN DUT only is used, that single SN is serving both as source and target SN
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Intra-Master Node Handover (with SN Change) procedure. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test)
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs
2.4.1.24.5 	Expected Results and Log Observation
2.4.1.24.5.1 	Expected Results
The Intra-Master Node Intra-DU Handover with SN Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.24.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.10.12.1/7.10.12.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“PDU Session Resources Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “S-NODE RECONFIGURATION COMPLETE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs (ie, all U-Plane data forwarded from S-MN to T-MN) is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the Xn logs (ie, all U-Plane data forwarded from T-MN to S-MN) is recorded in the Xn logs
2.4.1.25 	Intra Master Node, intra gNB-DU inter Cell handover with Secondary Node change
2.4.1.25.1 	Test Purpose
The purpose of this test case is to verify that an Intra-Master Node Intra-DU Handover procedure with SN change  between gNBs from different vendors can be successfully completed; conforming to the NR C-Plane profile specification [2] section 7.10.2.
2.4.1.25.2 	Minimum Requirements
DUTs:  Two gNBs (Master gNB (MN), Secondary gNB (SN)):
Note: to execute this test case there may be two SN DUTs used, a source SN and a target SN. When one SN DUT only is used, that single SN is serving both as source and target SN.
DUTs shall apply the parameter condition specified in 7.10.1 of the NR C-Plane profile specification [2]
The coverage of the primary cell of the MN and the cell of the SN overlap
The coverage of the serving cell of the MN and the cell of the SN overlap
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to perform Intra-Master Node Handover (with SN Change) procedure
Core or Core emulator (5GC): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe both Xn link procedural flows and content, and NG-U UP content
2.4.1.25.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MN and SN according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, i.e., Registration procedure and/or Service Request procedure specified in NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the Master gNB cell (MN) and Secondary gNB cell (SN)
Data transfer between the application test server and Test UE or UE emulator is possible
S-NG-RAN NODE ADDITION procedure between the Master gNB (MN) and Secondary gNB (SN) has been successfully completed according to NR C-Plane profile specification
2.4.1.25.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator.
It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Perform the MN intra-DU handover with SN Change procedure.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the primary cell and the serving cell of the MN simultaneously. In this specific case, the attenuation of the MN primary cell can start with a low value which is subsequently increased. At the same time, the serving cell of the MN can start with high attenuation level which is subsequently lowered to a level which can trigger the handover from the primary cell to the serving cell within the MN.
The Master gNB (MN) decides to change the Secondary Node even if the secondary MN cell overlaps with the cell of the SN.
Note: When one SN DUT only is used, that single SN is serving both as source and target SN
3.	Stop data transfer between the Application Test Server and the Test UE or UE emulator	.
4.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator for 10 seconds.
Note: it is a requirement for this test case to validate that the user plane transmission operates correctly as a result of successful Intra-Master Node Handover (with SN Change) procedure. This involves observing that the user plane data transferred in both directions is successfully received by the Test UE or UE emulator (DL data), or by the Application Test Server (UL data) without seeing any packet losses.
The exact data rate which is required to be generated is not specified but it is recommended that the data rate is high enough to verify the user plane data transmission (for example, it could correspond to the maximum Layer 1 Radio data rate in the NR RAT, which is calculated based on 3GPP TS 38.211 [10] using the RAN parameters used in this test).
5.	Observe the Protocol Analyzer NG and Xn logs and Test UE or UE emulator logs.
2.4.1.25.5 	Expected Results and Log Observation
2.4.1.25.5.1 	Expected Results
The Intra-Master Node Intra-DU Handover with SN Change procedure is successfully completed and data transfer from the Application Test Server to the Test UE or UE emulator and vice versa is ongoing/possible.
2.4.1.25.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the message flows specified in the NR C-Plane profile specification [2] Sections 7.10.2.1/7.10.2.2.
The test result shall be determined to be Partial Success if any of the following listed IEs is observed in the Xn logs:
“PDU Session Resources Not Admitted List” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE ADDITION REQUEST ACKNOWLEDGE”
“Criticality Diagnostics” in “S-NODE RELEASE REQUEST ACKNOWLEDGE”
“Configuration rejected” in “S-NODE RECONFIGURATION COMPLETE”
Xn and NG logs recorded in the Protocol Analyzer and Test UE or UE emulator logs show that:
Regarding the downlink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data recorded in the NG logs is correctly received by the Test UE or UE emulator
o	All U-Plane data recorded in the Xn logs is correctly received by the Test UE or UE emulator
Regarding the uplink U-Plane data generated in step 1 and after step 2 and in step 4:
o	All U-Plane data transmitted by the Test UE or emulated UE is recorded in the NG logs
o	All U-Plane data transmitted by the Test UE or UE emulator is recorded in the Xn logs  is recorded in the Xn logs
2.4.2 	Xn U-Plane IOT Test Cases
2.4.2.1 	Node behaviour of the corresponding node with RLC-AM and/or RLC-UM
2.4.2.1.1 	Test Purpose
The purpose of this test case is to verify that the behaviour of the corresponding node procedure with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.1.1.
Note: The test cases for the behaviour of the corresponding node sending DDDS when events lost packet detection and stop scheduling for the data bearer occur are included in the chapter 2.4.2.3.
2.4.2.1.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC nodes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.1.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
Data transmission has not been performed via the MgNB, eg, keeping SN terminated split bearer with NR radio quality low enough
Note: This test case is used to verify that the MgNB does not discard any of its buffered packets in events such as Radio Link Outage over the MgNB unless it receives discard indication from the higher layers or from the SgNB hosting NR PDCP, such as the buffer discard indication from the SgNB. This initial condition ensures that the SgNB does not send the buffer discard indication to the MgNB.
2.4.2.1.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to MgNB node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	Trigger radio link outage on the MgNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator away from the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
3.	Trigger radio link resume on the MgNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To move the Test UE or UE emulator back within the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with high attenuation applied which is subsequently decreased to a level which can trigger radio link resume condition.
4.	Stop data transfer.
5.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.1.5 	Expected Results and Log Observation
2.4.2.1.5.1 	Expected Results
The behaviour of the corresponding node is aligned with the requirement specified in Section 4.1.1.1 of NR U-Plane profile specification [3].
2.4.2.1.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
MgNB sends DDDS message which includes the Cause Value IE with value ‘1’, ‘3’ or ‘4’ to SgNB after step 2
MgNB sends DDDS message which includes the Cause Value IE with value ‘2’, ‘5’ or ‘6’ to SgNB after step 3
Note: these are to confirm if the Radio Link Outage operation has been performed.
Logs recorded in the Test UE or UE emulator are aligned with the NR U-Plane profile specification [3] Section 4.1.1.1 and the following should be observed:
After the end of step 2 and before the start of step 3, Test UE or UE emulator does NOT receive any data which is transmitted from MgNB in step 1
After step 3, Test UE or UE emulator receives all the data which is transmitted from MgNB before triggering Radio Link Outage in step 1
2.4.2.2 	General for Elements for the NR user plane protocols with RLC-AM and/or RLC-UM
2.4.2.2.1 	Test Purpose
The purpose of this test case is to verify that the general behaviour with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.1.
2.4.2.2.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the Xn link
2.4.2.2.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the Xn link between the MgNB and SgNB
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
Data transmission has not been performed via the MgNB
Note: the intention of this is to make a condition where any of the optional fields in DDDS has no available value.
2.4.2.2.4 	Procedure
1.	Trigger S-NG-RAN NODE ADDITION procedure
Note: the intention of this step is to have the MgNB send DDDS which does not include any of the optional fields as the corresponding value is not yet available.
2.	Perform data transfer in both direction between the Application Test Server and the Test UE or UE emulator until the end of step 6. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, meaningful to verify that the user plane transmission operates correctly.
Note: the intention of this step is to make a situation where the values of Highest Transmitted NR PDCP Sequence Number IE and Highest Successfully Delivered NR PDCP Sequence Number IE in DDDS are valid.
3.	After the Application Test Server starts to transmit downlink data, drop some packets sent from the SgNB to MgNB via Xn link by using the Network Impairment Emulator inserted in-line in the Xn link
Note: the intention of this step is to make a situation where the value of Lost Packet Report IE is valid.
4.	Trigger the SgNB to send Downlink User Data PDU(s) including Retransmission flag IE with ‘1’ to MgNB
Note: the intention of this step is to make a situation where the value of Highest Retransmitted NR PDCP Sequence Number IE and Highest Successfully Delivered Retransmitted NR PDCP Sequence Number IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
5.	Trigger radio link outage condition in the MgNB at least once
Note: the intention of this step is to make a situation where the value of Cause Value IE is valid.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	To gradually move the Test UE or UE emulator away from the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
6.	Stop scheduling in the MgNB
Note: the intention of this step is to create a situation where the value of Final Frame Indication IE is valid.
The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
7.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs
2.4.2.2.5 	Expected Results and Log Observation
2.4.2.2.5.1 	Expected Results
The behaviour of MgNB and SgNB is align with the requirement specified in Section 4.1.2.1 of NR U-Plane profile specification [3].
2.4.2.2.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.1 and the following should be observed:
The DDDSs captured during step 1 have the following IEs with the value ‘0’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
o	Final Frame Indication IE
o	Lost Packet Report IE
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
o	Cause Report IE
One or more DDDSs captured after the beginning of the step 2 have one or both of the following IEs with the value ‘1’:
o	Highest Transmitted NR PDCP SN Ind IE
o	Highest Delivered NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 3 have Lost Packet Report IE with the value ‘1’
One or more DDDSs captured after the beginning of the step 4 have one or both of the following IEs with the value ‘1’:
o	Highest Retransmitted NR PDCP SN Ind IE
o	Highest Delivered Retransmitted NR PDCP SN Ind IE
One or more DDDSs captured after the beginning of the step 5 have Cause Report IE with the value ‘1’ and Cause value IE with the value ‘1’, ‘3’, or ‘4’
One or more DDDSs captured after the beginning of the step 6 have Final Frame Indication IE with the value ‘1’
2.4.2.3 	Report Polling with RLC-AM and/or RLC-UM
2.4.2.3.1 	Test Purpose
The purpose of this test case is to verify that the Report Polling procedure with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.2.
2.4.2.3.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
Network Impairment Emulator: used to discard selected packets transmitted via the Xn link
2.4.2.3.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Network Impairment Emulator is physically connected in-line to the Xn link between the MgNB and SgNB
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.3.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator until the end of step 5. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send Downlink User Data PDU(s) including Report polling IE with ‘1’ from SgNB to MgNB at least once.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	SgNB transmits some data packets to MgNB (ie, step 1)
3.	Drop some packets sent from SgNB to MgNB via Xn link by using the Network Impairment Emulator inserted in-line in the Xn link.
Note: the intention of this step is to make a situation where “Lost packet detection” occurs in MgNB.
4.	Trigger radio link outage condition in the MgNB.
Note: the intention of this step is to make a situation where “Radio link outage” occurs in MgNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	To gradually move the Test UE or UE emulator away from the coverage of the MgNB. One of the possible methods can be to make use of programmable attenuators to simulate varying channel conditions between the Test UE or UE emulator and the MgNB cell. In this specific case, the MgNB cell can start off with low attenuation applied which is subsequently increased to a level which can trigger radio link outage condition.
5.	Trigger radio link resume condition on MgNB.
6.	Stop scheduling in the MgNB.
Note: the intention of this step is to make a situation where “Stop scheduling for the data bearer” occurs in MgNB.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Stop downlink data transmission
7.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.3.5 	Expected Results and Log Observation
2.4.2.3.5.1 	Expected Results
The use of Report Polling function is aligned with the requirement specified in Section 4.1.2.2 of NR U-Plane profile specification [3].
2.4.2.3.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.2 and the following should be observed:
After the beginning of step 2:
o	SgNB sends MgNB one or more Downlink User Data PDU(s) including Report polling IE with the value ‘1’
o	MgNB sends SgNB DDDS as soon as possible after receiving the corresponding Downlink User Data PDU(s)
After the beginning of step 3, MgNB sends SgNB DDDS where following IEs show the dropped packets:
o	Start of lost NR-U Sequence Number range IE(s)
o	End of lost NR-U Sequence Number range IE(s)
After the beginning of step 4, MgNB sends SgNB DDDS including Cause Value IE with the value ‘1’, ‘3’ or ‘4’
After the beginning of step 6, MgNB sends SgNB DDDS including Final Frame Indication IE with the value ‘1’, and then MgNB does not send SgNB DDDS including any updated instance of the following IEs
o	Highest successfully delivered NR PDCP Sequence Number IE
o	Highest transmitted NR PDCP Sequence Number IE
o	Highest successfully delivered retransmitted NR PDCP Sequence Number IE
o	Highest retransmitted NR PDCP Sequence Number IE
2.4.2.4 	Buffer discard indication with RLC-AM and/or RLC-UM
2.4.2.4.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL Discard Blocks IE and the DL Flush IE with gNB1 and gNB2 from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.3.
2.4.2.4.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.4.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.4.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
2.	SgNB to send the DL User Data message which includes the DL Discard Blocks IE with value ‘1’.
Note: the purpose of this step is to indicate from SgNB to MgNB to discard NR PDCP PDUs. It is up to SgNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the SgNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the SgNB receives acknowledgement of the transmitted data from the MgNB
3.	SgNB to send the DL User Data message which includes the DL Flush IE with value ‘1’.
Note: the purpose of this step is to indicate from SgNB to MgNB to discard NR PDCP PDUs. It is up to SgNB implementation when to initiate this step. Specific test procedure needs to be considered taking into account the SgNB implementation.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Tester sets small value in "discardTimer" in order that this timer expires before the SgNB receives acknowledgement of the transmitted data from the MgNB
4.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.4.5 	Expected Results and Log Observation
2.4.2.4.5.1 	Expected Results
The use of DL Discard Blocks IE and the DL Flush IE is aligned with the requirement specified in Section 4.1.2.3 of NR U-Plane profile specification [3].
2.4.2.4.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer and the Test UE or emulated UE show that:
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 2, are NOT received by the Test UE or emulated UE
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	SgNB DL discard Number of blocks
o	DL discard NR PDCP PDU SN start
o	Discarded Block size present
NR PDCP PDUs, which are indicated to be discarded in the DL User Data message in step 3, are NOT received by the Test UE or emulated UE.
Note: the NR PDCP PDUs to be discarded is indicated by the following IEs in the DL User Data message:
o	DL discard NR PDCP PDU SN present
2.4.2.5 	User data existence flag with RLC-AM and/or RLC-UM
2.4.2.5.1 	Test Purpose
The purpose of this test case is to verify SgNB’s notification to the MgNB of the existence of user data, but without using the User data existence flag IE, with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.4.
Note: This feature is needed when the MgNB does not support the User data existence flag IE eg, in the case when the MgNB is designed to be compliant with older versions of the 3GPP specifications which do not support this IE.
2.4.2.5.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
SgNB shall activate the feature which is specified in Section 4.1.2.4 of NR U-Plane profile [3]
Note: How to activate this feature is up to SgNB implementation. One example is to activate it via M-Plane.
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.5.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.5.4 	Procedure
1.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator via Xn. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
Note: the intention of this step is to avoid expiring some timers in MgNB which monitor the activity of user data transfer (eg, DRX inactivity timer, UE inactive timer, etc).
2.	Decrease the amount of user data to be transmitted in both directions the Application Test Server and the Test UE or UE emulator so that the user data can be transmitted via SgNB only. With this condition perform data transmission for 60 seconds.
Note: the intention of this step is to create a situation where the SgNB sends actual user data to the MgNB even when the amount of user data is small enough to be sent via the SgNB only. In this test scenario, the SgNB radio condition need not be ideal but shall be good enough to ensure that all user data can be transmitted through the MgNB only.
3.	Stop data transfer.
4.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.5.5 	Expected Results and Log Observation
2.4.2.5.5.1 	Expected Results
The behaviour of SgNB is align with the requirement specified in Section 4.1.2.4 of NR U-Plane profile [3].
2.4.2.5.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.4 and the following should be observed:
NR PDCP PDU is sent from SgNB to MgNB, which is frequently enough NOT to expire the timers described in the note in step 1
Note: The required frequency is up to MgNB implementation, ie, the value of the timers used in the MgNB.
As a result of above, logs recorded in the Test UE or UE emulator shows:
Test UE or UE emulator keeps RRC Connected state without expiring DRX inactivity timer in MgNB as specified in 3GPP TS 38.331 [17] and 3GPP TS 38.321 [18], from the beginning of step 2 till before step 3
2.4.2.6 	Assistance Information Report polling with RLC-AM and/or RLC-UM
2.4.2.6.1 	Test Purpose
The purpose of this test case is to verify the use of the Assistance Information Report polling flag with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.5.
2.4.2.6.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.6.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.6.4 	Procedure
1.	Send Downlink User Data PDU(s) from SgNB to MgNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT:
a.	Send the Downlink User Data PDU(s) immediately after completing the S-NG-RAN NODE ADDITION procedure
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. The exact data rate that is generated is not specified, but it is up to MgNB node vendor implementation. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.6.5 	Expected Results and Log Observation
2.4.2.6.5.1 	Expected Results
The use of the Assistance Information Report polling flag is aligned to the requirement specified in Section 4.1.2.5 of NR U-Plane profile [3].
2.4.2.6.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.5 and the following should be observed:
In step 1, one or more Downlink User Data PDU(s) sent by the SgNB to the MgNB include Assistance Information Report polling Flag IE with the value ‘1’
After receiving the corresponding Downlink User Data PDU(s), AID is sent by the MgNB to the SgNB
2.4.2.7 	Radio quality assistance information with RLC-AM and/or RLC-UM
2.4.2.7.1 	Test Purpose
The purpose of this test case is to verify the use of the Radio quality assistance information IE with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.6.
2.4.2.7.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC modes specified in NR U-Plane profile specification [3]
Note: In case both RLC-AM and RLC-UM is to be tested, this test case must be executed twice, with respective RLC settings.
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
MgNB shall be configured with the Assistance Information Type(s) to be reported in the AID message via M-Plane. In this version of the specification the following Assistance Information Types can be configured to be reported:
o	‘0’=UNKNOWN
o	‘1’=Average CQI
o	‘2’=Average HARQ Failure
o	‘3’=Average HARQ Retransmissions
o	‘4’= DL Radio Quality Index
o	‘5’= UL Radio Quality Index
o	‘6’= Power Headroom Report
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application Test Server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.7.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.7.4 	Procedure
1.	Send Downlink User Data PDU(s) from SgNB to MgNB with Assistance Information Report polling Flag IE whose value is set to ‘1’. This procedure shall be performed before the assistance information to be reported by the MgNB becomes available.
Note: the intention of this step is to create a situation where the MgNB does not report the assistance information due to unavailability of the information.
An example of how this procedure can be performed (or triggered) is listed below. The exact method to perform (or trigger) this procedure is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send the Downlink User Data PDU(s) immediately after completing the S-NG-RAN NODE ADDITION procedure
2.	Perform data transfer in both directions between the Application Test Server and the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough for MgNB to buffer the downlink data. It should be noted that this test case does not specify the test data pattern generated by the Application Test Server, but it is recommended that the test data pattern should include some level of randomness (ie, avoiding all zeros).
3.	Create conditions which can help the MgNB gather the information/measurements required for its configured Assistance Information Types.
An example of how these conditions can be created is listed below. The exact method to create these conditions is out of scope of this specification and is left up to the implementation of the DUT.
a.	Send DL user data via MgNB so that MgNB can obtain eg, CQI/HARQ ACK/Power headroom report from Test UE or UE emulator.
4.	Send Downlink User Data PDU(s) from SgNB to MgNB with Assistance Information Report polling Flag IE whose value is set to ‘1’.
5.	Observe the Protocol Analyzer Xn logs and Test UE or UE emulator logs.
2.4.2.7.5 	Expected Results and Log Observation
2.4.2.7.5.1 	Expected Results
The use of the Radio quality assistance information IE is aligned with the requirement specified in Section 4.1.2.6 of NR U-Plane profile [3].
2.4.2.7.5.2 	Log Observation
Xn logs recorded in the Protocol Analyzer are aligned with the NR U-Plane profile specification [3] Section 4.1.2.6 and the following should be observed:
After step 1, MgNB sends the Assistance Information Data message to SgNB, where the value of Assistance Information Indication IE is ‘0’
Note: the intention is to validate that any configured assistance information is not reported at this moment.
After step 3, MgNB sends the Assistance Information Data message to SgNB, where Assistance Information Type IE, Number of octets for Radio Quality Assistance Information Fields IE, and Radio Quality Assistance Information IE corresponding to the configured assistance information are included
Note: the intention is to validate that all the configured assistance information is reported.
Note: it is not expected that any assistance information which is not configured to be reported via M-Plane is included in the AID message.
2.4.2.8 	DL report NR PDCP PDU SN with RLC-AM
2.4.2.8.1 	Test Purpose
The purpose of this test case is to verify that the use of the DL report NR PDCP PDU SN IE with MgNB and SgNB from different vendors can be successfully completed; conforming to the NR U-Plane profile specification [3] Section 4.1.2.7.
2.4.2.8.2 	Minimum Requirements
DUTs: Two gNBs (MgNB – MN, SgNB – SN):
DUTs shall apply RLC-AM specified in NR U-Plane profile specification [3]
The coverage of MgNB cell (MN) and SgNB cell (SN) overlap each other
Testing tools which are required for this test scenario:
Test UE or UE emulator which is capable of supporting NR and NR-DC: used to terminate NAS/AS protocol and data transmission/reception
Core or Core emulator (5GC capabilities): used to terminate UEs (emulator) NAS protocol
Application test server: used to originate and terminate application layer traffic (eg, UDP, TWAMP, etc) and provide application layer processing on the network side
Protocol Analyzer: used to record and observe Xn procedural flows and contents
2.4.2.8.3 	Initial Conditions
Refer to Section 2.4 for the standard list of initial conditions.
The following list of initial conditions are applicable for this specific test case:
Xn Setup procedure has been successfully completed between the MgNB and SgNB according to the NR C-Plane profile specification [2]
Test UE or UE emulator has registered to the network, ie, Registration procedure and Service Request procedure specified in the NR C-Plane profile specification [2] has been successfully completed
Test UE or UE emulator is within the coverage area of the MgNB cell and SgNB cell
S-NG-RAN NODE ADDITION procedure between the MgNB and SgNB has been successfully completed according to NR C-Plane profile specification [2]
2.4.2.8.4 	Procedure
1.	Perform data transfer from the Application Test Server to the Test UE or UE emulator. The Application Test Server generates and transmits downlink data with data size large enough to achieve a sustained data rate over time, to meaningfully verify that the user plane transmission operates correctly.
2.	Send the DL User Data message which includes the DL report NR PDCP PDU SN IE from SgNB to MgNB.
3.	Observe the Protocol Analyzer Xn logs.
2.4.2.8.5 	Expected Results and Log Observation
2.4.2.8.5.1 	Expected Results
The use of DL report NR PDCP PDU SN IE is aligned with the requirement specified in Section 4.1.2.7 of NR U-Plane profile specification [3].
2.4.2.8.5.2 	Log Observation
Logs Recorded in the Protocol Analyzer show that:
After beginning of step 2:
o	MgNB sends SgNB DDDS including Highest successfully delivered NR PDCP Sequence Number IE with the value same as the value indicated by DL report NR PDCP PDU SN IE.
o	MgNB sends SgNB DDDS as soon as possible only when all PDCP PDU SNs up to this DL report NR PDCP PDU have been successfully delivered in-sequence.
Annex (informative)